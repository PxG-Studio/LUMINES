(()=>{var e={};e.id=4282,e.ids=[4282],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},8678:e=>{"use strict";e.exports=import("pg")},8331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(65940),r(4034),r(45946),r(7629),r(12523);var a=r(23191),n=r(88716),s=r(37922),i=r.n(s),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["spark",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65940)),"/home/cursor-dev/Documents/Lumines/src/app/spark/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4034)),"/home/cursor-dev/Documents/Lumines/src/app/spark/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,45946)),"/home/cursor-dev/Documents/Lumines/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/home/cursor-dev/Documents/Lumines/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/home/cursor-dev/Documents/Lumines/src/app/not-found.tsx"]}],d=["/home/cursor-dev/Documents/Lumines/src/app/spark/page.tsx"],u="/spark/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/spark/page",pathname:"/spark",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1401:(e,t,r)=>{let a={"4d804d1ff79386d11671bbc4ab1ef0155e640718":()=>Promise.resolve().then(r.bind(r,75790)).then(e=>e.updateUserPrefs),b61a356f98a4e62fdbc744b50bd8bc47825b3230:()=>Promise.resolve().then(r.bind(r,75790)).then(e=>e.generateUnityScript)};async function n(e,...t){return(await a[e]()).apply(null,t)}e.exports={"4d804d1ff79386d11671bbc4ab1ef0155e640718":n.bind(null,"4d804d1ff79386d11671bbc4ab1ef0155e640718"),b61a356f98a4e62fdbc744b50bd8bc47825b3230:n.bind(null,"b61a356f98a4e62fdbc744b50bd8bc47825b3230")}},71782:(e,t,r)=>{Promise.resolve().then(r.bind(r,45701))},7375:()=>{},18025:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]])},75290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},46242:(e,t,r)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let a=r(15424);function n(e){let{createServerReference:t}=r(56493);return t(e,a.callServer)}},45701:(e,t,r)=>{"use strict";let a;r.r(t),r.d(t,{default:()=>tr});var n,s,i,o,l=r(10326),c=r(17577);r(15424);var d=r(46242);(0,d.$)("4d804d1ff79386d11671bbc4ab1ef0155e640718");var u=(0,d.$)("b61a356f98a4e62fdbc744b50bd8bc47825b3230");function p({currentTask:e,tasks:t,fileChanges:r,tokenUsage:a,isVisible:n}){var s;let[i,o]=(0,c.useState)(!0),d=e=>{switch(e){case"completed":return l.jsx("span",{className:"task-icon completed",title:"Completed",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:l.jsx("path",{d:"M13.5 4L6 11.5L2.5 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});case"in-progress":return l.jsx("span",{className:"task-icon in-progress",title:"In Progress",children:l.jsx("div",{className:"spinner-small"})});case"failed":return l.jsx("span",{className:"task-icon failed",title:"Failed",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:l.jsx("path",{d:"M4 4L12 12M12 4L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})});default:return l.jsx("span",{className:"task-icon pending",title:"Pending",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:l.jsx("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})})}},u=e=>{switch(e){case"created":return l.jsx("span",{className:"file-icon created",children:"+"});case"modified":return l.jsx("span",{className:"file-icon modified",children:"~"});case"deleted":return l.jsx("span",{className:"file-icon deleted",children:"-"})}};return n||0!==t.length?(0,l.jsxs)("div",{className:`progress-panel ${n?"visible":"hidden"}`,children:[a&&a.limit>0&&(0,l.jsxs)("div",{className:"token-banner",children:[(0,l.jsxs)("div",{className:"token-content",children:[(0,l.jsxs)("span",{className:"token-text",children:[(s=a.remaining)>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString()," monthly tokens remaining"]}),a.remaining<.1*a.limit&&l.jsx("button",{className:"token-upgrade",children:"Switch to Pro 200 for 2x more usage"})]}),l.jsx("button",{className:"token-close",onClick:()=>o(!i),"aria-label":"Toggle progress panel",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:l.jsx("path",{d:"M4 4L12 12M12 4L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),i&&(0,l.jsxs)("div",{className:"progress-content",children:[e&&(0,l.jsxs)("div",{className:"current-task",children:[(0,l.jsxs)("div",{className:"current-task-header",children:[d(e.status),l.jsx("span",{className:"current-task-title",children:e.label}),e.duration&&l.jsx("span",{className:"task-duration",children:e.duration<1e3?`${e.duration}ms`:`${(e.duration/1e3).toFixed(1)}s`})]}),e.subTasks&&e.subTasks.length>0&&l.jsx("div",{className:"subtasks",children:e.subTasks.map(e=>(0,l.jsxs)("div",{className:"subtask",children:[d(e.status),l.jsx("span",{children:e.label})]},e.id))})]}),t.length>0&&(0,l.jsxs)("div",{className:"task-list",children:[l.jsx("div",{className:"task-list-header",children:"Plan"}),t.map(e=>(0,l.jsxs)("div",{className:`task-item ${e.status}`,children:[d(e.status),l.jsx("span",{className:"completed"===e.status?"task-completed":"",children:e.label}),e.duration&&"completed"===e.status&&l.jsx("span",{className:"task-duration-small",children:e.duration<1e3?`${e.duration}ms`:`${(e.duration/1e3).toFixed(1)}s`})]},e.id))]}),r.length>0&&(0,l.jsxs)("div",{className:"file-changes",children:[(0,l.jsxs)("div",{className:"file-changes-summary",children:[(0,l.jsxs)("div",{className:"file-summary-item",children:["Files created: ",l.jsx("strong",{children:r.filter(e=>"created"===e.type).length})," new files"]}),(0,l.jsxs)("div",{className:"file-summary-item",children:["Files modified: ",l.jsx("strong",{children:r.filter(e=>"modified"===e.type).length})," file"]}),(0,l.jsxs)("div",{className:"file-summary-item",children:["Dependencies added: ",l.jsx("strong",{children:r.filter(e=>e.path.includes("package.json")||e.path.includes("node_modules")).length})]})]}),l.jsx("div",{className:"file-list",children:r.map((e,t)=>(0,l.jsxs)("div",{className:"file-item",children:[u(e.type),l.jsx("span",{className:"file-path",children:e.path}),e.description&&l.jsx("span",{className:"file-description",children:e.description})]},t))})]}),t.length>0&&t.every(e=>"completed"===e.status||"failed"===e.status)&&l.jsx("div",{className:"completion-message",children:t.some(e=>"failed"===e.status)?"Some tasks failed. Check the error messages above.":"Generation complete. Your Unity script is ready to use."})]})]}):null}!function(){var e=Error("Cannot find module '@/lib/hooks/useProgress'");throw e.code="MODULE_NOT_FOUND",e}();let h=[{value:"claude-sonnet-3-5-20241022",label:"Claude 3.5 Sonnet (Latest)"},{value:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (June)"},{value:"claude-3-haiku-20240307",label:"Claude 3 Haiku (Fast)"}],f=[{value:"gpt-4",label:"GPT-4 (Best)"},{value:"gpt-4-turbo-preview",label:"GPT-4 Turbo"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo (Fast)"}];function m({onCodeGenerated:e}){let[t,r]=(0,c.useState)([{id:"1",role:"assistant",timestamp:new Date,content:"Hello! I'm SPARK, your Unity C# script generator. Describe what Unity script you'd like to create, and I'll generate it for you."}]),[a,n]=(0,c.useState)(""),[s,i]=(0,c.useState)(!1),[o,d]=(0,c.useState)("claude"),[m,g]=(0,c.useState)("claude-sonnet-3-5-20241022"),[v,y]=(0,c.useState)("gpt-4"),{currentTask:_,tasks:x,fileChanges:b,tokenUsage:N,metadata:S,addTask:w,completeTask:j,failTask:O,addFileChange:T,updateTokenUsage:k,reset:C}=Object(function(){var e=Error("Cannot find module '@/lib/hooks/useProgress'");throw e.code="MODULE_NOT_FOUND",e}())(),E=async t=>{if(t.preventDefault(),!a.trim()||s)return;let l=a.trim();n(""),i(!0),C(),r(e=>[...e,{id:Date.now().toString(),role:"user",timestamp:new Date,content:l}]);let c=[{id:"analyzing",label:"Analyzing request",status:"pending"},{id:"preferences",label:"Loading user preferences",status:"pending"},{id:"generating",label:`Generating code with ${"claude"===o?"Claude":"OpenAI"}`,status:"pending"},{id:"validating",label:"Validating C# syntax",status:"pending"},{id:"logging",label:"Logging to database",status:"pending"}];c.forEach(e=>w(e));try{(async()=>{w({...c[0],status:"in-progress",startTime:new Date}),await new Promise(e=>setTimeout(e,300)),j(c[0].id),w({...c[1],status:"in-progress",startTime:new Date}),await new Promise(e=>setTimeout(e,200)),j(c[1].id),w({...c[2],status:"in-progress",startTime:new Date})})();let t=await u(l,{provider:o,claudeModel:"claude"===o?m:void 0,openaiModel:"openai"===o?v:void 0});t.success?(j(c[2].id),j(c[3].id),j(c[4].id),t.scriptName&&(T({type:"created",path:`Assets/Scripts/${t.scriptName}.cs`,description:"Generated Unity C# script"}),T({type:"created",path:`Assets/Scripts/${t.scriptName}.cs.meta`,description:"Unity meta file"}))):O(c[2].id,t.error),t.success&&t.code&&t.scriptName?(r(e=>[...e,{id:Date.now().toString(),role:"assistant",timestamp:new Date,content:`✅ Generated ${t.scriptName}.cs successfully! Check the preview panel on the right.`}]),e(t.code,t.scriptName)):r(e=>[...e,{id:Date.now().toString(),role:"error",timestamp:new Date,content:t.error||"Failed to generate script. Please try again."}])}catch(e){O(c[2].id,e instanceof Error?e.message:"Unknown error"),r(e=>[...e,{id:Date.now().toString(),role:"error",timestamp:new Date,content:"An unexpected error occurred. Please try again."}])}finally{i(!1)}},P=x.length>0||b.length>0;return(0,l.jsxs)("div",{className:"chat-container",children:[l.jsx(p,{currentTask:_,tasks:x,fileChanges:b,tokenUsage:N,isVisible:P}),(0,l.jsxs)("div",{className:"provider-selector",children:[(0,l.jsxs)("div",{className:"provider-config",children:[l.jsx("label",{htmlFor:"ai-provider",className:"provider-label",children:"Provider:"}),(0,l.jsxs)("select",{id:"ai-provider",value:o,onChange:e=>d(e.target.value),disabled:s,className:"provider-select",children:[l.jsx("option",{value:"claude",children:"Claude (Anthropic)"}),l.jsx("option",{value:"openai",children:"OpenAI"})]})]}),(0,l.jsxs)("div",{className:"provider-config",children:[l.jsx("label",{htmlFor:"ai-model",className:"provider-label",children:"Model:"}),"claude"===o?l.jsx("select",{id:"ai-model",value:m,onChange:e=>g(e.target.value),disabled:s,className:"provider-select",children:h.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))}):l.jsx("select",{id:"ai-model",value:v,onChange:e=>y(e.target.value),disabled:s,className:"provider-select",children:f.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,l.jsxs)("div",{className:"chat-messages",children:[t.map(e=>l.jsx("div",{className:`chat-message ${e.role}`,children:"user"===e.role||"assistant"===e.role||"error"===e.role||"system"===e.role?e.content:null},e.id)),s&&l.jsx("div",{className:"chat-message assistant",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{children:"Generating Unity script..."})]})})]}),(0,l.jsxs)("form",{onSubmit:E,className:"chat-input-container",children:[l.jsx("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Describe your Unity script...",className:"chat-input",disabled:s}),l.jsx("button",{type:"submit",disabled:s||!a.trim(),className:"btn btn-primary",children:s?(0,l.jsxs)("span",{className:"spinner-container",children:[l.jsx("span",{className:"spinner"}),l.jsx("span",{children:"Generating..."})]}):"Generate"})]})]})}function g({sessionId:e,onFrameUpdate:t}){let[r,a]=(0,c.useState)({status:"idle"});return(0,l.jsxs)("div",{className:"w-full h-full bg-gray-900 rounded-lg flex items-center justify-center",children:["idle"===r.status&&(0,l.jsxs)("div",{className:"text-gray-400 text-center",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.5 4.5L15 19M9 19l-4.5-4.5L9 10"})}),l.jsx("p",{className:"text-sm",children:"No preview available"})]}),"loading"===r.status&&(0,l.jsxs)("div",{className:"text-gray-400 text-center",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-gray-600 border-t-blue-500 rounded-full animate-spin"}),l.jsx("p",{className:"text-sm",children:"Rendering preview..."})]}),"ready"===r.status&&r.frameRef&&l.jsx("img",{src:r.frameRef,alt:"Unity Preview",className:"max-w-full max-h-full object-contain"}),"error"===r.status&&(0,l.jsxs)("div",{className:"text-red-400 text-center",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsx("p",{className:"text-sm",children:"Preview failed"}),r.error&&l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r.error})]})]})}var v=r(75290),y=r(76557);let _=(0,y.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),x=(0,y.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function b({sessionId:e,maxOperations:t=10}){let[r,a]=(0,c.useState)([]);return 0===r.length?null:(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 space-y-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-3",children:"Unity Operations"}),r.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm py-2 px-3 bg-gray-900 rounded",children:["started"===e.status&&l.jsx(v.Z,{className:"w-4 h-4 text-blue-400 animate-spin flex-shrink-0"}),"completed"===e.status&&l.jsx(_,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),"failed"===e.status&&l.jsx(x,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("p",{className:"text-gray-300 truncate",children:[e.type.replace(/_/g," "),e.name&&(0,l.jsxs)("span",{className:"text-gray-500 ml-2",children:["(",e.name,")"]})]}),e.error&&l.jsx("p",{className:"text-xs text-red-400 mt-1 truncate",children:e.error})]}),l.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))]})}let N=(0,y.Z)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),S=(0,y.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=(0,y.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function j({sessionId:e,onUndo:t,onRollbackTo:r}){let[a,n]=(0,c.useState)([]),[s,i]=(0,c.useState)(null),o=()=>{n(Object(function(){var e=Error("Cannot find module '../../../lib/undo/patchStack'");throw e.code="MODULE_NOT_FOUND",e}())(e).getAll())},d=async()=>{if(s)return;let r=Object(function(){var e=Error("Cannot find module '../../../lib/undo/patchStack'");throw e.code="MODULE_NOT_FOUND",e}())(e),a=r.pop();if(a){i(a.id);try{await t?.(a),o()}catch(e){console.error("Undo failed:",e),r.push(a)}finally{i(null)}}},u=async t=>{if(!s){i(t.id);try{await r?.(t),Object(function(){var e=Error("Cannot find module '../../../lib/undo/patchStack'");throw e.code="MODULE_NOT_FOUND",e}())(e).rollbackTo(t.id),o()}catch(e){console.error("Rollback failed:",e)}finally{i(null)}}};return 0===a.length?l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 text-center text-gray-500 text-sm",children:"No operations to undo"}):(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Undo History"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("button",{onClick:d,disabled:null!==s,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white text-xs rounded flex items-center gap-2 transition-colors",children:[l.jsx(N,{className:"w-3 h-3"}),"Undo Last"]}),(0,l.jsxs)("button",{onClick:()=>{!s&&confirm("Clear entire undo history? This cannot be undone.")&&(Object(function(){var e=Error("Cannot find module '../../../lib/undo/patchStack'");throw e.code="MODULE_NOT_FOUND",e}())(e).clear(),o())},disabled:null!==s,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white text-xs rounded flex items-center gap-2 transition-colors",children:[l.jsx(S,{className:"w-3 h-3"}),"Clear"]})]})]}),l.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.slice().reverse().map((e,t)=>(0,l.jsxs)("div",{className:`p-3 bg-gray-900 rounded border ${s===e.id?"border-blue-500":0===t?"border-blue-500/30":"border-gray-700"}`,children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm text-gray-300 font-medium",children:e.type.replace(/_/g," ")}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:e.path}),l.jsx("p",{className:"text-xs text-gray-600 mt-1",children:new Date(e.timestamp).toLocaleString()})]}),0!==t&&(0,l.jsxs)("button",{onClick:()=>u(e),disabled:null!==s,className:"px-2 py-1 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 disabled:cursor-not-allowed text-white text-xs rounded flex items-center gap-1 transition-colors flex-shrink-0",children:[l.jsx(w,{className:"w-3 h-3"}),"Rollback"]})]}),s===e.id&&(0,l.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs text-blue-400",children:[l.jsx("div",{className:"w-3 h-3 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),"Processing..."]})]},e.id))}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-700 text-xs text-gray-500 text-center",children:[a.length," operation",1!==a.length?"s":""," in history"]})]})}!function(){var e=Error("Cannot find module '../../../lib/undo/patchStack'");throw e.code="MODULE_NOT_FOUND",e}();var O=r(18025);let T=(0,y.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),k=(0,y.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function C({sessionId:e,onApplyPreset:t}){let[r,a]=(0,c.useState)(null),[n,s]=(0,c.useState)(!1),i=e=>{switch(e){case"2d":default:return l.jsx(O.Z,{className:"w-5 h-5"});case"3d":return l.jsx(T,{className:"w-5 h-5"});case"ui":return l.jsx(k,{className:"w-5 h-5"})}},o=async e=>{if(!n&&confirm(`Apply "${e.name}" preset? This will add scripts and config to your project.`)){s(!0);try{await t?.(e),a(null)}catch(e){console.error("Failed to apply preset:",e),alert("Failed to apply preset. Check console for details.")}finally{s(!1)}}};return(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-4",children:"Quick Start Presets"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:Object(function(){var e=Error("Cannot find module '../../../lib/presets/indieGamePresets'");throw e.code="MODULE_NOT_FOUND",e}()).map(e=>(0,l.jsxs)("button",{onClick:()=>a(e),className:"p-4 bg-gray-900 hover:bg-gray-850 border border-gray-700 hover:border-blue-500 rounded-lg text-left transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-2 bg-gray-800 rounded",children:i(e.category)}),l.jsx("h4",{className:"text-sm font-semibold text-gray-200",children:e.name})]}),l.jsx("p",{className:"text-xs text-gray-500",children:e.description}),(0,l.jsxs)("div",{className:"mt-3 flex gap-2 text-xs text-gray-600",children:[(0,l.jsxs)("span",{children:[e.scripts.length," scripts"]}),l.jsx("span",{children:"•"}),(0,l.jsxs)("span",{children:[e.assets.length," assets"]}),l.jsx("span",{children:"•"}),l.jsx("span",{children:e.buildConfig.target})]})]},e.id))}),r&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-100 mb-1",children:r.name}),l.jsx("p",{className:"text-sm text-gray-400",children:r.description})]}),l.jsx("button",{onClick:()=>a(null),className:"text-gray-500 hover:text-gray-300",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Scripts (",r.scripts.length,")"]}),l.jsx("div",{className:"space-y-2",children:r.scripts.map(e=>(0,l.jsxs)("div",{className:"p-3 bg-gray-900 rounded border border-gray-700",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-200 font-medium",children:[e.name,".cs"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.path})]},e.name))})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Assets (",r.assets.length,")"]}),l.jsx("div",{className:"space-y-2",children:r.assets.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 bg-gray-900 rounded border border-gray-700",children:[l.jsx("p",{className:"text-sm text-gray-200 font-medium",children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Type: ",e.type]})]},t))})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Build Config"}),l.jsx("div",{className:"p-3 bg-gray-900 rounded border border-gray-700",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,l.jsxs)("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Target:"}),l.jsx("span",{className:"text-gray-300 ml-2",children:r.buildConfig.target})]}),(0,l.jsxs)("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Development:"}),l.jsx("span",{className:"text-gray-300 ml-2",children:r.buildConfig.development?"Yes":"No"})]}),(0,l.jsxs)("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Compression:"}),l.jsx("span",{className:"text-gray-300 ml-2",children:r.buildConfig.compressionFormat})]}),(0,l.jsxs)("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Max Texture:"}),(0,l.jsxs)("span",{className:"text-gray-300 ml-2",children:[r.buildConfig.maxTextureSize,"px"]})]})]})})]})]}),(0,l.jsxs)("div",{className:"mt-6 flex gap-3",children:[l.jsx("button",{onClick:()=>o(r),disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white text-sm font-medium rounded transition-colors",children:n?"Applying...":"Apply Preset"}),l.jsx("button",{onClick:()=>a(null),disabled:n,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium rounded transition-colors",children:"Cancel"})]})]})})})]})}function E({onSelectHistory:e}){let[t,r]=(0,c.useState)([]),[a,n]=(0,c.useState)(!0);return a?(0,l.jsxs)("div",{className:"history-container",children:[l.jsx("div",{className:"history-header",children:l.jsx("h2",{className:"history-title",children:"Generation History"})}),l.jsx("div",{className:"history-loading",children:"Loading history..."})]}):0===t.length?(0,l.jsxs)("div",{className:"history-container",children:[l.jsx("div",{className:"history-header",children:l.jsx("h2",{className:"history-title",children:"Generation History"})}),l.jsx("div",{className:"history-empty",children:"No generation history yet. Generate your first script to get started!"})]}):(0,l.jsxs)("div",{className:"history-container",children:[(0,l.jsxs)("div",{className:"history-header",children:[l.jsx("h2",{className:"history-title",children:"Generation History"}),l.jsx("button",{onClick:()=>{confirm("Are you sure you want to clear all history?")&&(localStorage.removeItem("spark_generation_history"),r([]))},className:"btn btn-secondary btn-sm",children:"Clear All"})]}),l.jsx("div",{className:"history-list",children:t.map(t=>(0,l.jsxs)("div",{className:`history-item ${t.success?"success":"error"}`,onClick:()=>t.success&&e("",t.scriptName),children:[(0,l.jsxs)("div",{className:"history-item-header",children:[l.jsx("span",{className:"history-script-name",children:t.scriptName}),l.jsx("span",{className:"history-provider",children:t.provider})]}),l.jsx("div",{className:"history-prompt",children:t.prompt}),(0,l.jsxs)("div",{className:"history-meta",children:[l.jsx("span",{className:"history-model",children:t.model}),l.jsx("span",{className:"history-timestamp",children:new Date(t.timestamp).toLocaleString()})]})]},t.id))})]})}function P(){let[e,t]=(0,c.useState)({totalGenerations:0,successfulGenerations:0,failedGenerations:0,claudeGenerations:0,openaiGenerations:0,totalTokensUsed:0,avgGenerationTimeMs:0}),[r,a]=(0,c.useState)(!1),n=()=>{try{let e=localStorage.getItem("spark_generation_history");if(e){let r=JSON.parse(e),a=r.filter(e=>"claude"===e.provider).length,n=r.filter(e=>"openai"===e.provider).length,s=r.filter(e=>e.success).length,i=r.filter(e=>!e.success).length;t({totalGenerations:r.length,successfulGenerations:s,failedGenerations:i,claudeGenerations:a,openaiGenerations:n,totalTokensUsed:0,avgGenerationTimeMs:0})}}catch(e){console.error("Failed to load stats:",e)}},s=e.totalGenerations>0?Math.round(e.successfulGenerations/e.totalGenerations*100):0;return(0,l.jsxs)(l.Fragment,{children:[l.jsx("button",{onClick:()=>{n(),a(!r)},className:"stats-toggle","aria-label":"View usage statistics",children:l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M3 17V7M10 17V3M17 17V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),r&&(0,l.jsxs)("div",{className:"stats-modal",children:[l.jsx("div",{className:"stats-backdrop",onClick:()=>a(!1)}),(0,l.jsxs)("div",{className:"stats-panel",children:[(0,l.jsxs)("div",{className:"stats-header",children:[l.jsx("h2",{className:"stats-title",children:"Usage Statistics"}),l.jsx("button",{onClick:()=>a(!1),className:"stats-close",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"stats-content",children:[(0,l.jsxs)("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-label",children:"Total Generations"}),l.jsx("div",{className:"stat-value",children:e.totalGenerations})]}),(0,l.jsxs)("div",{className:"stat-card success",children:[l.jsx("div",{className:"stat-label",children:"Successful"}),l.jsx("div",{className:"stat-value",children:e.successfulGenerations})]}),(0,l.jsxs)("div",{className:"stat-card error",children:[l.jsx("div",{className:"stat-label",children:"Failed"}),l.jsx("div",{className:"stat-value",children:e.failedGenerations})]}),(0,l.jsxs)("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-label",children:"Success Rate"}),(0,l.jsxs)("div",{className:"stat-value",children:[s,"%"]})]}),(0,l.jsxs)("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-label",children:"Claude Generations"}),l.jsx("div",{className:"stat-value",children:e.claudeGenerations})]}),(0,l.jsxs)("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-label",children:"OpenAI Generations"}),l.jsx("div",{className:"stat-value",children:e.openaiGenerations})]})]})]})]})]})}!function(){var e=Error("Cannot find module '../../../lib/presets/indieGamePresets'");throw e.code="MODULE_NOT_FOUND",e}();let A={provider:"claude",claudeModel:"claude-sonnet-3-5-20241022",openaiModel:"gpt-4",autoSave:!0,theme:"dark"};function M({onPreferencesChange:e}){let[t,r]=(0,c.useState)(A),[a,n]=(0,c.useState)(!1),s=t=>{r(t),localStorage.setItem("spark_user_preferences",JSON.stringify(t)),e(t)},i=e=>{s({...t,provider:e})},o=e=>{s({...t,claudeModel:e})},d=e=>{s({...t,openaiModel:e})},u=e=>{s({...t,autoSave:e})},p=e=>{s({...t,theme:e}),document.documentElement.setAttribute("data-theme",e)};return(0,l.jsxs)(l.Fragment,{children:[l.jsx("button",{onClick:()=>n(!a),className:"preferences-toggle","aria-label":"Open preferences",children:(0,l.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{d:"M17.5 10C17.5 10.75 17.45 11.48 17.36 12.18L15.18 13.05L14.05 15.18L12.18 17.36C11.48 17.45 10.75 17.5 10 17.5C9.25 17.5 8.52 17.45 7.82 17.36L5.95 15.18L4.82 13.05L2.64 12.18C2.55 11.48 2.5 10.75 2.5 10C2.5 9.25 2.55 8.52 2.64 7.82L4.82 6.95L5.95 4.82L7.82 2.64C8.52 2.55 9.25 2.5 10 2.5C10.75 2.5 11.48 2.55 12.18 2.64L14.05 4.82L15.18 6.95L17.36 7.82C17.45 8.52 17.5 9.25 17.5 10Z",stroke:"currentColor",strokeWidth:"2"})]})}),a&&(0,l.jsxs)("div",{className:"preferences-modal",children:[l.jsx("div",{className:"preferences-backdrop",onClick:()=>n(!1)}),(0,l.jsxs)("div",{className:"preferences-panel",children:[(0,l.jsxs)("div",{className:"preferences-header",children:[l.jsx("h2",{className:"preferences-title",children:"User Preferences"}),l.jsx("button",{onClick:()=>n(!1),className:"preferences-close",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"preferences-content",children:[(0,l.jsxs)("div",{className:"preference-group",children:[l.jsx("label",{className:"preference-label",children:"AI Provider"}),(0,l.jsxs)("select",{value:t.provider,onChange:e=>i(e.target.value),className:"preference-select",children:[l.jsx("option",{value:"claude",children:"Claude (Anthropic)"}),l.jsx("option",{value:"openai",children:"OpenAI"})]})]}),"claude"===t.provider&&(0,l.jsxs)("div",{className:"preference-group",children:[l.jsx("label",{className:"preference-label",children:"Claude Model"}),(0,l.jsxs)("select",{value:t.claudeModel,onChange:e=>o(e.target.value),className:"preference-select",children:[l.jsx("option",{value:"claude-sonnet-3-5-20241022",children:"Claude 3.5 Sonnet (Latest)"}),l.jsx("option",{value:"claude-3-5-sonnet-20240620",children:"Claude 3.5 Sonnet (June)"}),l.jsx("option",{value:"claude-3-haiku-20240307",children:"Claude 3 Haiku (Fast)"})]})]}),"openai"===t.provider&&(0,l.jsxs)("div",{className:"preference-group",children:[l.jsx("label",{className:"preference-label",children:"OpenAI Model"}),(0,l.jsxs)("select",{value:t.openaiModel,onChange:e=>d(e.target.value),className:"preference-select",children:[l.jsx("option",{value:"gpt-4",children:"GPT-4 (Best)"}),l.jsx("option",{value:"gpt-4-turbo-preview",children:"GPT-4 Turbo"}),l.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Fast)"})]})]}),l.jsx("div",{className:"preference-group",children:(0,l.jsxs)("label",{className:"preference-label",children:[l.jsx("input",{type:"checkbox",checked:t.autoSave,onChange:e=>u(e.target.checked),className:"preference-checkbox"}),"Auto-save generation history"]})}),(0,l.jsxs)("div",{className:"preference-group",children:[l.jsx("label",{className:"preference-label",children:"Theme"}),(0,l.jsxs)("select",{value:t.theme,onChange:e=>p(e.target.value),className:"preference-select",children:[l.jsx("option",{value:"dark",children:"Dark"}),l.jsx("option",{value:"light",children:"Light"})]})]})]})]})]})]})}let R=e=>new Promise(t=>setTimeout(t,e));class I{constructor(e){this.config=e,this.pool=new Map,this.maxConcurrent=10}async acquireSlot(e){let t=this.pool.get(e)||[];for(;t.length>=this.maxConcurrent;)await R(50);let r=new AbortController;return t.push(r),this.pool.set(e,t),()=>{let e=t.indexOf(r);e>=0&&t.splice(e,1)}}preflightCheck(e,t){if(this.config.maxPayloadBytes&&t>this.config.maxPayloadBytes)throw Error(`Payload too large: ${t} > ${this.config.maxPayloadBytes}`)}async call(e,t,r){let a;let n=JSON.stringify(t);this.preflightCheck(e,Buffer.byteLength(n,"utf8"));let s=await this.acquireSlot(e),i=new AbortController;r?.signal&&r.signal.addEventListener("abort",()=>i.abort());let o=0,l=this.config.maxRetries??3;for(;o<l;)try{let t=setTimeout(()=>i.abort(),this.config.timeoutMs??1e4),r=await fetch(`${this.config.baseUrl}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...this.config.token?{Authorization:`Bearer ${this.config.token}`}:{}},body:n,signal:i.signal});if(clearTimeout(t),!r.ok){let e=await r.text();throw Error(`HTTP ${r.status}: ${e}`)}return s(),await r.json()}catch(e){if("AbortError"===e.name)throw s(),e;if(a=e,++o<l){let e=100*Math.pow(2,o)+50*Math.random();await R(e)}}throw s(),a}}let D=new I({baseUrl:process.env.UNITY_MCP_URL||"http://localhost:8080/mcp",token:process.env.UNITY_MCP_TOKEN,timeoutMs:1e4,maxRetries:3,maxPayloadBytes:2e5});new I({baseUrl:process.env.CV_SERVICE_URL||"http://localhost:8081",token:process.env.CV_SERVICE_TOKEN,timeoutMs:3e4,maxRetries:2,maxPayloadBytes:1e7}),new I({baseUrl:process.env.ASR_SERVICE_URL||"http://localhost:8082",token:process.env.ASR_SERVICE_TOKEN,timeoutMs:6e4,maxRetries:2,maxPayloadBytes:5e7}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),a={};for(let e of r)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(n||(n={})),(s||(s={})).mergeShapes=(e,t)=>({...e,...t});let L=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$=e=>{switch(typeof e){case"undefined":return L.undefined;case"string":return L.string;case"number":return Number.isNaN(e)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":if(Array.isArray(e))return L.array;if(null===e)return L.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return L.promise;if("undefined"!=typeof Map&&e instanceof Map)return L.map;if("undefined"!=typeof Set&&e instanceof Set)return L.set;if("undefined"!=typeof Date&&e instanceof Date)return L.date;return L.object;default:return L.unknown}},U=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class F extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(e){if(!(e instanceof F))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}F.create=e=>new F(e);let Z=(e,t)=>{let r;switch(e.code){case U.invalid_type:r=e.received===L.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case U.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.jsonStringifyReplacer)}`;break;case U.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.joinValues(e.keys,", ")}`;break;case U.invalid_union:r="Invalid input";break;case U.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.joinValues(e.options)}`;break;case U.invalid_enum_value:r=`Invalid enum value. Expected ${n.joinValues(e.options)}, received '${e.received}'`;break;case U.invalid_arguments:r="Invalid function arguments";break;case U.invalid_return_type:r="Invalid function return type";break;case U.invalid_date:r="Invalid date";break;case U.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case U.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case U.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case U.custom:r="Invalid input";break;case U.invalid_intersection_types:r="Intersection results could not be merged";break;case U.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case U.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.assertNever(e)}return{message:r}};!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(i||(i={}));let V=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function B(e,t){let r=V({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Z,Z==Z?void 0:Z].filter(e=>!!e)});e.common.issues.push(r)}class G{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return q;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,a=await e.value;r.push({key:t,value:a})}return G.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return q;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let q=Object.freeze({status:"aborted"}),z=e=>({status:"dirty",value:e}),K=e=>({status:"valid",value:e}),H=e=>"aborted"===e.status,W=e=>"dirty"===e.status,J=e=>"valid"===e.status,X=e=>"undefined"!=typeof Promise&&e instanceof Promise;class Y{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let Q=(e,t)=>{if(J(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new F(e.common.issues);return this._error=t,this._error}}};function ee(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??a??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class et{get description(){return this._def.description}_getType(e){return $(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new G,ctx:{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(X(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Q(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return J(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>J(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},a=this._parse({data:e,path:r.path,parent:r});return Q(r,await (X(a)?a:Promise.resolve(a)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{let n=e(t),s=()=>a.addIssue({code:U.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new eH({schema:this,typeName:o.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eW.create(this,this._def)}nullable(){return eJ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eP.create(this)}promise(){return eK.create(this,this._def)}or(e){return eM.create([this,e],this._def)}and(e){return eD.create(this,e,this._def)}transform(e){return new eH({...ee(this._def),schema:this,typeName:o.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eX({...ee(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:o.ZodDefault})}brand(){return new e0({typeName:o.ZodBranded,type:this,...ee(this._def)})}catch(e){return new eY({...ee(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:o.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return e1.create(this,e)}readonly(){return e2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let er=/^c[^\s-]{8,}$/i,ea=/^[0-9a-z]+$/,en=/^[0-9A-HJKMNP-TV-Z]{26}$/i,es=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ei=/^[a-z0-9_-]{21}$/i,eo=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,el=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ec=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ed=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ep=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ef=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,em=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ev=RegExp(`^${eg}$`);function ey(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class e_ extends et{_parse(e){var t,r,s,i;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.string,received:t.parsedType}),q}let l=new G;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(B(o=this._getOrReturnCtx(e,o),{code:U.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(B(o=this._getOrReturnCtx(e,o),{code:U.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let t=e.data.length>c.value,r=e.data.length<c.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?B(o,{code:U.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):r&&B(o,{code:U.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)ec.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"email",code:U.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)a||(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:U.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)es.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:U.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)ei.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"nanoid",code:U.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)er.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:U.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)ea.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:U.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)en.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:U.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{B(o=this._getOrReturnCtx(e,o),{validation:"url",code:U.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"regex",code:U.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?(function(e){let t=`${eg}T${ey(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(c).test(e.data)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?ev.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${ey(c)}$`).test(e.data)||(B(o=this._getOrReturnCtx(e,o),{code:U.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?el.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"duration",code:U.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(t=e.data,("v4"===(r=c.version)||!r)&&ed.test(t)||("v6"===r||!r)&&ep.test(t)||(B(o=this._getOrReturnCtx(e,o),{validation:"ip",code:U.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,t){if(!eo.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(B(o=this._getOrReturnCtx(e,o),{validation:"jwt",code:U.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(s=e.data,("v4"===(i=c.version)||!i)&&eu.test(s)||("v6"===i||!i)&&eh.test(s)||(B(o=this._getOrReturnCtx(e,o),{validation:"cidr",code:U.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?ef.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"base64",code:U.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?em.test(e.data)||(B(o=this._getOrReturnCtx(e,o),{validation:"base64url",code:U.invalid_string,message:c.message}),l.dirty()):n.assertNever(c);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:U.invalid_string,...i.errToObj(r)})}_addCheck(e){return new e_({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...i.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...i.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...i.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...i.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...i.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...i.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...i.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...i.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...i.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i.errToObj(t)})}nonempty(e){return this.min(1,i.errToObj(e))}trim(){return new e_({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e_({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e_({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}e_.create=e=>new e_({checks:[],typeName:o.ZodString,coerce:e?.coerce??!1,...ee(e)});class ex extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.number,received:t.parsedType}),q}let r=new G;for(let a of this._def.checks)"int"===a.kind?n.isInteger(e.data)||(B(t=this._getOrReturnCtx(e,t),{code:U.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:U.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(B(t=this._getOrReturnCtx(e,t),{code:U.not_finite,message:a.message}),r.dirty()):n.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,r,a){return new ex({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.toString(a)}]})}_addCheck(e){return new ex({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ex.create=e=>new ex({checks:[],typeName:o.ZodNumber,coerce:e?.coerce||!1,...ee(e)});class eb extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==L.bigint)return this._getInvalidInput(e);let r=new G;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(B(t=this._getOrReturnCtx(e,t),{code:U.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):n.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.bigint,received:t.parsedType}),q}gte(e,t){return this.setLimit("min",e,!0,i.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.toString(t))}setLimit(e,t,r,a){return new eb({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.toString(a)}]})}_addCheck(e){return new eb({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eb.create=e=>new eb({checks:[],typeName:o.ZodBigInt,coerce:e?.coerce??!1,...ee(e)});class eN extends et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==L.boolean){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.boolean,received:t.parsedType}),q}return K(e.data)}}eN.create=e=>new eN({typeName:o.ZodBoolean,coerce:e?.coerce||!1,...ee(e)});class eS extends et{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.date,received:t.parsedType}),q}if(Number.isNaN(e.data.getTime()))return B(this._getOrReturnCtx(e),{code:U.invalid_date}),q;let r=new G;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(B(t=this._getOrReturnCtx(e,t),{code:U.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):n.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eS({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eS.create=e=>new eS({checks:[],coerce:e?.coerce||!1,typeName:o.ZodDate,...ee(e)});class ew extends et{_parse(e){if(this._getType(e)!==L.symbol){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.symbol,received:t.parsedType}),q}return K(e.data)}}ew.create=e=>new ew({typeName:o.ZodSymbol,...ee(e)});class ej extends et{_parse(e){if(this._getType(e)!==L.undefined){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.undefined,received:t.parsedType}),q}return K(e.data)}}ej.create=e=>new ej({typeName:o.ZodUndefined,...ee(e)});class eO extends et{_parse(e){if(this._getType(e)!==L.null){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.null,received:t.parsedType}),q}return K(e.data)}}eO.create=e=>new eO({typeName:o.ZodNull,...ee(e)});class eT extends et{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}eT.create=e=>new eT({typeName:o.ZodAny,...ee(e)});class ek extends et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}ek.create=e=>new ek({typeName:o.ZodUnknown,...ee(e)});class eC extends et{_parse(e){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.never,received:t.parsedType}),q}}eC.create=e=>new eC({typeName:o.ZodNever,...ee(e)});class eE extends et{_parse(e){if(this._getType(e)!==L.undefined){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.void,received:t.parsedType}),q}return K(e.data)}}eE.create=e=>new eE({typeName:o.ZodVoid,...ee(e)});class eP extends et{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==L.array)return B(t,{code:U.invalid_type,expected:L.array,received:t.parsedType}),q;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(B(t,{code:e?U.too_big:U.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(B(t,{code:U.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(B(t,{code:U.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new Y(t,e,t.path,r)))).then(e=>G.mergeArray(r,e));let n=[...t.data].map((e,r)=>a.type._parseSync(new Y(t,e,t.path,r)));return G.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new eP({...this._def,minLength:{value:e,message:i.toString(t)}})}max(e,t){return new eP({...this._def,maxLength:{value:e,message:i.toString(t)}})}length(e,t){return new eP({...this._def,exactLength:{value:e,message:i.toString(t)}})}nonempty(e){return this.min(1,e)}}eP.create=(e,t)=>new eP({type:e,minLength:null,maxLength:null,exactLength:null,typeName:o.ZodArray,...ee(t)});class eA extends et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=n.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==L.object){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.object,received:t.parsedType}),q}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof eC&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new Y(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof eC){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(B(r,{code:U.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new Y(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>G.mergeObjectSync(t,e)):G.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return i.errToObj,new eA({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let a=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:i.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new eA({...this._def,unknownKeys:"strip"})}passthrough(){return new eA({...this._def,unknownKeys:"passthrough"})}extend(e){return new eA({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eA({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:o.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eA({...this._def,catchall:e})}pick(e){let t={};for(let r of n.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new eA({...this._def,shape:()=>t})}omit(e){let t={};for(let r of n.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new eA({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof eA){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=eW.create(e(n))}return new eA({...t._def,shape:()=>r})}return t instanceof eP?new eP({...t._def,type:e(t.element)}):t instanceof eW?eW.create(e(t.unwrap())):t instanceof eJ?eJ.create(e(t.unwrap())):t instanceof eL?eL.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let r of n.objectKeys(this.shape)){let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}return new eA({...this._def,shape:()=>t})}required(e){let t={};for(let r of n.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eW;)e=e._def.innerType;t[r]=e}return new eA({...this._def,shape:()=>t})}keyof(){return eG(n.objectKeys(this.shape))}}eA.create=(e,t)=>new eA({shape:()=>e,unknownKeys:"strip",catchall:eC.create(),typeName:o.ZodObject,...ee(t)}),eA.strictCreate=(e,t)=>new eA({shape:()=>e,unknownKeys:"strict",catchall:eC.create(),typeName:o.ZodObject,...ee(t)}),eA.lazycreate=(e,t)=>new eA({shape:e,unknownKeys:"strip",catchall:eC.create(),typeName:o.ZodObject,...ee(t)});class eM extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new F(e.ctx.common.issues));return B(t,{code:U.invalid_union,unionErrors:r}),q});{let e;let a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new F(e));return B(t,{code:U.invalid_union,unionErrors:n}),q}}get options(){return this._def.options}}eM.create=(e,t)=>new eM({options:e,typeName:o.ZodUnion,...ee(t)});let eR=e=>{if(e instanceof eV)return eR(e.schema);if(e instanceof eH)return eR(e.innerType());if(e instanceof eB)return[e.value];if(e instanceof eq)return e.options;if(e instanceof ez)return n.objectValues(e.enum);if(e instanceof eX)return eR(e._def.innerType);if(e instanceof ej)return[void 0];else if(e instanceof eO)return[null];else if(e instanceof eW)return[void 0,...eR(e.unwrap())];else if(e instanceof eJ)return[null,...eR(e.unwrap())];else if(e instanceof e0)return eR(e.unwrap());else if(e instanceof e2)return eR(e.unwrap());else if(e instanceof eY)return eR(e._def.innerType);else return[]};class eI extends et{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==L.object)return B(t,{code:U.invalid_type,expected:L.object,received:t.parsedType}),q;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(B(t,{code:U.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),q)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=eR(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new eI({typeName:o.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...ee(r)})}}class eD extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(H(e)||H(a))return q;let s=function e(t,r){let a=$(t),s=$(r);if(t===r)return{valid:!0,data:t};if(a===L.object&&s===L.object){let a=n.objectKeys(r),s=n.objectKeys(t).filter(e=>-1!==a.indexOf(e)),i={...t,...r};for(let a of s){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};i[a]=n.data}return{valid:!0,data:i}}if(a===L.array&&s===L.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}return a===L.date&&s===L.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}(e.value,a.value);return s.valid?((W(e)||W(a))&&t.dirty(),{status:t.value,value:s.data}):(B(r,{code:U.invalid_intersection_types}),q)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eD.create=(e,t,r)=>new eD({left:e,right:t,typeName:o.ZodIntersection,...ee(r)});class eL extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.array)return B(r,{code:U.invalid_type,expected:L.array,received:r.parsedType}),q;if(r.data.length<this._def.items.length)return B(r,{code:U.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),q;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:U.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new Y(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>G.mergeArray(t,e)):G.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new eL({...this._def,rest:e})}}eL.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eL({items:e,typeName:o.ZodTuple,rest:null,...ee(t)})};class e$ extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.object)return B(r,{code:U.invalid_type,expected:L.object,received:r.parsedType}),q;let a=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new Y(r,e,r.path,e)),value:s._parse(new Y(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?G.mergeObjectAsync(t,a):G.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new e$(t instanceof et?{keyType:e,valueType:t,typeName:o.ZodRecord,...ee(r)}:{keyType:e_.create(),valueType:e,typeName:o.ZodRecord,...ee(t)})}}class eU extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.map)return B(r,{code:U.invalid_type,expected:L.map,received:r.parsedType}),q;let a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new Y(r,e,r.path,[s,"key"])),value:n._parse(new Y(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return q;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return q;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}eU.create=(e,t,r)=>new eU({valueType:t,keyType:e,typeName:o.ZodMap,...ee(r)});class eF extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.set)return B(r,{code:U.invalid_type,expected:L.set,received:r.parsedType}),q;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(B(r,{code:U.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(B(r,{code:U.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return q;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new Y(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new eF({...this._def,minSize:{value:e,message:i.toString(t)}})}max(e,t){return new eF({...this._def,maxSize:{value:e,message:i.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eF.create=(e,t)=>new eF({valueType:e,minSize:null,maxSize:null,typeName:o.ZodSet,...ee(t)});class eZ extends et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==L.function)return B(t,{code:U.invalid_type,expected:L.function,received:t.parsedType}),q;function r(e,r){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Z,Z].filter(e=>!!e),issueData:{code:U.invalid_arguments,argumentsError:r}})}function a(e,r){return V({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Z,Z].filter(e=>!!e),issueData:{code:U.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eK){let e=this;return K(async function(...t){let i=new F([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(a(l,e)),i})})}{let e=this;return K(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new F([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new F([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eZ({...this._def,args:eL.create(e).rest(ek.create())})}returns(e){return new eZ({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eZ({args:e||eL.create([]).rest(ek.create()),returns:t||ek.create(),typeName:o.ZodFunction,...ee(r)})}}class eV extends et{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eV.create=(e,t)=>new eV({getter:e,typeName:o.ZodLazy,...ee(t)});class eB extends et{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return B(t,{received:t.data,code:U.invalid_literal,expected:this._def.value}),q}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eG(e,t){return new eq({values:e,typeName:o.ZodEnum,...ee(t)})}eB.create=(e,t)=>new eB({value:e,typeName:o.ZodLiteral,...ee(t)});class eq extends et{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return B(t,{expected:n.joinValues(r),received:t.parsedType,code:U.invalid_type}),q}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return B(t,{received:t.data,code:U.invalid_enum_value,options:r}),q}return K(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eq.create(e,{...this._def,...t})}exclude(e,t=this._def){return eq.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eq.create=eG;class ez extends et{_parse(e){let t=n.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==L.string&&r.parsedType!==L.number){let e=n.objectValues(t);return B(r,{expected:n.joinValues(e),received:r.parsedType,code:U.invalid_type}),q}if(this._cache||(this._cache=new Set(n.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=n.objectValues(t);return B(r,{received:r.data,code:U.invalid_enum_value,options:e}),q}return K(e.data)}get enum(){return this._def.values}}ez.create=(e,t)=>new ez({values:e,typeName:o.ZodNativeEnum,...ee(t)});class eK extends et{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==L.promise&&!1===t.common.async?(B(t,{code:U.invalid_type,expected:L.promise,received:t.parsedType}),q):K((t.parsedType===L.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eK.create=(e,t)=>new eK({type:e,typeName:o.ZodPromise,...ee(t)});class eH extends et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===o.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:e=>{B(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),"preprocess"===a.type){let e=a.transform(r.data,s);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return q;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?q:"dirty"===a.status||"dirty"===t.value?z(a.value):a});{if("aborted"===t.value)return q;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?q:"dirty"===a.status||"dirty"===t.value?z(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,s);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?q:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?q:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>J(e)?Promise.resolve(a.transform(e.value,s)).then(e=>({status:t.value,value:e})):q);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!J(e))return q;let n=a.transform(e.value,s);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}}n.assertNever(a)}}eH.create=(e,t,r)=>new eH({schema:e,typeName:o.ZodEffects,effect:t,...ee(r)}),eH.createWithPreprocess=(e,t,r)=>new eH({schema:t,effect:{type:"preprocess",transform:e},typeName:o.ZodEffects,...ee(r)});class eW extends et{_parse(e){return this._getType(e)===L.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eW.create=(e,t)=>new eW({innerType:e,typeName:o.ZodOptional,...ee(t)});class eJ extends et{_parse(e){return this._getType(e)===L.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eJ.create=(e,t)=>new eJ({innerType:e,typeName:o.ZodNullable,...ee(t)});class eX extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===L.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eX.create=(e,t)=>new eX({innerType:e,typeName:o.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ee(t)});class eY extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return X(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new F(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new F(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eY.create=(e,t)=>new eY({innerType:e,typeName:o.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ee(t)});class eQ extends et{_parse(e){if(this._getType(e)!==L.nan){let t=this._getOrReturnCtx(e);return B(t,{code:U.invalid_type,expected:L.nan,received:t.parsedType}),q}return{status:"valid",value:e.data}}}eQ.create=e=>new eQ({typeName:o.ZodNaN,...ee(e)}),Symbol("zod_brand");class e0 extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class e1 extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?q:"dirty"===e.status?(t.dirty(),z(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?q:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new e1({in:e,out:t,typeName:o.ZodPipeline})}}class e2 extends et{_parse(e){let t=this._def.innerType._parse(e),r=e=>(J(e)&&(e.value=Object.freeze(e.value)),e);return X(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}e2.create=(e,t)=>new e2({innerType:e,typeName:o.ZodReadonly,...ee(t)}),eA.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(o||(o={}));let e4=e_.create,e9=ex.create;eQ.create,eb.create;let e5=eN.create;eS.create,ew.create,ej.create,eO.create,eT.create,ek.create,eC.create,eE.create,eP.create;let e6=eA.create;eA.strictCreate,eM.create,eI.create,eD.create,eL.create,e$.create,eU.create,eF.create,eZ.create,eV.create,eB.create,eq.create,ez.create,eK.create,eH.create,eW.create,eJ.create,eH.createWithPreprocess,e1.create;let e3=e4().regex(/^Assets\//,"path must be under Assets/"),e7=e6({name:e4().min(1).max(100),code:e4().min(1).max(2e5),path:e3.optional()});async function e8(e){let t=e7.parse(e),r=t.path||`Assets/Scripts/${t.name}.cs`;return D.call("/tools/create_or_update_file",{path:r,content:t.code})}e6({path:e3,patch:e4().min(1).max(2e5)}),e6({scenePath:e3.optional(),gameObject:e4().optional(),width:e9().int().positive().max(4096).optional(),height:e9().int().positive().max(4096).optional()}),e6({path:e3}),e6({path:e3}),e6({target:e4().min(1),development:e5().optional()}),e6({jobId:e4().uuid()});class te{constructor(e,t=50){this.stack=[],this.sessionId=e,this.maxSize=t,this.loadFromStorage()}push(e){let t=`patch-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,r={...e,id:t,timestamp:Date.now()};return this.stack.push(r),this.stack.length>this.maxSize&&this.stack.shift(),this.saveToStorage(),t}pop(){let e=this.stack.pop();return e&&this.saveToStorage(),e||null}peek(){return this.stack[this.stack.length-1]||null}getAll(){return[...this.stack]}getById(e){return this.stack.find(t=>t.id===e)||null}rollbackTo(e){let t=this.stack.findIndex(t=>t.id===e);if(t<0)return[];let r=this.stack.splice(t+1);return this.saveToStorage(),r}clear(){this.stack=[],this.saveToStorage()}size(){return this.stack.length}isEmpty(){return 0===this.stack.length}getByPath(e){return this.stack.filter(t=>t.path===e)}getByTimeRange(e,t){return this.stack.filter(r=>r.timestamp>=e&&r.timestamp<=t)}saveToStorage(){}loadFromStorage(){}exportJson(){return JSON.stringify(this.stack,null,2)}importJson(e){try{let t=JSON.parse(e);Array.isArray(t)&&(this.stack=t,this.saveToStorage())}catch(e){console.error("Failed to import patch stack:",e)}}}let tt=new Map;function tr(){let[e,t]=(0,c.useState)(""),[r,a]=(0,c.useState)(""),[n,s]=(0,c.useState)(""),[i,o]=(0,c.useState)("chat"),d=async t=>{for(let r of t.scripts)try{await e8({name:r.name,code:r.content,path:r.path}),(tt.has(e)||tt.set(e,new te(e)),tt.get(e)).push({type:"generate_script",path:r.path,after:r.content,metadata:{preset:t.id,scriptName:r.name}})}catch(e){throw console.error(`Failed to generate ${r.name}:`,e),e}},u=async e=>{},p=async e=>{};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:(0,l.jsxs)("div",{className:"max-w-[1920px] mx-auto p-6",children:[l.jsx("header",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"SPARK"}),l.jsx("p",{className:"text-gray-400",children:"AI-Powered Unity Game Development Assistant"})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-600 font-mono",children:["Session: ",e.slice(0,16),"..."]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,l.jsxs)("div",{className:"col-span-8 space-y-6",children:[(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl",children:[l.jsx("div",{className:"border-b border-gray-700",children:(0,l.jsxs)("nav",{className:"flex",children:[l.jsx("button",{onClick:()=>o("chat"),className:`px-6 py-4 text-sm font-medium transition-colors ${"chat"===i?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"AI Chat"}),l.jsx("button",{onClick:()=>o("presets"),className:`px-6 py-4 text-sm font-medium transition-colors ${"presets"===i?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"Quick Presets"}),l.jsx("button",{onClick:()=>o("history"),className:`px-6 py-4 text-sm font-medium transition-colors ${"history"===i?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"History"}),l.jsx("button",{onClick:()=>o("settings"),className:`px-6 py-4 text-sm font-medium transition-colors ${"settings"===i?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"Settings"})]})}),(0,l.jsxs)("div",{className:"p-6",children:["chat"===i&&l.jsx(m,{onCodeGenerated:(e,t)=>{a(e),s(t)}}),"presets"===i&&l.jsx(C,{sessionId:e,onApplyPreset:d}),"history"===i&&l.jsx(E,{onSelectHistory:()=>{}}),"settings"===i&&l.jsx(M,{onPreferencesChange:()=>{}})]})]}),(0,l.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Unity Preview"}),l.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden",children:l.jsx(g,{sessionId:e,onFrameUpdate:e=>console.log("Frame:",e)})})]})]}),(0,l.jsxs)("div",{className:"col-span-4 space-y-6",children:[l.jsx(b,{sessionId:e,maxOperations:10}),l.jsx(j,{sessionId:e,onUndo:u,onRollbackTo:p}),l.jsx(P,{})]})]}),(0,l.jsxs)("footer",{className:"mt-12 pt-6 border-t border-gray-700 text-center text-xs text-gray-600",children:[l.jsx("p",{children:"SPARK v1.0.0 | Unity MCP Integration | Powered by Claude & OpenAI"}),(0,l.jsxs)("p",{className:"mt-2",children:["Status:"," ",l.jsx("span",{className:"text-green-400",children:"● Connected"})]})]})]})})}},85723:(e,t)=>{"use strict";function r(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`)}}Object.defineProperty(t,"h",{enumerable:!0,get:function(){return r}})},27745:(e,t,r)=>{"use strict";Object.defineProperty(t,"j",{enumerable:!0,get:function(){return n}});let a=r(96012);function n(e,t){return(0,a.registerServerReference)(t,e,null)}},98601:e=>{(()=>{"use strict";var t={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let a=r(223),n=r(172),s=r(930),i="context",o=new a.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,n.registerGlobal)(i,e,s.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...a){return this._getContextManager().with(e,t,r,...a)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,n.getGlobal)(i)||o}disable(){this._getContextManager().disable(),(0,n.unregisterGlobal)(i,s.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let a=r(56),n=r(912),s=r(957),i=r(172);class o{constructor(){function e(e){return function(...t){let r=(0,i.getGlobal)("diag");if(r)return r[e](...t)}}let t=this;t.setLogger=(e,r={logLevel:s.DiagLogLevel.INFO})=>{var a,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(a=e.stack)&&void 0!==a?a:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,i.getGlobal)("diag"),d=(0,n.createLogLevelDiagLogger)(null!==(o=r.logLevel)&&void 0!==o?o:s.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!==(l=Error().stack)&&void 0!==l?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),d.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)("diag",d,t,!0)},t.disable=()=>{(0,i.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new a.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new o),this._instance}}t.DiagAPI=o},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let a=r(660),n=r(172),s=r(930),i="metrics";class o{constructor(){}static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,n.registerGlobal)(i,e,s.DiagAPI.instance())}getMeterProvider(){return(0,n.getGlobal)(i)||a.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,n.unregisterGlobal)(i,s.DiagAPI.instance())}}t.MetricsAPI=o},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let a=r(172),n=r(874),s=r(194),i=r(277),o=r(369),l=r(930),c="propagation",d=new n.NoopTextMapPropagator;class u{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.getActiveBaggage=i.getActiveBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalPropagator(e){return(0,a.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=s.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=s.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,a.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,a.getGlobal)(c)||d}}t.PropagationAPI=u},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let a=r(172),n=r(846),s=r(139),i=r(607),o=r(930),l="trace";class c{constructor(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=s.wrapSpanContext,this.isSpanContextValid=s.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,a.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,a.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,a.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let a=r(491),n=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function s(e){return e.getValue(n)||void 0}t.getBaggage=s,t.getActiveBaggage=function(){return s(a.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(n,t)},t.deleteBaggage=function(e){return e.deleteValue(n)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let a=new r(this._entries);return a._entries.set(e,t),a}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let a=r(930),n=r(993),s=r(830),i=a.DiagAPI.instance();t.createBaggage=function(e={}){return new n.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:s.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let a=r(491);t.context=a.ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let a=r(780);class n{active(){return a.ROOT_CONTEXT}with(e,t,r,...a){return t.call(r,...a)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=n},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,a)=>{let n=new r(t._currentContext);return n._currentContext.set(e,a),n},t.deleteValue=e=>{let a=new r(t._currentContext);return a._currentContext.delete(e),a}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let a=r(930);t.diag=a.DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let a=r(172);class n{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return s("debug",this._namespace,e)}error(...e){return s("error",this._namespace,e)}info(...e){return s("info",this._namespace,e)}warn(...e){return s("warn",this._namespace,e)}verbose(...e){return s("verbose",this._namespace,e)}}function s(e,t,r){let n=(0,a.getGlobal)("diag");if(n)return r.unshift(t),n[e](...r)}t.DiagComponentLogger=n},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class a{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}t.DiagConsoleLogger=a},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let a=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,a){let n=t[r];return"function"==typeof n&&e>=a?n.bind(t):function(){}}return e<a.DiagLogLevel.NONE?e=a.DiagLogLevel.NONE:e>a.DiagLogLevel.ALL&&(e=a.DiagLogLevel.ALL),t=t||{},{error:r("error",a.DiagLogLevel.ERROR),warn:r("warn",a.DiagLogLevel.WARN),info:r("info",a.DiagLogLevel.INFO),debug:r("debug",a.DiagLogLevel.DEBUG),verbose:r("verbose",a.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let a=r(200),n=r(521),s=r(130),i=n.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${i}`),l=a._globalThis;t.registerGlobal=function(e,t,r,a=!1){var s;let i=l[o]=null!==(s=l[o])&&void 0!==s?s:{version:n.VERSION};if(!a&&i[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(i.version!==n.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${n.VERSION}`);return r.error(t.stack||t.message),!1}return i[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${n.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let a=null===(t=l[o])||void 0===t?void 0:t.version;if(a&&(0,s.isCompatible)(a))return null===(r=l[o])||void 0===r?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${n.VERSION}.`);let r=l[o];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let a=r(521),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function s(e){let t=new Set([e]),r=new Set,a=e.match(n);if(!a)return()=>!1;let s={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(null!=s.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let a=e.match(n);if(!a)return i(e);let o={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};return null!=o.prerelease||s.major!==o.major?i(e):0===s.major?s.minor===o.minor&&s.patch<=o.patch?(t.add(e),!0):i(e):s.minor<=o.minor?(t.add(e),!0):i(e)}}t._makeCompatibilityCheck=s,t.isCompatible=s(a.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let a=r(653);t.metrics=a.MetricsAPI.getInstance()},901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class a{}t.NoopMetric=a;class n extends a{add(e,t){}}t.NoopCounterMetric=n;class s extends a{add(e,t){}}t.NoopUpDownCounterMetric=s;class i extends a{record(e,t){}}t.NoopHistogramMetric=i;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class c extends o{}t.NoopObservableGaugeMetric=c;class d extends o{}t.NoopObservableUpDownCounterMetric=d,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new n,t.NOOP_HISTOGRAM_METRIC=new i,t.NOOP_UP_DOWN_COUNTER_METRIC=new s,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new d,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let a=r(102);class n{getMeter(e,t,r){return a.NOOP_METER}}t.NoopMeterProvider=n,t.NOOP_METER_PROVIDER=new n},200:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:global},46:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let a=r(181);t.propagation=a.PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class r{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=r},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let a=r(997);t.trace=a.TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let a=r(476);class n{constructor(e=a.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=n},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let a=r(491),n=r(607),s=r(403),i=r(139),o=a.ContextAPI.getInstance();class l{startSpan(e,t,r=o.active()){if(null==t?void 0:t.root)return new s.NonRecordingSpan;let a=r&&(0,n.getSpanContext)(r);return"object"==typeof a&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags&&(0,i.isSpanContextValid)(a)?new s.NonRecordingSpan(a):new s.NonRecordingSpan}startActiveSpan(e,t,r,a){let s,i,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(s=t,l=r):(s=t,i=r,l=a);let c=null!=i?i:o.active(),d=this.startSpan(e,s,c),u=(0,n.setSpan)(c,d);return o.with(u,l,void 0,d)}}t.NoopTracer=l},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let a=r(614);class n{getTracer(e,t,r){return new a.NoopTracer}}t.NoopTracerProvider=n},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let a=new(r(614)).NoopTracer;class n{constructor(e,t,r,a){this._provider=e,this.name=t,this.version=r,this.options=a}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,a){let n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):a}}t.ProxyTracer=n},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let a=r(125),n=new(r(124)).NoopTracerProvider;class s{getTracer(e,t,r){var n;return null!==(n=this.getDelegateTracer(e,t,r))&&void 0!==n?n:new a.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:n}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var a;return null===(a=this._delegate)||void 0===a?void 0:a.getTracer(e,t,r)}}t.ProxyTracerProvider=s},996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let a=r(780),n=r(403),s=r(491),i=(0,a.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(i)||void 0}function l(e,t){return e.setValue(i,t)}t.getSpan=o,t.getActiveSpan=function(){return o(s.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(i)},t.setSpanContext=function(e,t){return l(e,new n.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let a=r(564);class n{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),n=r.indexOf("=");if(-1!==n){let s=r.slice(0,n),i=r.slice(n+1,t.length);(0,a.validateKey)(s)&&(0,a.validateValue)(i)&&e.set(s,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new n;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=n},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",a=`[a-z]${r}{0,255}`,n=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,s=RegExp(`^(?:${a}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return s.test(e)},t.validateValue=function(e){return i.test(e)&&!o.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let a=r(325);t.createTraceState=function(e){return new a.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let a=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:a.TraceFlags.NONE}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let a=r(476),n=r(403),s=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return s.test(e)&&e!==a.INVALID_TRACEID}function l(e){return i.test(e)&&e!==a.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new n.NonRecordingSpan(e)}},847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}},i=!0;try{t[e].call(s.exports,s,s.exports,a),i=!1}finally{i&&delete r[e]}return s.exports}a.ab=__dirname+"/";var n={};(()=>{Object.defineProperty(n,"__esModule",{value:!0}),n.trace=n.propagation=n.metrics=n.diag=n.context=n.INVALID_SPAN_CONTEXT=n.INVALID_TRACEID=n.INVALID_SPANID=n.isValidSpanId=n.isValidTraceId=n.isSpanContextValid=n.createTraceState=n.TraceFlags=n.SpanStatusCode=n.SpanKind=n.SamplingDecision=n.ProxyTracerProvider=n.ProxyTracer=n.defaultTextMapSetter=n.defaultTextMapGetter=n.ValueType=n.createNoopMeter=n.DiagLogLevel=n.DiagConsoleLogger=n.ROOT_CONTEXT=n.createContextKey=n.baggageEntryMetadataFromString=void 0;var e=a(369);Object.defineProperty(n,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=a(780);Object.defineProperty(n,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(n,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=a(972);Object.defineProperty(n,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var s=a(957);Object.defineProperty(n,"DiagLogLevel",{enumerable:!0,get:function(){return s.DiagLogLevel}});var i=a(102);Object.defineProperty(n,"createNoopMeter",{enumerable:!0,get:function(){return i.createNoopMeter}});var o=a(901);Object.defineProperty(n,"ValueType",{enumerable:!0,get:function(){return o.ValueType}});var l=a(194);Object.defineProperty(n,"defaultTextMapGetter",{enumerable:!0,get:function(){return l.defaultTextMapGetter}}),Object.defineProperty(n,"defaultTextMapSetter",{enumerable:!0,get:function(){return l.defaultTextMapSetter}});var c=a(125);Object.defineProperty(n,"ProxyTracer",{enumerable:!0,get:function(){return c.ProxyTracer}});var d=a(846);Object.defineProperty(n,"ProxyTracerProvider",{enumerable:!0,get:function(){return d.ProxyTracerProvider}});var u=a(996);Object.defineProperty(n,"SamplingDecision",{enumerable:!0,get:function(){return u.SamplingDecision}});var p=a(357);Object.defineProperty(n,"SpanKind",{enumerable:!0,get:function(){return p.SpanKind}});var h=a(847);Object.defineProperty(n,"SpanStatusCode",{enumerable:!0,get:function(){return h.SpanStatusCode}});var f=a(475);Object.defineProperty(n,"TraceFlags",{enumerable:!0,get:function(){return f.TraceFlags}});var m=a(98);Object.defineProperty(n,"createTraceState",{enumerable:!0,get:function(){return m.createTraceState}});var g=a(139);Object.defineProperty(n,"isSpanContextValid",{enumerable:!0,get:function(){return g.isSpanContextValid}}),Object.defineProperty(n,"isValidTraceId",{enumerable:!0,get:function(){return g.isValidTraceId}}),Object.defineProperty(n,"isValidSpanId",{enumerable:!0,get:function(){return g.isValidSpanId}});var v=a(476);Object.defineProperty(n,"INVALID_SPANID",{enumerable:!0,get:function(){return v.INVALID_SPANID}}),Object.defineProperty(n,"INVALID_TRACEID",{enumerable:!0,get:function(){return v.INVALID_TRACEID}}),Object.defineProperty(n,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return v.INVALID_SPAN_CONTEXT}});let y=a(67);Object.defineProperty(n,"context",{enumerable:!0,get:function(){return y.context}});let _=a(506);Object.defineProperty(n,"diag",{enumerable:!0,get:function(){return _.diag}});let x=a(886);Object.defineProperty(n,"metrics",{enumerable:!0,get:function(){return x.metrics}});let b=a(939);Object.defineProperty(n,"propagation",{enumerable:!0,get:function(){return b.propagation}});let N=a(845);Object.defineProperty(n,"trace",{enumerable:!0,get:function(){return N.trace}}),n.default={context:y.context,diag:_.diag,metrics:x.metrics,propagation:b.propagation,trace:N.trace}})(),e.exports=n})()},10189:(e,t,r)=>{"use strict";var a=r(49634),n={stream:!0},s=new Map;function i(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function o(){}var l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Dispatcher,c=Symbol.for("react.element"),d=Symbol.for("react.lazy"),u=Symbol.iterator,p=Array.isArray,h=Object.getPrototypeOf,f=Object.prototype,m=new WeakMap;function g(e,t,r,a){var n=1,s=0,i=null;e=JSON.stringify(e,function e(o,l){if(null===l)return null;if("object"==typeof l){if("function"==typeof l.then){null===i&&(i=new FormData),s++;var c,d,g=n++;return l.then(function(a){a=JSON.stringify(a,e);var n=i;n.append(t+g,a),0==--s&&r(n)},function(e){a(e)}),"$@"+g.toString(16)}if(p(l))return l;if(l instanceof FormData){null===i&&(i=new FormData);var v=i,y=t+(o=n++)+"_";return l.forEach(function(e,t){v.append(y+t,e)}),"$K"+o.toString(16)}if(l instanceof Map)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=n++,i.append(t+o,l),"$Q"+o.toString(16);if(l instanceof Set)return l=JSON.stringify(Array.from(l),e),null===i&&(i=new FormData),o=n++,i.append(t+o,l),"$W"+o.toString(16);if(null===(d=l)||"object"!=typeof d?null:"function"==typeof(d=u&&d[u]||d["@@iterator"])?d:null)return Array.from(l);if((o=h(l))!==f&&(null===o||null!==h(o)))throw Error("Only plain objects, and a few built-ins, can be passed to Server Actions. Classes or null prototypes are not supported.");return l}if("string"==typeof l)return"Z"===l[l.length-1]&&this[o]instanceof Date?"$D"+l:l="$"===l[0]?"$"+l:l;if("boolean"==typeof l)return l;if("number"==typeof l)return Number.isFinite(c=l)?0===c&&-1/0==1/c?"$-0":c:1/0===c?"$Infinity":-1/0===c?"$-Infinity":"$NaN";if(void 0===l)return"$undefined";if("function"==typeof l){if(void 0!==(l=m.get(l)))return l=JSON.stringify(l,e),null===i&&(i=new FormData),o=n++,i.set(t+o,l),"$F"+o.toString(16);throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof l){if(Symbol.for(o=l.description)!==l)throw Error("Only global symbols received from Symbol.for(...) can be passed to Server Functions. The symbol Symbol.for("+l.description+") cannot be found among global symbols.");return"$S"+o}if("bigint"==typeof l)return"$n"+l.toString(10);throw Error("Type "+typeof l+" is not supported as an argument to a Server Function.")}),null===i?r(e):(i.set(t+"0",e),0===s&&r(i))}var v=new WeakMap;function y(e){var t=m.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=v.get(t))||(a=t,i=new Promise(function(e,t){n=e,s=t}),g(a,"",function(e){if("string"==typeof e){var t=new FormData;t.append("0",e),e=t}i.status="fulfilled",i.value=e,n(e)},function(e){i.status="rejected",i.reason=e,s(e)}),r=i,v.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var a,n,s,i,o=new FormData;t.forEach(function(t,r){o.append("$ACTION_"+e+":"+r,t)}),r=o,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function _(e,t){var r=m.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var a=r.bound;if(null===a)return 0===t;switch(a.status){case"fulfilled":return a.value.length===t;case"pending":throw a;case"rejected":throw a.reason;default:throw"string"!=typeof a.status&&(a.status="pending",a.then(function(e){a.status="fulfilled",a.value=e},function(e){a.status="rejected",a.reason=e})),a}}function x(e,t,r){Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===r?y:function(){var e=m.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),r(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:_},bind:{value:S}}),m.set(e,t)}var b=Function.prototype.bind,N=Array.prototype.slice;function S(){var e=b.apply(this,arguments),t=m.get(this);if(t){var r=N.call(arguments,1),a=null;a=null!==t.bound?Promise.resolve(t.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),Object.defineProperties(e,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:_},bind:{value:S}}),m.set(e,{id:t.id,bound:a})}return e}function w(e,t,r,a){this.status=e,this.value=t,this.reason=r,this._response=a}function j(e){switch(e.status){case"resolved_model":A(e);break;case"resolved_module":M(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":throw e;default:throw e.reason}}function O(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function T(e,t,r){switch(e.status){case"fulfilled":O(t,e.value);break;case"pending":case"blocked":case"cyclic":e.value=t,e.reason=r;break;case"rejected":r&&O(r,e.reason)}}function k(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.reason;e.status="rejected",e.reason=t,null!==r&&O(r,t)}}function C(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,a=e.reason;e.status="resolved_module",e.value=t,null!==r&&(M(e),T(e,r,a))}}w.prototype=Object.create(Promise.prototype),w.prototype.then=function(e,t){switch(this.status){case"resolved_model":A(this);break;case"resolved_module":M(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":case"cyclic":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t(this.reason)}};var E=null,P=null;function A(e){var t=E,r=P;E=e,P=null;var a=e.value;e.status="cyclic",e.value=null,e.reason=null;try{var n=JSON.parse(a,e._response._fromJSON);if(null!==P&&0<P.deps)P.value=n,e.status="blocked",e.value=null,e.reason=null;else{var s=e.value;e.status="fulfilled",e.value=n,null!==s&&O(s,n)}}catch(t){e.status="rejected",e.reason=t}finally{E=t,P=r}}function M(e){try{var t=e.value,r=globalThis.__next_require__(t[0]);if(4===t.length&&"function"==typeof r.then){if("fulfilled"===r.status)r=r.value;else throw r.reason}var a="*"===t[2]?r:""===t[2]?r.__esModule?r.default:r:r[t[2]];e.status="fulfilled",e.value=a}catch(t){e.status="rejected",e.reason=t}}function R(e,t){e._chunks.forEach(function(e){"pending"===e.status&&k(e,t)})}function I(e,t){var r=e._chunks,a=r.get(t);return a||(a=new w("pending",null,null,e),r.set(t,a)),a}function D(e,t){if("resolved_model"===(e=I(e,t)).status&&A(e),"fulfilled"===e.status)return e.value;throw e.reason}function L(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function $(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function U(e){var t,r=e.ssrManifest.moduleMap;return(r={_bundlerConfig:r,_moduleLoading:e.ssrManifest.moduleLoading,_callServer:void 0!==$?$:L,_encodeFormAction:e.encodeFormAction,_nonce:e="string"==typeof e.nonce?e.nonce:void 0,_chunks:new Map,_stringDecoder:new TextDecoder,_fromJSON:null,_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]})._fromJSON=(t=r,function(e,r){return"string"==typeof r?function(e,t,r,a){if("$"===a[0]){if("$"===a)return c;switch(a[1]){case"$":return a.slice(1);case"L":return{$$typeof:d,_payload:e=I(e,t=parseInt(a.slice(2),16)),_init:j};case"@":if(2===a.length)return new Promise(function(){});return I(e,t=parseInt(a.slice(2),16));case"S":return Symbol.for(a.slice(2));case"F":return t=D(e,t=parseInt(a.slice(2),16)),function(e,t){function r(){var e=Array.prototype.slice.call(arguments),r=t.bound;return r?"fulfilled"===r.status?a(t.id,r.value.concat(e)):Promise.resolve(r).then(function(r){return a(t.id,r.concat(e))}):a(t.id,e)}var a=e._callServer;return x(r,t,e._encodeFormAction),r}(e,t);case"Q":return new Map(e=D(e,t=parseInt(a.slice(2),16)));case"W":return new Set(e=D(e,t=parseInt(a.slice(2),16)));case"I":return 1/0;case"-":return"$-0"===a?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(a.slice(2)));case"n":return BigInt(a.slice(2));default:switch((e=I(e,a=parseInt(a.slice(1),16))).status){case"resolved_model":A(e);break;case"resolved_module":M(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":case"cyclic":var n;return a=E,e.then(function(e,t,r,a){if(P){var n=P;a||n.deps++}else n=P={deps:a?0:1,value:null};return function(a){t[r]=a,n.deps--,0===n.deps&&"blocked"===e.status&&(a=e.value,e.status="fulfilled",e.value=n.value,null!==a&&O(a,n.value))}}(a,t,r,"cyclic"===e.status),(n=a,function(e){return k(n,e)})),null;default:throw e.reason}}}return a}(t,this,e,r):"object"==typeof r&&null!==r?e=r[0]===c?{$$typeof:c,type:r[1],key:r[2],ref:null,props:r[3],_owner:null}:r:r}),r}function F(e,t){function a(t){R(e,t)}var c=t.getReader();c.read().then(function t(d){var u=d.value;if(d.done)R(e,Error("Connection closed."));else{var p=0,h=e._rowState,f=e._rowID,m=e._rowTag,g=e._rowLength;d=e._buffer;for(var v=u.length;p<v;){var y=-1;switch(h){case 0:58===(y=u[p++])?h=1:f=f<<4|(96<y?y-87:y-48);continue;case 1:84===(h=u[p])?(m=h,h=2,p++):64<h&&91>h?(m=h,h=3,p++):(m=0,h=3);continue;case 2:44===(y=u[p++])?h=4:g=g<<4|(96<y?y-87:y-48);continue;case 3:y=u.indexOf(10,p);break;case 4:(y=p+g)>u.length&&(y=-1)}var _=u.byteOffset+p;if(-1<y){p=new Uint8Array(u.buffer,_,y-p),g=e,_=m;var x=g._stringDecoder;m="";for(var b=0;b<d.length;b++)m+=x.decode(d[b],n);switch(m+=x.decode(p),_){case 73:!function(e,t,a){var n=e._chunks,c=n.get(t);a=JSON.parse(a,e._fromJSON);var d=function(e,t){if(e){var r=e[t[0]];if(e=r[t[2]])r=e.name;else{if(!(e=r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React SSR Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}(e._bundlerConfig,a);if(function(e,t,r){if(null!==e)for(var a=1;a<t.length;a+=2){var n=l.current;if(n){var s=n.preinitScript,i=e.prefix+t[a],o=e.crossOrigin;o="string"==typeof o?"use-credentials"===o?o:"":void 0,s.call(n,i,{crossOrigin:o,nonce:r})}}}(e._moduleLoading,a[1],e._nonce),a=function(e){for(var t=e[1],a=[],n=0;n<t.length;){var l=t[n++];t[n++];var c=s.get(l);if(void 0===c){c=r.e(l),a.push(c);var d=s.set.bind(s,l,null);c.then(d,o),s.set(l,c)}else null!==c&&a.push(c)}return 4===e.length?0===a.length?i(e[0]):Promise.all(a).then(function(){return i(e[0])}):0<a.length?Promise.all(a):null}(d)){if(c){var u=c;u.status="blocked"}else u=new w("blocked",null,null,e),n.set(t,u);a.then(function(){return C(u,d)},function(e){return k(u,e)})}else c?C(c,d):n.set(t,new w("resolved_module",d,null,e))}(g,f,m);break;case 72:if(f=m[0],g=JSON.parse(m=m.slice(1),g._fromJSON),m=l.current)switch(f){case"D":m.prefetchDNS(g);break;case"C":"string"==typeof g?m.preconnect(g):m.preconnect(g[0],g[1]);break;case"L":f=g[0],p=g[1],3===g.length?m.preload(f,p,g[2]):m.preload(f,p);break;case"m":"string"==typeof g?m.preloadModule(g):m.preloadModule(g[0],g[1]);break;case"S":"string"==typeof g?m.preinitStyle(g):m.preinitStyle(g[0],0===g[1]?void 0:g[1],3===g.length?g[2]:void 0);break;case"X":"string"==typeof g?m.preinitScript(g):m.preinitScript(g[0],g[1]);break;case"M":"string"==typeof g?m.preinitModuleScript(g):m.preinitModuleScript(g[0],g[1])}break;case 69:p=(m=JSON.parse(m)).digest,(m=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.")).stack="Error: "+m.message,m.digest=p,(_=(p=g._chunks).get(f))?k(_,m):p.set(f,new w("rejected",null,m,g));break;case 84:g._chunks.set(f,new w("fulfilled",m,null,g));break;case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");default:(_=(p=g._chunks).get(f))?(g=_,f=m,"pending"===g.status&&(m=g.value,p=g.reason,g.status="resolved_model",g.value=f,null!==m&&(A(g),T(g,m,p)))):p.set(f,new w("resolved_model",m,null,g))}p=y,3===h&&p++,g=f=m=h=0,d.length=0}else{u=new Uint8Array(u.buffer,_,u.byteLength-p),d.push(u),g-=u.byteLength;break}}return e._rowState=h,e._rowID=f,e._rowTag=m,e._rowLength=g,c.read().then(t).catch(a)}}).catch(a)}t.createFromFetch=function(e,t){var r=U(t);return e.then(function(e){F(r,e.body)},function(e){R(r,e)}),I(r,0)},t.createFromReadableStream=function(e,t){return F(t=U(t),e),I(t,0)},t.createServerReference=function(e){return function(e,t,r){function a(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return x(a,{id:e,bound:null},r),a}(e,$)},t.encodeReply=function(e){return new Promise(function(t,r){g(e,"",t,r)})}},85668:(e,t,r)=>{"use strict";e.exports=r(10189)},83204:()=>{},808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return r}});class r{constructor(){let e,t;this.promise=new Promise((r,a)=>{e=r,t=a}),this.resolve=e,this.reject=t}}},89061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{atLeastOneTask:function(){return n},scheduleImmediate:function(){return a},scheduleOnNextTick:function(){return r}});let r=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},a=e=>{setImmediate(e)};function n(){return new Promise(e=>a(e))}},49597:(e,t)=>{"use strict";let r,a;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return s},decrypt:function(){return l},encrypt:function(){return o},generateEncryptionKeyBase64:function(){return c},getActionEncryptionKey:function(){return f},getClientReferenceManifestSingleton:function(){return h},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return u},stringToUint8Array:function(){return i}});let n=null;function s(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let a="";for(let e=0;e<r;e++)a+=String.fromCharCode(t[e]);return a}function i(e){let t=e.length,r=new Uint8Array(t);for(let a=0;a<t;a++)r[a]=e.charCodeAt(a);return r}function o(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function l(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}async function c(e){if(e&&void 0!==a)return a;n||(n=new Promise(async(e,t)=>{try{let t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=await crypto.subtle.exportKey("raw",t),a=btoa(s(r));e([t,a])}catch(e){t(e)}}));let[t,i]=await n;return r=t,e&&(a=i),i}let d=Symbol.for("next.server.action-manifests");function u({clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}){globalThis[d]={clientReferenceManifest:e,serverActionsManifest:t,serverModuleMap:r}}function p(){let e=globalThis[d];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.serverModuleMap}function h(){let e=globalThis[d];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");return e.clientReferenceManifest}async function f(){if(r)return r;let e=globalThis[d];if(!e)throw Error("Missing manifest for Server Actions. This is a bug in Next.js");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Error("Missing encryption key for Server Actions");return r=await crypto.subtle.importKey("raw",i(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},26461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return p},encryptActionBoundArgs:function(){return u}}),r(83204);let a=r(96012),n=r(85668),s=r(43598),i=r(49597),o=new TextEncoder,l=new TextDecoder;async function c(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let a=atob(t),n=a.slice(0,16),s=a.slice(16),o=l.decode(await (0,i.decrypt)(r,(0,i.stringToUint8Array)(n),(0,i.stringToUint8Array)(s)));if(!o.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return o.slice(e.length)}async function d(e,t){let r=await (0,i.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let a=new Uint8Array(16);crypto.getRandomValues(a);let n=(0,i.arrayBufferToString)(a.buffer),s=await (0,i.encrypt)(r,a,o.encode(e+t));return btoa(n+(0,i.arrayBufferToString)(s))}async function u(e,t){let r=(0,i.getClientReferenceManifestSingleton)(),n=await (0,s.streamToString)((0,a.renderToReadableStream)(t,r.clientModules));return await d(e,n)}async function p(e,t){let r=await c(e,await t),s=await (0,n.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(o.encode(r)),e.close()}}),{ssrManifest:{moduleLoading:{},moduleMap:{}}}),l=(0,i.getServerModuleMap)();return await (0,a.decodeReply)(await (0,n.encodeReply)(s),l)}},49634:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactDOM},96012:(e,t,r)=>{"use strict";e.exports=r(23191).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},98467:(e,t)=>{"use strict";var r,a,n,s,i,o,l,c,d,u,p,h;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{AppRenderSpan:function(){return l},AppRouteRouteHandlersSpan:function(){return u},BaseServerSpan:function(){return r},LoadComponentsSpan:function(){return a},LogSpanAllowList:function(){return m},MiddlewareSpan:function(){return h},NextNodeServerSpan:function(){return s},NextServerSpan:function(){return n},NextVanillaSpanAllowlist:function(){return f},NodeSpan:function(){return d},RenderSpan:function(){return o},ResolveMetadataSpan:function(){return p},RouterSpan:function(){return c},StartServerSpan:function(){return i}}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(r||(r={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(a||(a={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(n||(n={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(s||(s={})),(i||(i={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(o||(o={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(l||(l={})),(c||(c={})).executeRoute="Router.executeRoute",(d||(d={})).runHandler="Node.runHandler",(u||(u={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(p||(p={})),(h||(h={})).execute="Middleware.execute";let f=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],m=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},82755:(e,t,r)=>{"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{SpanKind:function(){return c},SpanStatusCode:function(){return l},getTracer:function(){return y}});let n=r(98467);try{a=r(98601)}catch(e){a=r(98601)}let{context:s,propagation:i,trace:o,SpanStatusCode:l,SpanKind:c,ROOT_CONTEXT:d}=a,u=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,p=(e,t)=>{(null==t?void 0:t.bubble)===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},h=new Map,f=a.createContextKey("next.rootSpanId"),m=0,g=()=>m++;class v{getTracerInstance(){return o.getTracer("next.js","0.0.1")}getContext(){return s}getActiveScopeSpan(){return o.getSpan(null==s?void 0:s.active())}withPropagatedContext(e,t,r){let a=s.active();if(o.getSpanContext(a))return t();let n=i.extract(a,e,r);return s.with(n,t)}trace(...e){var t;let[r,a,i]=e,{fn:l,options:c}="function"==typeof a?{fn:a,options:{}}:{fn:i,options:{...a}},m=c.spanName??r;if(!n.NextVanillaSpanAllowlist.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||c.hideSpan)return l();let v=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan()),y=!1;v?(null==(t=o.getSpanContext(v))?void 0:t.isRemote)&&(y=!0):(v=(null==s?void 0:s.active())??d,y=!0);let _=g();return c.attributes={"next.span_name":m,"next.span_type":r,...c.attributes},s.with(v.setValue(f,_),()=>this.getTracerInstance().startActiveSpan(m,c,e=>{let t="performance"in globalThis?globalThis.performance.now():void 0,a=()=>{h.delete(_),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&n.LogSpanAllowList.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};y&&h.set(_,new Map(Object.entries(c.attributes??{})));try{if(l.length>1)return l(e,t=>p(e,t));let t=l(e);if(u(t))return t.then(t=>(e.end(),t)).catch(t=>{throw p(e,t),t}).finally(a);return e.end(),a(),t}catch(t){throw p(e,t),a(),t}}))}wrap(...e){let t=this,[r,a,i]=3===e.length?e:[e[0],{},e[1]];return n.NextVanillaSpanAllowlist.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=a;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let n=arguments.length-1,o=arguments[n];if("function"!=typeof o)return t.trace(r,e,()=>i.apply(this,arguments));{let a=t.getContext().bind(s.active(),o);return t.trace(r,e,(e,t)=>(arguments[n]=function(e){return null==t||t(e),a.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,a=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,a)}getSpanContext(e){return e?o.setSpan(s.active(),e):void 0}getRootSpanAttributes(){let e=s.active().getValue(f);return h.get(e)}}let y=(()=>{let e=new v;return()=>e})()},42860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ENCODED_TAGS",{enumerable:!0,get:function(){return r}});let r={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}}},43598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{chainStreams:function(){return u},continueDynamicDataResume:function(){return w},continueDynamicHTMLResume:function(){return S},continueDynamicPrerender:function(){return b},continueFizzStream:function(){return x},continueStaticPrerender:function(){return N},createBufferedTransformStream:function(){return f},createRootLayoutValidatorStream:function(){return _},renderToInitialFizzStream:function(){return m},streamFromString:function(){return p},streamToString:function(){return h}});let a=r(82755),n=r(98467),s=r(808),i=r(89061),o=r(42860),l=r(44192);function c(){}let d=new TextEncoder;function u(...e){if(0===e.length)throw Error("Invariant: chainStreams requires at least one stream");if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,a=e[0].pipeTo(r,{preventClose:!0}),n=1;for(;n<e.length-1;n++){let t=e[n];a=a.then(()=>t.pipeTo(r,{preventClose:!0}))}let s=e[n];return(a=a.then(()=>s.pipeTo(r))).catch(c),t}function p(e){return new ReadableStream({start(t){t.enqueue(d.encode(e)),t.close()}})}async function h(e){let t=new TextDecoder("utf-8",{fatal:!0}),r="";for await(let a of e)r+=t.decode(a,{stream:!0});return r+t.decode()}function f(){let e,t=[],r=0,a=a=>{if(e)return;let n=new s.DetachedPromise;e=n,(0,i.scheduleImmediate)(()=>{try{let e=new Uint8Array(r),n=0;for(let r=0;r<t.length;r++){let a=t[r];e.set(a,n),n+=a.byteLength}t.length=0,r=0,a.enqueue(e)}catch{}finally{e=void 0,n.resolve()}})};return new TransformStream({transform(e,n){t.push(e),r+=e.byteLength,a(n)},flush(){if(e)return e.promise}})}function m({ReactDOMServer:e,element:t,streamOptions:r}){return(0,a.getTracer)().trace(n.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function g(e){let t=!1,r=!1,a=!1;return new TransformStream({async transform(n,s){if(a=!0,r){s.enqueue(n);return}let c=await e();if(t){if(c){let e=d.encode(c);s.enqueue(e)}s.enqueue(n),r=!0}else{let e=(0,l.indexOfUint8Array)(n,o.ENCODED_TAGS.CLOSED.HEAD);if(-1!==e){if(c){let t=d.encode(c),r=new Uint8Array(n.length+t.length);r.set(n.slice(0,e)),r.set(t,e),r.set(n.slice(e),e+t.length),s.enqueue(r)}else s.enqueue(n);r=!0,t=!0}}t?(0,i.scheduleImmediate)(()=>{r=!1}):s.enqueue(n)},async flush(t){if(a){let r=await e();r&&t.enqueue(d.encode(r))}}})}function v(e){let t=null,r=!1;async function a(a){if(t)return;let n=e.getReader();await (0,i.atLeastOneTask)();try{for(;;){let{done:e,value:t}=await n.read();if(e){r=!0;return}a.enqueue(t)}}catch(e){a.error(e)}}return new TransformStream({transform(e,r){r.enqueue(e),t||(t=a(r))},flush(e){if(!r)return t||a(e)}})}function y(e){let t=!1,r=d.encode(e);return new TransformStream({transform(a,n){if(t)return n.enqueue(a);let s=(0,l.indexOfUint8Array)(a,r);if(s>-1){if(t=!0,a.length===e.length)return;let r=a.slice(0,s);if(n.enqueue(r),a.length>e.length+s){let t=a.slice(s+e.length);n.enqueue(t)}}else n.enqueue(a)},flush(e){e.enqueue(r)}})}function _(){let e=!1,t=!1;return new TransformStream({async transform(r,a){!e&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.HTML)>-1&&(e=!0),!t&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.BODY)>-1&&(t=!0),a.enqueue(r)},flush(r){let a=[];e||a.push("html"),t||a.push("body"),a.length&&r.enqueue(d.encode(`<script>self.__next_root_layout_missing_tags=${JSON.stringify(a)}</script>`))}})}async function x(e,{suffix:t,inlinedDataStream:r,isStaticGeneration:a,getServerInsertedHTML:n,serverInsertedHTMLToHead:o,validateRootLayout:l}){let c="</body></html>",u=t?t.split(c,1)[0]:null;return a&&"allReady"in e&&await e.allReady,function(e,t){let r=e;for(let e of t)e&&(r=r.pipeThrough(e));return r}(e,[f(),n&&!o?new TransformStream({transform:async(e,t)=>{let r=await n();r&&t.enqueue(d.encode(r)),t.enqueue(e)}}):null,null!=u&&u.length>0?function(e){let t,r=!1,a=r=>{let a=new s.DetachedPromise;t=a,(0,i.scheduleImmediate)(()=>{try{r.enqueue(d.encode(e))}catch{}finally{t=void 0,a.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,a(t))},flush(a){if(t)return t.promise;r||a.enqueue(d.encode(e))}})}(u):null,r?v(r):null,l?_():null,y(c),n&&o?g(n):null])}async function b(e,{getServerInsertedHTML:t}){return e.pipeThrough(f()).pipeThrough(new TransformStream({transform(e,t){(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.HTML)||(e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.BODY),e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.HTML),t.enqueue(e))}})).pipeThrough(g(t))}async function N(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(f()).pipeThrough(g(r)).pipeThrough(v(t)).pipeThrough(y("</body></html>"))}async function S(e,{inlinedDataStream:t,getServerInsertedHTML:r}){return e.pipeThrough(f()).pipeThrough(g(r)).pipeThrough(v(t)).pipeThrough(y("</body></html>"))}async function w(e,{inlinedDataStream:t}){return e.pipeThrough(v(t)).pipeThrough(y("</body></html>"))}},44192:(e,t)=>{"use strict";function r(e,t){if(0===t.length)return 0;if(0===e.length||t.length>e.length)return -1;for(let r=0;r<=e.length-t.length;r++){let a=!0;for(let n=0;n<t.length;n++)if(e[r+n]!==t[n]){a=!1;break}if(a)return r}return -1}function a(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function n(e,t){let a=r(e,t);if(0===a)return e.subarray(t.length);if(!(a>-1))return e;{let r=new Uint8Array(e.length-t.length);return r.set(e.slice(0,a)),r.set(e.slice(a+t.length),a),r}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{indexOfUint8Array:function(){return r},isEquivalentUint8Arrays:function(){return a},removeFromUint8Array:function(){return n}})},75790:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{generateUnityScript:()=>l,updateUserPrefs:()=>c});var n=r(27745);r(26461),function(){var e=Error("Cannot find module '@/lib/unity/validator'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/ai/claude-client'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/ai/openai-client'");throw e.code="MODULE_NOT_FOUND",e}();var s=r(9227);!function(){var e=Error("Cannot find module '@/lib/auth/user-context'");throw e.code="MODULE_NOT_FOUND",e}();var i=r(85723),o=e([s]);async function l(e,t={}){let r=Date.now(),a=t.userId||Object(function(){var e=Error("Cannot find module '@/lib/auth/user-context'");throw e.code="MODULE_NOT_FOUND",e}())(),n=t.provider||"claude",i="",o=0;try{let l,c=null;try{c=await (0,s.JM)(a),!t.provider&&c&&(n=c.ai_provider),"claude"===n&&!t.claudeModel&&c?i=c.claude_model:"openai"===n&&!t.openaiModel&&c&&(i=c.openai_model)}catch(e){console.warn("Failed to load user preferences, using defaults:",e)}"claude"!==n||i?"openai"!==n||i||(i=t.openaiModel||"gpt-4"):i=t.claudeModel||"claude-sonnet-3-5-20241022",l="openai"===n?await Object(function(){var e=Error("Cannot find module '@/lib/ai/openai-client'");throw e.code="MODULE_NOT_FOUND",e}())(e,i):await Object(function(){var e=Error("Cannot find module '@/lib/ai/claude-client'");throw e.code="MODULE_NOT_FOUND",e}())(e,i);let d=Date.now()-r,u=l.success&&!!l.code;o=l.tokensUsed||0;try{await (0,s.Cq)({userId:a,provider:n,model:i,prompt:e,generatedCode:l.code,scriptName:l.scriptName,success:u,errorMessage:l.error,tokensUsed:o,generationTimeMs:d})}catch(e){console.error("Failed to log generation (non-fatal):",e)}if(!u||!l.code)return{success:!1,error:l.error||"Generation failed"};let p=Object(function(){var e=Error("Cannot find module '@/lib/unity/validator'");throw e.code="MODULE_NOT_FOUND",e}())(l.code);if(!p.isValid){try{await (0,s.Cq)({userId:a,provider:n,model:i,prompt:e,generatedCode:l.code,scriptName:l.scriptName,success:!1,errorMessage:`Validation failed: ${p.errors.join(", ")}`,tokensUsed:o,generationTimeMs:d})}catch(e){console.error("Failed to log validation error (non-fatal):",e)}return{success:!1,error:`Generated code has errors: ${p.errors.join(", ")}`}}return l}catch(c){let t=Date.now()-r,l=c instanceof Error?c.message:"Unknown error occurred";try{await (0,s.Cq)({userId:a,provider:n,model:i,prompt:e,success:!1,errorMessage:l,tokensUsed:o,generationTimeMs:t})}catch(e){console.error("Failed to log error (non-fatal):",e)}return console.error("Generation error:",c),{success:!1,error:l}}}async function c(e,t){try{let r=t||Object(function(){var e=Error("Cannot find module '@/lib/auth/user-context'");throw e.code="MODULE_NOT_FOUND",e}())(),a={};return e.provider&&(a.ai_provider=e.provider),e.claudeModel&&(a.claude_model=e.claudeModel),e.openaiModel&&(a.openai_model=e.openaiModel),await (0,s.il)(r,a),{success:!0}}catch(e){return console.error("Error updating preferences:",e),{success:!1,error:e instanceof Error?e.message:"Failed to update preferences"}}}s=(o.then?(await o)():o)[0],(0,i.h)([l,c]),(0,n.j)("b61a356f98a4e62fdbc744b50bd8bc47825b3230",l),(0,n.j)("4d804d1ff79386d11671bbc4ab1ef0155e640718",c),a()}catch(e){a(e)}})},4034:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>n});var a=r(19510);r(334);let n={title:"SPARK - Unity Script Generator",description:"Generate Unity C# scripts with AI"};function s({children:e}){return a.jsx("div",{className:"spark-container",children:e})}},65940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`/home/cursor-dev/Documents/Lumines/src/app/spark/page.tsx#default`)},17049:(e,t,r)=>{"use strict";r.a(e,async(e,t)=>{try{var a=r(8678),n=e([a]);a=(n.then?(await n)():n)[0];t()}catch(e){t(e)}})},9227:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Cq:()=>l,JM:()=>i,il:()=>o});var n=r(17049),s=e([n]);async function i(e){try{return(await n.db.query("SELECT * FROM get_or_create_spark_preferences($1)",[e])).rows[0]||null}catch(e){throw console.error("Error getting user preferences:",e),e}}async function o(e,t){try{let r=[],a=[],s=1;if(void 0!==t.ai_provider&&(r.push(`ai_provider = $${s++}`),a.push(t.ai_provider)),void 0!==t.claude_model&&(r.push(`claude_model = $${s++}`),a.push(t.claude_model)),void 0!==t.openai_model&&(r.push(`openai_model = $${s++}`),a.push(t.openai_model)),0===r.length)return i(e);a.push(e);let o=`
      UPDATE spark_user_preferences
      SET ${r.join(", ")}, updated_at = NOW()
      WHERE user_id = $${s}
      RETURNING *
    `;return(await n.db.query(o,a)).rows[0]||null}catch(e){throw console.error("Error updating user preferences:",e),e}}async function l(e){try{let t=`
      INSERT INTO spark_generation_history (
        user_id, provider, model, prompt, generated_code, script_name,
        success, error_message, tokens_used, generation_time_ms
      )
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)
      RETURNING *
    `,r=[e.userId,e.provider,e.model,e.prompt,e.generatedCode||null,e.scriptName||null,e.success,e.errorMessage||null,e.tokensUsed||0,e.generationTimeMs||0];return(await n.db.query(t,r)).rows[0]||null}catch(e){throw console.error("Error logging generation:",e),e}}n=(s.then?(await s)():s)[0],a()}catch(e){a(e)}})},334:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,2467,6641],()=>r(8331));module.exports=a})();