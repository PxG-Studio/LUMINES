"use strict";exports.id=2383,exports.ids=[2383],exports.modules={9376:(e,t,r)=>{r.d(t,{Fs:()=>S,pb:()=>l});var _={};r.r(_),r.d(_,{t:()=>a});var o=r(62197),i=r.n(o),n=r(60114);let a={url:(0,n.sQ)(),host:n.OB.REDIS_HOST,port:n.OB.REDIS_PORT,password:n.OB.REDIS_PASSWORD,db:n.OB.REDIS_DB,ttl:n.OB.REDIS_TTL,retryStrategy:e=>e>10?null:Math.min(100*e,3e3),reconnectOnError:e=>["READONLY","ECONNREFUSED","ETIMEDOUT"].some(t=>e.message.includes(t))},R=globalThis.redis??new(i())((0,_.getRedisUrl)(),{retryStrategy:a.retryStrategy,reconnectOnError:a.reconnectOnError,maxRetriesPerRequest:3,enableReadyCheck:!0,enableOfflineQueue:!1,lazyConnect:!1});R.on("connect",()=>{}),R.on("error",e=>{console.error("❌ Redis error:",e)}),R.on("close",()=>{}),R.on("reconnecting",()=>{});let S={get:async e=>{try{return await R.get(e)}catch(t){throw console.error(`Redis GET error for key ${e}:`,t),t}},set:async(e,t,r)=>{try{r?await R.setex(e,r,t):await R.set(e,t,"EX",a.ttl)}catch(t){throw console.error(`Redis SET error for key ${e}:`,t),t}},del:async e=>{try{await R.del(e)}catch(t){throw console.error(`Redis DEL error for key ${e}:`,t),t}},exists:async e=>{try{return await R.exists(e)>0}catch(t){throw console.error(`Redis EXISTS error for key ${e}:`,t),t}},close:async()=>{try{await R.quit()}catch(e){console.error("Redis close error:",e),R.disconnect()}}};async function l(){try{let e=await R.ping();return"PONG"===e}catch(e){return console.error("Redis health check failed:",e),!1}}},60114:(e,t,r)=>{r.d(t,{EN:()=>a,OB:()=>n,sQ:()=>R,xw:()=>S});var _=r(91585),o=r(26033);let i=_.Ry({NODE_ENV:_.Km(["development","production","test"]).default("development"),NEXT_PUBLIC_APP_URL:_.Z_().url().optional(),NEXT_PUBLIC_API_BASE:_.Z_().url().optional(),NEXT_PUBLIC_LUMENFORGE_DOMAIN:_.Z_().default("lumenforge.io"),NEXT_PUBLIC_NOCTURNA_ID_URL:_.Z_().url().optional(),DATABASE_URL:_.Z_().url().optional(),DATABASE_HOST:_.Z_().default("192.168.86.27"),DATABASE_PORT:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("5432"),DATABASE_NAME:_.Z_().default("lumines"),DATABASE_USER:_.Z_().optional(),DATABASE_PASSWORD:_.Z_().optional(),DATABASE_POOL_MIN:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("2"),DATABASE_POOL_MAX:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("10"),REDIS_URL:_.Z_().url().optional(),REDIS_HOST:_.Z_().default("192.168.86.27"),REDIS_PORT:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("6379"),REDIS_PASSWORD:_.Z_().optional(),REDIS_DB:_.Z_().transform(Number).pipe(_.Rx().int().min(0).max(15)).default("0"),REDIS_TTL:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3600"),NATS_URL:_.Z_().url().optional(),NATS_HOST:_.Z_().default("192.168.86.27"),NATS_PORT:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("4222"),NATS_CLUSTER:_.Z_().default("lumines-cluster"),NATS_USER:_.Z_().optional(),NATS_PASSWORD:_.Z_().optional(),REGISTRY_URL:_.Z_().url().optional(),REGISTRY_HOST:_.Z_().default("192.168.86.27"),REGISTRY_PORT:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("5000"),REGISTRY_USER:_.Z_().optional(),REGISTRY_PASSWORD:_.Z_().optional(),K8S_NAMESPACE:_.Z_().default("lumines"),K8S_CONTROL_NODE_IP:_.Z_().ip().default("192.168.86.114"),K8S_COMPUTE_NODE_IP:_.Z_().ip().default("192.168.86.115"),PORT_LANDING:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3000"),PORT_SLATE:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3001"),PORT_IGNITION:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3002"),PORT_SPARK:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3003"),PORT_IGNIS:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3004"),PORT_WAYPOINT:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("3005"),NOCTURNA_JWT_SECRET:_.Z_().optional(),NOCTURNA_JWT_AUDIENCE:_.Z_().default("lumines.nocturna.network"),NOCTURNA_JWT_ISSUER:_.Z_().default("lumines.nocturna.network"),NEXTAUTH_SECRET:_.Z_().optional(),NEXTAUTH_URL:_.Z_().url().optional(),GOOGLE_CLIENT_ID:_.Z_().optional(),GOOGLE_CLIENT_SECRET:_.Z_().optional(),GITHUB_CLIENT_ID:_.Z_().optional(),GITHUB_CLIENT_SECRET:_.Z_().optional(),SPARK_AI_ENDPOINT:_.Z_().url().optional(),SPARK_AI_API_KEY:_.Z_().optional(),SPARK_ANTHROPIC_API_KEY:_.Z_().optional(),RATE_LIMIT_FREE:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("10"),RATE_LIMIT_PRO:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("100"),RATE_LIMIT_ENTERPRISE:_.Z_().transform(Number).pipe(_.Rx().int().positive()).default("1000")}),n=function(){try{return i.parse(process.env)}catch(e){if(e instanceof o.jm){let t=e.errors.filter(e=>"invalid_type"===e.code&&"undefined"===e.received).map(e=>e.path.join(".")).join(", "),r=e.errors.filter(e=>"invalid_type"!==e.code).map(e=>`${e.path.join(".")}: ${e.message}`).join("\n  ");throw Error(["❌ Environment configuration validation failed!","",t?`Missing required variables:
  ${t}
`:"",r?`Invalid variable values:
  ${r}
`:"","See .env.example for required variables."].filter(Boolean).join("\n"))}throw e}}();n.NEXT_PUBLIC_APP_URL||(n.K8S_CONTROL_NODE_IP,n.PORT_LANDING),n.K8S_COMPUTE_NODE_IP,n.PORT_SLATE,n.K8S_CONTROL_NODE_IP,n.PORT_IGNITION,n.K8S_COMPUTE_NODE_IP,n.PORT_SPARK,n.K8S_CONTROL_NODE_IP,n.PORT_IGNIS,n.K8S_COMPUTE_NODE_IP,n.PORT_WAYPOINT;let a=()=>{if(n.DATABASE_URL)return n.DATABASE_URL;if(!n.DATABASE_USER||!n.DATABASE_PASSWORD)throw Error("Either DATABASE_URL or both DATABASE_USER and DATABASE_PASSWORD must be provided");return`postgresql://${n.DATABASE_USER}:${n.DATABASE_PASSWORD}@${n.DATABASE_HOST}:${n.DATABASE_PORT}/${n.DATABASE_NAME}`},R=()=>{if(n.REDIS_URL)return n.REDIS_URL;let e=n.REDIS_PASSWORD?`:${n.REDIS_PASSWORD}@`:"";return`redis://${e}${n.REDIS_HOST}:${n.REDIS_PORT}/${n.REDIS_DB}`},S=()=>{if(n.NATS_URL)return n.NATS_URL;let e=n.NATS_USER&&n.NATS_PASSWORD?`${n.NATS_USER}:${n.NATS_PASSWORD}@`:"";return`nats://${e}${n.NATS_HOST}:${n.NATS_PORT}`}},52383:(e,t,r)=>{r.r(t),r.d(t,{initializeApplication:()=>o});var _=r(9376);async function o(){try{await (0,_.pb)()||console.warn("⚠️  Redis connection check failed")}catch(e){console.error("❌ Application initialization failed:",e)}}}};