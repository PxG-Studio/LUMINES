(self.webpackChunklumines_wissil=self.webpackChunklumines_wissil||[]).push([[2152],{"./.storybook/simple-git-mock.js":(module,__unused_webpack_exports,__webpack_require__)=>{var _classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/classCallCheck.js"),_createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/createClass.js"),SimpleGitMock=function(){"use strict";return _createClass(function SimpleGitMock(repoPath){_classCallCheck(this,SimpleGitMock),this.repoPath=repoPath},[{key:"clone",value:function clone(repo,localPath){return Promise.resolve({})}},{key:"pull",value:function pull(){return Promise.resolve({})}},{key:"push",value:function push(){return Promise.resolve({})}},{key:"add",value:function add(files){return Promise.resolve({})}},{key:"commit",value:function commit(message){return Promise.resolve({})}},{key:"status",value:function status(){return Promise.resolve({current:"main",tracking:null,ahead:0,behind:0,files:[],staged:[],not_added:[],conflicted:[],created:[],deleted:[],modified:[],renamed:[]})}},{key:"log",value:function log(options){return Promise.resolve({all:[],latest:null,total:0})}},{key:"branch",value:function branch(options){return Promise.resolve({all:["main"],current:"main",branches:{}})}},{key:"branchLocal",value:function branchLocal(){return Promise.resolve({all:["main"],current:"main",branches:{}})}},{key:"init",value:function init(){return Promise.resolve({})}},{key:"checkout",value:function checkout(branch){return Promise.resolve({})}},{key:"checkoutBranch",value:function checkoutBranch(branchName){return Promise.resolve({})}},{key:"checkoutLocalBranch",value:function checkoutLocalBranch(branchName){return Promise.resolve({})}},{key:"deleteLocalBranch",value:function deleteLocalBranch(branchName){return Promise.resolve({})}},{key:"diff",value:function diff(options){return Array.isArray(options),Promise.resolve("")}},{key:"diffSummary",value:function diffSummary(options){return Promise.resolve({files:[],insertions:0,deletions:0,changed:0})}},{key:"revparse",value:function revparse(options){return Promise.resolve("HEAD")}},{key:"raw",value:function raw(options){return Promise.resolve("")}}])}();module.exports=function simpleGit(repoPath){return new SimpleGitMock(repoPath)},module.exports.default=module.exports},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./node_modules/postcss-loader/dist/cjs.js!./src/styles/editor.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"/**\n * Editor Styles\n * \n * Additional styles for Monaco Editor and editor components\n */\n\n/* Search match highlighting */\n.monaco-editor .search-match {\n  background-color: rgba(166, 77, 255, 0.3) !important;\n  border: 1px solid rgba(166, 77, 255, 0.5) !important;\n}\n\n.monaco-editor .current-search-match {\n  background-color: rgba(166, 77, 255, 0.5) !important;\n  border: 1px solid rgba(166, 77, 255, 0.8) !important;\n}\n\n/* IntelliSense hover */\n.monaco-editor .monaco-hover {\n  background: var(--slate-panel, #16181d) !important;\n  border: 1px solid var(--slate-border, #26292f) !important;\n  color: var(--slate-text, #e4e7eb) !important;\n}\n\n/* Code actions */\n.monaco-editor .monaco-editor-overlaymessage {\n  background: var(--slate-panel, #16181d) !important;\n  border: 1px solid var(--slate-border, #26292f) !important;\n}\n\n","",{version:3,sources:["webpack://./src/styles/editor.css"],names:[],mappings:"AAAA;;;;EAIE;;AAEF,8BAA8B;AAC9B;EACE,oDAAoD;EACpD,oDAAoD;AACtD;;AAEA;EACE,oDAAoD;EACpD,oDAAoD;AACtD;;AAEA,uBAAuB;AACvB;EACE,kDAAkD;EAClD,yDAAyD;EACzD,4CAA4C;AAC9C;;AAEA,iBAAiB;AACjB;EACE,kDAAkD;EAClD,yDAAyD;AAC3D",sourcesContent:["/**\n * Editor Styles\n * \n * Additional styles for Monaco Editor and editor components\n */\n\n/* Search match highlighting */\n.monaco-editor .search-match {\n  background-color: rgba(166, 77, 255, 0.3) !important;\n  border: 1px solid rgba(166, 77, 255, 0.5) !important;\n}\n\n.monaco-editor .current-search-match {\n  background-color: rgba(166, 77, 255, 0.5) !important;\n  border: 1px solid rgba(166, 77, 255, 0.8) !important;\n}\n\n/* IntelliSense hover */\n.monaco-editor .monaco-hover {\n  background: var(--slate-panel, #16181d) !important;\n  border: 1px solid var(--slate-border, #26292f) !important;\n  color: var(--slate-text, #e4e7eb) !important;\n}\n\n/* Code actions */\n.monaco-editor .monaco-editor-overlaymessage {\n  background: var(--slate-panel, #16181d) !important;\n  border: 1px solid var(--slate-border, #26292f) !important;\n}\n\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/editor/filesystem/FileTree.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>FileTree});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,FileTree=function FileTree(_ref){var _ref$files=_ref.files,files=void 0===_ref$files?[{name:"Blueprints",type:"folder",path:"/Blueprints",children:[{name:"TurnSystem.json",type:"file",path:"/Blueprints/TurnSystem.json"},{name:"CardLogic.json",type:"file",path:"/Blueprints/CardLogic.json"}]},{name:"Templates",type:"folder",path:"/Templates",children:[]},{name:"Assets",type:"folder",path:"/Assets",children:[{name:"Sprites",type:"folder",path:"/Assets/Sprites",children:[]}]}]:_ref$files,onFileSelect=_ref.onFileSelect,_ref$defaultExpanded=_ref.defaultExpanded,defaultExpanded=void 0===_ref$defaultExpanded?["/Blueprints"]:_ref$defaultExpanded,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Set(defaultExpanded)),expanded=_useState[0],setExpanded=_useState[1],_renderNode=function renderNode(node){var _node$children,depth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,path=node.path||"/".concat(node.name),isExpanded=expanded.has(path),isFolder="folder"===node.type;return __jsx("div",{key:path},__jsx("div",{onClick:function onClick(){isFolder?function toggle(path){var newExpanded=new Set(expanded);newExpanded.has(path)?newExpanded.delete(path):newExpanded.add(path),setExpanded(newExpanded)}(path):null==onFileSelect||onFileSelect(path)},style:{padding:"4px 8px",paddingLeft:"".concat(16*depth+8,"px"),cursor:"pointer",color:"var(--slate-text, #e4e7eb)",display:"flex",alignItems:"center",gap:4,fontSize:12,fontFamily:"var(--font-mono, monospace)",transition:"background 0.2s"},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-bg, #0f1115)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},__jsx("span",{style:{fontSize:14}},isFolder?isExpanded?"ðŸ“‚":"ðŸ“":"ðŸ“„"),__jsx("span",null,node.name)),isFolder&&isExpanded&&(null===(_node$children=node.children)||void 0===_node$children?void 0:_node$children.map(function(child){return _renderNode(child,depth+1)})))};return __jsx("div",{style:{width:"100%",height:"100%",background:"var(--slate-panel, #16181d)",overflow:"auto",padding:8}},files.map(function(file){return _renderNode(file)}))};FileTree.displayName="FileTree";try{FileTree.displayName="FileTree",FileTree.__docgenInfo={description:"",displayName:"FileTree",props:{files:{defaultValue:{value:"[\n    {\n      name: 'Blueprints',\n      type: 'folder',\n      path: '/Blueprints',\n      children: [\n        { name: 'TurnSystem.json', type: 'file', path: '/Blueprints/TurnSystem.json' },\n        { name: 'CardLogic.json', type: 'file', path: '/Blueprints/CardLogic.json' },\n      ],\n    },\n    {\n      name: 'Templates',\n      type: 'folder',\n      path: '/Templates',\n      children: [],\n    },\n    {\n      name: 'Assets',\n      type: 'folder',\n      path: '/Assets',\n      children: [\n        {\n          name: 'Sprites',\n          type: 'folder',\n          path: '/Assets/Sprites',\n          children: [],\n        },\n      ],\n    },\n  ]"},description:"",name:"files",required:!1,type:{name:"FileNode[] | undefined"}},onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((path: string) => void) | undefined"}},expandedPaths:{defaultValue:null,description:"",name:"expandedPaths",required:!1,type:{name:"Set<string> | undefined"}},defaultExpanded:{defaultValue:{value:"['/Blueprints']"},description:"",name:"defaultExpanded",required:!1,type:{name:"string[] | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/filesystem/FileTree.tsx#FileTree"]={docgenInfo:FileTree.__docgenInfo,name:"FileTree",path:"src/editor/filesystem/FileTree.tsx#FileTree"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/git/GitProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KN:()=>GitProvider,Wo:()=>useGit});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),simple_git__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./.storybook/simple-git-mock.js"),simple_git__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(simple_git__WEBPACK_IMPORTED_MODULE_3__),_wissil_runtime_fs_wissilFs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/wissil/runtime/fs/wissilFs.ts"),process=__webpack_require__("./node_modules/process/browser.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_2__.createElement,GitContext=(0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null),useGit=function useGit(){var context=(0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(GitContext);if(!context)throw new Error("useGit must be used within GitProvider");return context},GitProvider=function GitProvider(_ref){var children=_ref.children,_ref$workingDir=_ref.workingDir,workingDir=void 0===_ref$workingDir?process.cwd():_ref$workingDir,_useState=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),git=_useState[0],setGit=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),status=_useState2[0],setStatus=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),isLoading=_useState3[0],setIsLoading=_useState3[1],_useState4=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),error=_useState4[0],setError=_useState4[1];(0,_wissil_runtime_fs_wissilFs__WEBPACK_IMPORTED_MODULE_4__.C)();(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){var initGit=function(){var _ref2=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(){var gitInstance,_error,_t;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,gitInstance=simple_git__WEBPACK_IMPORTED_MODULE_3___default()(workingDir),setGit(gitInstance),_context.next=1,refreshStatus(gitInstance);case 1:_context.next=3;break;case 2:_context.prev=2,_t=_context.catch(0),_error=_t instanceof Error?_t:new Error("Failed to initialize Git"),setError(_error),console.error("Git initialization error:",_error);case 3:case"end":return _context.stop()}},_callee,null,[[0,2]])}));return function initGit(){return _ref2.apply(this,arguments)}}();initGit()},[workingDir]);var refreshStatus=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref3=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(gitInstance){var statusResult,gitStatus,_error2,_t2;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,setIsLoading(!0),_context2.next=1,gitInstance.status();case 1:statusResult=_context2.sent,gitStatus={current:statusResult.current||null,tracking:statusResult.tracking||null,ahead:statusResult.ahead,behind:statusResult.behind,files:statusResult.files.map(function(f){return{path:f.path,index:f.index,working_dir:f.working_dir}}),staged:statusResult.staged,not_added:statusResult.not_added,conflicted:statusResult.conflicted,created:statusResult.created,deleted:statusResult.deleted,modified:statusResult.modified,renamed:statusResult.renamed},setStatus(gitStatus),setError(null),_context2.next=3;break;case 2:_context2.prev=2,_t2=_context2.catch(0),_error2=_t2 instanceof Error?_t2:new Error("Failed to get Git status"),setError(_error2),console.error("Git status error:",_error2);case 3:return _context2.prev=3,setIsLoading(!1),_context2.finish(3);case 4:case"end":return _context2.stop()}},_callee2,null,[[0,2,3,4]])}));return function(_x){return _ref3.apply(this,arguments)}}(),[]),refresh=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(){return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!git){_context3.next=1;break}return _context3.next=1,refreshStatus(git);case 1:case"end":return _context3.stop()}},_callee3)})),[git,refreshStatus]),init=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(){var _error3,_t3;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(git){_context4.next=1;break}return _context4.abrupt("return");case 1:return _context4.prev=1,setIsLoading(!0),_context4.next=2,git.init();case 2:return _context4.next=3,refreshStatus(git);case 3:_context4.next=5;break;case 4:throw _context4.prev=4,_t3=_context4.catch(1),_error3=_t3 instanceof Error?_t3:new Error("Failed to initialize Git repository"),setError(_error3),_error3;case 5:return _context4.prev=5,setIsLoading(!1),_context4.finish(5);case 6:case"end":return _context4.stop()}},_callee4,null,[[1,4,5,6]])})),[git,refreshStatus]),add=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref6=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee5(files){var _error4,_t4;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(git){_context5.next=1;break}return _context5.abrupt("return");case 1:return _context5.prev=1,setIsLoading(!0),_context5.next=2,git.add(files);case 2:return _context5.next=3,refreshStatus(git);case 3:_context5.next=5;break;case 4:throw _context5.prev=4,_t4=_context5.catch(1),_error4=_t4 instanceof Error?_t4:new Error("Failed to stage files"),setError(_error4),_error4;case 5:return _context5.prev=5,setIsLoading(!1),_context5.finish(5);case 6:case"end":return _context5.stop()}},_callee5,null,[[1,4,5,6]])}));return function(_x2){return _ref6.apply(this,arguments)}}(),[git,refreshStatus]),commit=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref7=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee6(message){var _error5,_t5;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(git){_context6.next=1;break}return _context6.abrupt("return");case 1:return _context6.prev=1,setIsLoading(!0),_context6.next=2,git.commit(message);case 2:return _context6.next=3,refreshStatus(git);case 3:_context6.next=5;break;case 4:throw _context6.prev=4,_t5=_context6.catch(1),_error5=_t5 instanceof Error?_t5:new Error("Failed to commit"),setError(_error5),_error5;case 5:return _context6.prev=5,setIsLoading(!1),_context6.finish(5);case 6:case"end":return _context6.stop()}},_callee6,null,[[1,4,5,6]])}));return function(_x3){return _ref7.apply(this,arguments)}}(),[git,refreshStatus]),push=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee7(){var _error6,_t6;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(git){_context7.next=1;break}return _context7.abrupt("return");case 1:return _context7.prev=1,setIsLoading(!0),_context7.next=2,git.push();case 2:return _context7.next=3,refreshStatus(git);case 3:_context7.next=5;break;case 4:throw _context7.prev=4,_t6=_context7.catch(1),_error6=_t6 instanceof Error?_t6:new Error("Failed to push"),setError(_error6),_error6;case 5:return _context7.prev=5,setIsLoading(!1),_context7.finish(5);case 6:case"end":return _context7.stop()}},_callee7,null,[[1,4,5,6]])})),[git,refreshStatus]),pull=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee8(){var _error7,_t7;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(git){_context8.next=1;break}return _context8.abrupt("return");case 1:return _context8.prev=1,setIsLoading(!0),_context8.next=2,git.pull();case 2:return _context8.next=3,refreshStatus(git);case 3:_context8.next=5;break;case 4:throw _context8.prev=4,_t7=_context8.catch(1),_error7=_t7 instanceof Error?_t7:new Error("Failed to pull"),setError(_error7),_error7;case 5:return _context8.prev=5,setIsLoading(!1),_context8.finish(5);case 6:case"end":return _context8.stop()}},_callee8,null,[[1,4,5,6]])})),[git,refreshStatus]),checkout=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref0=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee9(branch){var _error8,_t8;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(git){_context9.next=1;break}return _context9.abrupt("return");case 1:return _context9.prev=1,setIsLoading(!0),_context9.next=2,git.checkout(branch);case 2:return _context9.next=3,refreshStatus(git);case 3:_context9.next=5;break;case 4:throw _context9.prev=4,_t8=_context9.catch(1),_error8=_t8 instanceof Error?_t8:new Error("Failed to checkout branch"),setError(_error8),_error8;case 5:return _context9.prev=5,setIsLoading(!1),_context9.finish(5);case 6:case"end":return _context9.stop()}},_callee9,null,[[1,4,5,6]])}));return function(_x4){return _ref0.apply(this,arguments)}}(),[git,refreshStatus]),createBranch=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref1=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee0(branch){var _error9,_t9;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context0){for(;;)switch(_context0.prev=_context0.next){case 0:if(git){_context0.next=1;break}return _context0.abrupt("return");case 1:return _context0.prev=1,setIsLoading(!0),_context0.next=2,git.checkoutLocalBranch(branch);case 2:return _context0.next=3,refreshStatus(git);case 3:_context0.next=5;break;case 4:throw _context0.prev=4,_t9=_context0.catch(1),_error9=_t9 instanceof Error?_t9:new Error("Failed to create branch"),setError(_error9),_error9;case 5:return _context0.prev=5,setIsLoading(!1),_context0.finish(5);case 6:case"end":return _context0.stop()}},_callee0,null,[[1,4,5,6]])}));return function(_x5){return _ref1.apply(this,arguments)}}(),[git,refreshStatus]),getBranches=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee1(){var branches,_t0;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context1){for(;;)switch(_context1.prev=_context1.next){case 0:if(git){_context1.next=1;break}return _context1.abrupt("return",[]);case 1:return _context1.prev=1,_context1.next=2,git.branchLocal();case 2:return branches=_context1.sent,_context1.abrupt("return",branches.all);case 3:return _context1.prev=3,_t0=_context1.catch(1),console.error("Failed to get branches:",_t0),_context1.abrupt("return",[]);case 4:case"end":return _context1.stop()}},_callee1,null,[[1,3]])})),[git]),getCommits=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee10(){var limit,log,_t1,_args10=arguments;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(limit=_args10.length>0&&void 0!==_args10[0]?_args10[0]:50,git){_context10.next=1;break}return _context10.abrupt("return",[]);case 1:return _context10.prev=1,_context10.next=2,git.log({maxCount:limit});case 2:return log=_context10.sent,_context10.abrupt("return",log.all.map(function(commit){return{hash:commit.hash,date:new Date(commit.date),message:commit.message,author:commit.author_name,refs:commit.refs}}));case 3:return _context10.prev=3,_t1=_context10.catch(1),console.error("Failed to get commits:",_t1),_context10.abrupt("return",[]);case 4:case"end":return _context10.stop()}},_callee10,null,[[1,3]])})),[git]),getDiff=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){var _ref12=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)(_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee11(file){var _t10;return _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(git){_context11.next=1;break}return _context11.abrupt("return","");case 1:if(_context11.prev=1,!file){_context11.next=3;break}return _context11.next=2,git.diff([file]);case 2:case 4:return _context11.abrupt("return",_context11.sent);case 3:return _context11.next=4,git.diff();case 5:return _context11.prev=5,_t10=_context11.catch(1),console.error("Failed to get diff:",_t10),_context11.abrupt("return","");case 6:case"end":return _context11.stop()}},_callee11,null,[[1,5]])}));return function(_x6){return _ref12.apply(this,arguments)}}(),[git]),value={git,status,isLoading,error,refresh,init,add,commit,push,pull,checkout,createBranch,getBranches,getCommits,getDiff};return __jsx(GitContext.Provider,{value},children)};GitProvider.displayName="GitProvider";try{GitProvider.displayName="GitProvider",GitProvider.__docgenInfo={description:"",displayName:"GitProvider",props:{workingDir:{defaultValue:{value:"process.cwd()"},description:"",name:"workingDir",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/GitProvider.tsx#GitProvider"]={docgenInfo:GitProvider.__docgenInfo,name:"GitProvider",path:"src/editor/git/GitProvider.tsx#GitProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/monaco/EditorContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>EditorContainer});var slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),AppShell=__webpack_require__("./src/editor/shell/AppShell.tsx"),TopBar=__webpack_require__("./src/editor/shell/TopBar.tsx"),FileTree=__webpack_require__("./src/editor/filesystem/FileTree.tsx"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),pin=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/pin.js"),x=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),pin_off=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/pin-off.js"),editorStore=__webpack_require__("./src/editor/monaco/editorStore.ts"),__jsx=react.createElement,TabManager=function TabManager(_ref){var onTabSelect=_ref.onTabSelect,onTabClose=_ref.onTabClose,onTabPin=_ref.onTabPin,_ref$showPreview=_ref.showPreview,showPreview=void 0===_ref$showPreview||_ref$showPreview,_useEditorStore=(0,editorStore.U)(),openFiles=_useEditorStore.openFiles,activeFilePath=_useEditorStore.activeFilePath,closeFile=_useEditorStore.closeFile,closeOtherFiles=_useEditorStore.closeOtherFiles,closeAllFiles=_useEditorStore.closeAllFiles,_useState=(0,react.useState)(new Set),pinnedTabs=_useState[0],setPinnedTabs=_useState[1],_useState2=(0,react.useState)(null),hoveredTab=_useState2[0],setHoveredTab=_useState2[1],_useState3=(0,react.useState)(null),contextMenu=_useState3[0],setContextMenu=_useState3[1],contextMenuRef=(0,react.useRef)(null),sortedTabs=react.useMemo(function(){var pinned=openFiles.filter(function(f){return pinnedTabs.has(f.path)}),unpinned=openFiles.filter(function(f){return!pinnedTabs.has(f.path)});return[].concat((0,toConsumableArray.A)(pinned),(0,toConsumableArray.A)(unpinned))},[openFiles,pinnedTabs]),handleTabClick=(0,react.useCallback)(function(path){null==onTabSelect||onTabSelect(path),editorStore.U.getState().setActiveFile(path)},[onTabSelect]),handleTabClose=(0,react.useCallback)(function(e,path){e.stopPropagation(),pinnedTabs.has(path)&&setPinnedTabs(function(prev){var next=new Set(prev);return next.delete(path),next}),closeFile(path),null==onTabClose||onTabClose(path)},[closeFile,onTabClose,pinnedTabs]),handleTabPin=(0,react.useCallback)(function(e,path){e.stopPropagation();var newPinned=!pinnedTabs.has(path);setPinnedTabs(function(prev){var next=new Set(prev);return newPinned?next.add(path):next.delete(path),next}),null==onTabPin||onTabPin(path,newPinned)},[onTabPin,pinnedTabs]),handleContextMenu=(0,react.useCallback)(function(e,path){e.preventDefault(),e.stopPropagation(),setContextMenu({visible:!0,x:e.clientX,y:e.clientY,tabPath:path})},[]);(0,react.useEffect)(function(){var handleClickOutside=function handleClickOutside(e){contextMenuRef.current&&!contextMenuRef.current.contains(e.target)&&setContextMenu(null)};if(contextMenu)return document.addEventListener("mousedown",handleClickOutside),function(){return document.removeEventListener("mousedown",handleClickOutside)}},[contextMenu]);return __jsx("div",{style:{display:"flex",alignItems:"center",background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)",height:36,overflowX:"auto",overflowY:"hidden"}},sortedTabs.map(function(file){var isActive=file.path===activeFilePath,isPinned=pinnedTabs.has(file.path),isHovered=hoveredTab===file.path;return __jsx("div",{key:file.path,onMouseEnter:function onMouseEnter(){return setHoveredTab(file.path)},onMouseLeave:function onMouseLeave(){return setHoveredTab(null)},onContextMenu:function onContextMenu(e){return handleContextMenu(e,file.path)},onClick:function onClick(){return handleTabClick(file.path)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:isActive?"var(--slate-bg, #0f1115)":isHovered?"var(--slate-panel-hover, #1e2127)":"transparent",borderBottom:isActive?"2px solid var(--slate-accent, #3f8cff)":"2px solid transparent",cursor:"pointer",userSelect:"none",minWidth:120,maxWidth:240,position:"relative"}},isPinned&&__jsx(pin.A,{size:12,style:{color:"var(--slate-text-muted, #9ba1aa)",flexShrink:0}}),__jsx("span",{style:{fontSize:12,flexShrink:0}},function getTabIcon(file){var _file$path$split$pop,ext=null===(_file$path$split$pop=file.path.split(".").pop())||void 0===_file$path$split$pop?void 0:_file$path$split$pop.toLowerCase();return["ts","tsx","js","jsx"].includes(ext||"")?"ðŸ“„":["css","scss"].includes(ext||"")?"ðŸŽ¨":["json"].includes(ext||"")?"ðŸ“‹":["md","mdx"].includes(ext||"")?"ðŸ“":"ðŸ“„"}(file)),__jsx("span",{style:{fontSize:12,color:isActive?"var(--slate-text, #e4e7eb)":"var(--slate-text-muted, #9ba1aa)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}},function getTabLabel(file){return file.path.split("/").pop()||file.path}(file)),file.isDirty&&__jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"var(--slate-accent, #3f8cff)",flexShrink:0}}),(isHovered||isActive)&&__jsx("button",{onClick:function onClick(e){return handleTabClose(e,file.path)},style:{padding:2,background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",color:"var(--slate-text-muted, #9ba1aa)",flexShrink:0},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.color="var(--slate-text, #e4e7eb)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.color="var(--slate-text-muted, #9ba1aa)"}},__jsx(x.A,{size:12})))}),contextMenu&&__jsx("div",{ref:contextMenuRef,style:{position:"fixed",left:contextMenu.x,top:contextMenu.y,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,minWidth:180,padding:4}},__jsx("button",{onClick:function handlePin(){contextMenu&&(handleTabPin({stopPropagation:function stopPropagation(){}},contextMenu.tabPath),setContextMenu(null))},style:{width:"100%",padding:"6px 12px",background:"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:8},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},pinnedTabs.has(contextMenu.tabPath)?__jsx(react.Fragment,null,__jsx(pin_off.A,{size:14}),"Unpin"):__jsx(react.Fragment,null,__jsx(pin.A,{size:14}),"Pin")),__jsx("button",{onClick:function handleClose(){contextMenu&&(handleTabClose({stopPropagation:function stopPropagation(){}},contextMenu.tabPath),setContextMenu(null))},style:{width:"100%",padding:"6px 12px",background:"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:8},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},__jsx(x.A,{size:14}),"Close"),__jsx("div",{style:{height:1,background:"var(--slate-border, #26292f)",margin:"4px 0"}}),__jsx("button",{onClick:function handleCloseOthers(){contextMenu&&(closeOtherFiles(contextMenu.tabPath),setContextMenu(null))},style:{width:"100%",padding:"6px 12px",background:"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},"Close Others"),__jsx("button",{onClick:function handleCloseAll(){closeAllFiles(),setContextMenu(null)},style:{width:"100%",padding:"6px 12px",background:"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},"Close All")),showPreview&&hoveredTab&&__jsx("div",{style:{position:"fixed",left:"50%",top:60,transform:"translateX(-50%)",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,padding:12,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3,maxWidth:400,pointerEvents:"none"}},__jsx("div",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)",marginBottom:4}},hoveredTab),__jsx("div",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)"}},"Click to open")))};TabManager.displayName="TabManager";try{TabManager.displayName="TabManager",TabManager.__docgenInfo={description:"",displayName:"TabManager",props:{onTabSelect:{defaultValue:null,description:"",name:"onTabSelect",required:!1,type:{name:"((path: string) => void) | undefined"}},onTabClose:{defaultValue:null,description:"",name:"onTabClose",required:!1,type:{name:"((path: string) => void) | undefined"}},onTabPin:{defaultValue:null,description:"",name:"onTabPin",required:!1,type:{name:"((path: string, pinned: boolean) => void) | undefined"}},showPreview:{defaultValue:{value:"true"},description:"",name:"showPreview",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/tabs/TabManager.tsx#TabManager"]={docgenInfo:TabManager.__docgenInfo,name:"TabManager",path:"src/editor/tabs/TabManager.tsx#TabManager"})}catch(__react_docgen_typescript_loader_error){}var MonacoEditor=__webpack_require__("./src/editor/monaco/MonacoEditor.tsx"),wissilFs=__webpack_require__("./src/wissil/runtime/fs/wissilFs.ts"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),console=__webpack_require__("./node_modules/console-browserify/index.js"),useStackBlitzRuntime=function useStackBlitzRuntime(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onReady=options.onReady,onError=options.onError,_options$autoStart=options.autoStart,autoStart=void 0===_options$autoStart||_options$autoStart,containerRef=(0,react.useRef)(null),_useState=(0,react.useState)({status:"idle"}),status=_useState[0],setStatus=_useState[1],fs=(0,wissilFs.C)();(0,react.useEffect)(function(){var mounted=!0,initContainer=function(){var _ref=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var _yield$import,_WebContainer,container,error,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,setStatus({status:"booting"}),_context.next=1,__webpack_require__.e(2495).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@webcontainer/api/dist/index.js"));case 1:return _yield$import=_context.sent,_WebContainer=_yield$import.WebContainer,_context.next=2,_WebContainer.boot();case 2:if(container=_context.sent,mounted){_context.next=3;break}return _context.abrupt("return");case 3:return containerRef.current=container,setStatus({status:"ready"}),null==onReady||onReady(container),_context.next=4,_syncFilesystem(container);case 4:if(!autoStart){_context.next=5;break}return _context.next=5,_startDevServer(container);case 5:_context.next=7;break;case 6:_context.prev=6,_t=_context.catch(0),error=_t instanceof Error?_t:new Error("Failed to initialize WebContainer"),setStatus({status:"error",error:error.message}),null==onError||onError(error);case 7:case"end":return _context.stop()}},_callee,null,[[0,6]])}));return function initContainer(){return _ref.apply(this,arguments)}}();return initContainer(),function(){mounted=!1}},[autoStart,onReady,onError]);var _syncFilesystem2,_startDevServer2,_syncFilesystem=(0,react.useCallback)(function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee3(container){var snapshot,_writeNode,_t2;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,snapshot=fs.getSnapshot(),_writeNode=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(node){var path,fullPath,_i,_Object$entries,_Object$entries$_i,name,child,childPath,_args2=arguments;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(path=_args2.length>1&&void 0!==_args2[1]?_args2[1]:"","file"!==node.type){_context2.next=2;break}return fullPath=path||"/",_context2.next=1,container.fs.writeFile(fullPath,node.content||"");case 1:_context2.next=5;break;case 2:if("folder"!==node.type){_context2.next=5;break}_i=0,_Object$entries=Object.entries(node.children||{});case 3:if(!(_i<_Object$entries.length)){_context2.next=5;break}return _Object$entries$_i=(0,slicedToArray.A)(_Object$entries[_i],2),name=_Object$entries$_i[0],child=_Object$entries$_i[1],childPath=path?"".concat(path,"/").concat(name):"/".concat(name),_context2.next=4,_writeNode(child,childPath);case 4:_i++,_context2.next=3;break;case 5:case"end":return _context2.stop()}},_callee2)}));return function writeNode(_x2){return _ref3.apply(this,arguments)}}(),_context3.next=1,_writeNode(snapshot);case 1:_context3.next=3;break;case 2:_context3.prev=2,_t2=_context3.catch(0),console.error("Failed to sync filesystem:",_t2);case 3:case"end":return _context3.stop()}},_callee3,null,[[0,2]])}));return function(_x){return _ref2.apply(this,arguments)}}(),[fs]),_startDevServer=(0,react.useCallback)(function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee4(container){var defaultPackageJson,installProcess,devProcess,error,_t3;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,setStatus("building"),fs.readFile("/package.json")){_context4.next=1;break}return defaultPackageJson={name:"wissil-project",version:"1.0.0",type:"module",scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{},devDependencies:{vite:"^5.0.0"}},_context4.next=1,container.fs.writeFile("/package.json",JSON.stringify(defaultPackageJson,null,2));case 1:return _context4.next=2,container.spawn("npm",["install"]);case 2:return installProcess=_context4.sent,_context4.next=3,installProcess.exit;case 3:return _context4.next=4,container.spawn("npm",["run","dev"]);case 4:devProcess=_context4.sent,container.on("server-ready",function(port,url){setStatus({status:"running",port,url})}),devProcess.output.pipeTo(new WritableStream({write:function write(data){console.log("[Dev Server]",data)}})),_context4.next=6;break;case 5:_context4.prev=5,_t3=_context4.catch(0),error=_t3 instanceof Error?_t3:new Error("Failed to start dev server"),setStatus({status:"error",error:error.message}),null==onError||onError(error);case 6:case"end":return _context4.stop()}},_callee4,null,[[0,5]])}));return function(_x3){return _ref4.apply(this,arguments)}}(),[fs]);return(0,react.useEffect)(function(){if(containerRef.current&&"ready"===status.status){var syncOnChange=function(){var _ref5=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee5(){return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(!containerRef.current){_context5.next=1;break}return _context5.next=1,_syncFilesystem(containerRef.current);case 1:case"end":return _context5.stop()}},_callee5)}));return function syncOnChange(){return _ref5.apply(this,arguments)}}(),timeoutId=setTimeout(syncOnChange,500);return function(){return clearTimeout(timeoutId)}}},[fs.getSnapshot(),status,_syncFilesystem]),{container:containerRef.current,status,startDevServer:(_startDevServer2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee6(){return regenerator_default().wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(!containerRef.current){_context6.next=1;break}return _context6.next=1,_startDevServer(containerRef.current);case 1:case"end":return _context6.stop()}},_callee6)})),function startDevServer(){return _startDevServer2.apply(this,arguments)}),syncFilesystem:(_syncFilesystem2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee7(){return regenerator_default().wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!containerRef.current){_context7.next=1;break}return _context7.next=1,_syncFilesystem(containerRef.current);case 1:case"end":return _context7.stop()}},_callee7)})),function syncFilesystem(){return _syncFilesystem2.apply(this,arguments)})}},StackBlitzRuntime=function StackBlitzRuntime(props){return useStackBlitzRuntime(props),null};try{useStackBlitzRuntime.displayName="useStackBlitzRuntime",useStackBlitzRuntime.__docgenInfo={description:"",displayName:"useStackBlitzRuntime",props:{onReady:{defaultValue:null,description:"",name:"onReady",required:!1,type:{name:"((container: WebContainer) => void) | undefined"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((error: Error) => void) | undefined"}},autoStart:{defaultValue:null,description:"",name:"autoStart",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/StackBlitzRuntime.tsx#useStackBlitzRuntime"]={docgenInfo:useStackBlitzRuntime.__docgenInfo,name:"useStackBlitzRuntime",path:"src/editor/runtime/StackBlitzRuntime.tsx#useStackBlitzRuntime"})}catch(__react_docgen_typescript_loader_error){}try{StackBlitzRuntime.displayName="StackBlitzRuntime",StackBlitzRuntime.__docgenInfo={description:"",displayName:"StackBlitzRuntime",props:{onReady:{defaultValue:null,description:"",name:"onReady",required:!1,type:{name:"((container: WebContainer) => void) | undefined"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((error: Error) => void) | undefined"}},autoStart:{defaultValue:null,description:"",name:"autoStart",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/StackBlitzRuntime.tsx#StackBlitzRuntime"]={docgenInfo:StackBlitzRuntime.__docgenInfo,name:"StackBlitzRuntime",path:"src/editor/runtime/StackBlitzRuntime.tsx#StackBlitzRuntime"})}catch(__react_docgen_typescript_loader_error){}var style=__webpack_require__("./node_modules/styled-jsx/style.js"),style_default=__webpack_require__.n(style),refresh_cw=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/refresh-cw.js"),minimize_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/minimize-2.js"),maximize_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/maximize-2.js"),external_link=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/external-link.js"),PreviewFrame_jsx=react.createElement,PreviewFrame=function PreviewFrame(_ref){var url=_ref.url,onLoad=_ref.onLoad,onError=_ref.onError,_ref$height=_ref.height,height=void 0===_ref$height?"100%":_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?"100%":_ref$width,_ref$showControls=_ref.showControls,showControls=void 0===_ref$showControls||_ref$showControls,iframeRef=(0,react.useRef)(null),_useState=(0,react.useState)(!0),isLoading=_useState[0],setIsLoading=_useState[1],_useState2=(0,react.useState)(!1),isFullscreen=_useState2[0],setIsFullscreen=_useState2[1],_useState3=(0,react.useState)(null),error=_useState3[0],setError=_useState3[1];(0,react.useEffect)(function(){url&&(setIsLoading(!0),setError(null))},[url]);return url?PreviewFrame_jsx("div",{style:{position:"relative",height,width,background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,overflow:"hidden",display:"flex",flexDirection:"column"},className:"jsx-1109049199"},showControls&&PreviewFrame_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)"},className:"jsx-1109049199"},PreviewFrame_jsx("div",{style:{display:"flex",alignItems:"center",gap:8},className:"jsx-1109049199"},PreviewFrame_jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:isLoading?"#fbbf24":"#10b981"},className:"jsx-1109049199"}),PreviewFrame_jsx("span",{style:{fontSize:12,color:"var(--slate-text-muted, #9ba1aa)"},className:"jsx-1109049199"},isLoading?"Loading...":"Running")),PreviewFrame_jsx("div",{style:{display:"flex",alignItems:"center",gap:4},className:"jsx-1109049199"},PreviewFrame_jsx("button",{onClick:function handleRefresh(){iframeRef.current&&(iframeRef.current.src=iframeRef.current.src,setIsLoading(!0))},style:{padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11},title:"Refresh",className:"jsx-1109049199"},PreviewFrame_jsx(refresh_cw.A,{size:12})),PreviewFrame_jsx("button",{onClick:function handleFullscreen(){iframeRef.current&&(isFullscreen?(document.exitFullscreen&&document.exitFullscreen(),setIsFullscreen(!1)):(iframeRef.current.requestFullscreen&&iframeRef.current.requestFullscreen(),setIsFullscreen(!0)))},style:{padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11},title:"Fullscreen",className:"jsx-1109049199"},PreviewFrame_jsx(isFullscreen?minimize_2.A:maximize_2.A,{size:12})),PreviewFrame_jsx("button",{onClick:function handleOpenInNewTab(){url&&window.open(url,"_blank")},style:{padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11},title:"Open in new tab",className:"jsx-1109049199"},PreviewFrame_jsx(external_link.A,{size:12})))),error&&PreviewFrame_jsx("div",{style:{padding:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,margin:12,color:"#ef4444",fontSize:12},className:"jsx-1109049199"},error),isLoading&&!error&&PreviewFrame_jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",gap:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12},className:"jsx-1109049199"},PreviewFrame_jsx("div",{style:{width:24,height:24,border:"2px solid var(--slate-border, #26292f)",borderTopColor:"var(--slate-accent, #3f8cff)",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-1109049199"}),PreviewFrame_jsx("span",{className:"jsx-1109049199"},"Loading preview...")),PreviewFrame_jsx("iframe",{ref:iframeRef,src:url,onLoad:function handleLoad(){setIsLoading(!1),null==onLoad||onLoad()},onError:function handleError(){var error=new Error("Failed to load preview");setIsLoading(!1),setError("Failed to load preview"),null==onError||onError(error)},style:{flex:1,border:"none",width:"100%",height:"100%",background:"#FFFFFF"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"Preview",className:"jsx-1109049199"}),PreviewFrame_jsx(style_default(),{id:"1109049199"},["@-webkit-keyframes spin-jsx-1109049199{to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}","@keyframes spin-jsx-1109049199{to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}"])):PreviewFrame_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height,width,background:"var(--slate-bg, #0f1115)",color:"var(--slate-text-muted, #9ba1aa)",fontSize:14}},"No preview URL available")};PreviewFrame.displayName="PreviewFrame";try{PreviewFrame.displayName="PreviewFrame",PreviewFrame.__docgenInfo={description:"",displayName:"PreviewFrame",props:{url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string | undefined"}},onLoad:{defaultValue:null,description:"",name:"onLoad",required:!1,type:{name:"(() => void) | undefined"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((error: Error) => void) | undefined"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | undefined"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | undefined"}},showControls:{defaultValue:{value:"true"},description:"",name:"showControls",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/PreviewFrame.tsx#PreviewFrame"]={docgenInfo:PreviewFrame.__docgenInfo,name:"PreviewFrame",path:"src/editor/runtime/PreviewFrame.tsx#PreviewFrame"})}catch(__react_docgen_typescript_loader_error){}var terminal=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/terminal.js"),trash_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/trash-2.js"),ConsoleOutput_jsx=react.createElement,ConsoleOutput=function ConsoleOutput(_ref){var _ref$messages=_ref.messages,messages=void 0===_ref$messages?[]:_ref$messages,onClear=_ref.onClear,_ref$maxMessages=_ref.maxMessages,maxMessages=void 0===_ref$maxMessages?1e3:_ref$maxMessages,_ref$showTimestamp=_ref.showTimestamp,showTimestamp=void 0===_ref$showTimestamp||_ref$showTimestamp,_ref$autoScroll=_ref.autoScroll,autoScroll=void 0===_ref$autoScroll||_ref$autoScroll,containerRef=(0,react.useRef)(null),_useState=(0,react.useState)("all"),filter=_useState[0],setFilter=_useState[1];(0,react.useEffect)(function(){autoScroll&&containerRef.current&&(containerRef.current.scrollTop=containerRef.current.scrollHeight)},[messages,autoScroll]);var displayMessages=messages.filter(function(msg){return"all"===filter||msg.type===filter}).slice(-maxMessages),getMessageColor=function getMessageColor(type){switch(type){case"error":return"#ef4444";case"warn":return"#f59e0b";case"info":return"#3b82f6";case"debug":return"#8b5cf6";default:return"var(--slate-text, #e4e7eb)"}};return ConsoleOutput_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,overflow:"hidden"}},ConsoleOutput_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)"}},ConsoleOutput_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},ConsoleOutput_jsx(terminal.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),ConsoleOutput_jsx("span",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},"Console"),ConsoleOutput_jsx("span",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)"}},"(",displayMessages.length,")")),ConsoleOutput_jsx("div",{style:{display:"flex",alignItems:"center",gap:4}},["all","log","error","warn","info"].map(function(type){return ConsoleOutput_jsx("button",{key:type,onClick:function onClick(){return setFilter(type)},style:{padding:"2px 6px",background:filter===type?"var(--slate-accent, #3f8cff)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:filter===type?"#FFFFFF":"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:10,textTransform:"capitalize"}},type)}),ConsoleOutput_jsx("button",{onClick:onClear,style:{padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11},title:"Clear console"},ConsoleOutput_jsx(trash_2.A,{size:12})))),ConsoleOutput_jsx("div",{ref:containerRef,style:{flex:1,overflowY:"auto",padding:8,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',fontSize:12,lineHeight:1.5}},0===displayMessages.length?ConsoleOutput_jsx("div",{style:{color:"var(--slate-text-muted, #9ba1aa)",fontSize:12,textAlign:"center",padding:20}},"No console messages"):displayMessages.map(function(msg,index){return ConsoleOutput_jsx("div",{key:index,style:{display:"flex",gap:8,padding:"2px 0",color:getMessageColor(msg.type)}},showTimestamp&&ConsoleOutput_jsx("span",{style:{color:"var(--slate-text-muted, #9ba1aa)",fontSize:11,minWidth:80}},function formatTimestamp(date){return date.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3})}(msg.timestamp)),ConsoleOutput_jsx("span",{style:{flex:1,wordBreak:"break-word"}},msg.message))})))};ConsoleOutput.displayName="ConsoleOutput";try{ConsoleOutput.displayName="ConsoleOutput",ConsoleOutput.__docgenInfo={description:"",displayName:"ConsoleOutput",props:{messages:{defaultValue:{value:"[]"},description:"",name:"messages",required:!1,type:{name:"ConsoleMessage[] | undefined"}},onClear:{defaultValue:null,description:"",name:"onClear",required:!1,type:{name:"(() => void) | undefined"}},maxMessages:{defaultValue:{value:"1000"},description:"",name:"maxMessages",required:!1,type:{name:"number | undefined"}},showTimestamp:{defaultValue:{value:"true"},description:"",name:"showTimestamp",required:!1,type:{name:"boolean | undefined"}},autoScroll:{defaultValue:{value:"true"},description:"",name:"autoScroll",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/ConsoleOutput.tsx#ConsoleOutput"]={docgenInfo:ConsoleOutput.__docgenInfo,name:"ConsoleOutput",path:"src/editor/runtime/ConsoleOutput.tsx#ConsoleOutput"})}catch(__react_docgen_typescript_loader_error){}var toArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toArray.js"),square=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/square.js"),play=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/play.js"),Terminal_jsx=react.createElement;function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var Terminal=function Terminal(_ref){var container=_ref.container,onCommand=_ref.onCommand,onOutput=_ref.onOutput,_ref$height=_ref.height,height=void 0===_ref$height?"300px":_ref$height,_ref$autoFocus=_ref.autoFocus,autoFocus=void 0===_ref$autoFocus||_ref$autoFocus,inputRef=(0,react.useRef)(null),outputRef=(0,react.useRef)(null),_useState=(0,react.useState)([]),history=_useState[0],setHistory=_useState[1],_useState2=(0,react.useState)(-1),historyIndex=_useState2[0],setHistoryIndex=_useState2[1],_useState3=(0,react.useState)(""),currentCommand=_useState3[0],setCurrentCommand=_useState3[1],_useState4=(0,react.useState)([]),output=_useState4[0],setOutput=_useState4[1],_useState5=(0,react.useState)(!1),isRunning=_useState5[0],setIsRunning=_useState5[1],processRef=(0,react.useRef)(null);(0,react.useEffect)(function(){autoFocus&&inputRef.current&&inputRef.current.focus()},[autoFocus]),(0,react.useEffect)(function(){outputRef.current&&(outputRef.current.scrollTop=outputRef.current.scrollHeight)},[output]);var executeCommand=(0,react.useCallback)(function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(command){var _command$trim$split,_command$trim$split2,cmd,args,process,reader,decoder,_loop,exitCode,errorMessage,_t;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(container&&command.trim()){_context2.next=1;break}return _context2.abrupt("return");case 1:return setHistory(function(prev){return[].concat((0,toConsumableArray.A)(prev),[command])}),setHistoryIndex(-1),setOutput(function(prev){return[].concat((0,toConsumableArray.A)(prev),[{type:"input",text:"$ ".concat(command)}])}),null==onCommand||onCommand(command),setIsRunning(!0),_context2.prev=2,_command$trim$split=command.trim().split(/\s+/),_command$trim$split2=(0,toArray.A)(_command$trim$split),cmd=_command$trim$split2[0],args=_arrayLikeToArray(_command$trim$split2).slice(1),_context2.next=3,container.spawn(cmd,args);case 3:process=_context2.sent,processRef.current=process,reader=process.output.getReader(),decoder=new TextDecoder,_loop=regenerator_default().mark(function _loop(){var _yield$reader$read,done,value,text;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=1,reader.read();case 1:if(_yield$reader$read=_context.sent,done=_yield$reader$read.done,value=_yield$reader$read.value,!done){_context.next=2;break}return _context.abrupt("return",1);case 2:text=decoder.decode(value,{stream:!0}),setOutput(function(prev){return[].concat((0,toConsumableArray.A)(prev),[{type:"output",text}])}),null==onOutput||onOutput(text);case 3:case"end":return _context.stop()}},_loop)});case 4:return _context2.delegateYield(_loop(),"t0",5);case 5:if(!_context2.t0){_context2.next=6;break}return _context2.abrupt("continue",7);case 6:_context2.next=4;break;case 7:return _context2.next=8,process.exit;case 8:0!==(exitCode=_context2.sent)&&setOutput(function(prev){return[].concat((0,toConsumableArray.A)(prev),[{type:"error",text:"Process exited with code ".concat(exitCode)}])}),_context2.next=10;break;case 9:_context2.prev=9,_t=_context2.catch(2),errorMessage=_t instanceof Error?_t.message:"Command failed",setOutput(function(prev){return[].concat((0,toConsumableArray.A)(prev),[{type:"error",text:errorMessage}])});case 10:return _context2.prev=10,setIsRunning(!1),processRef.current=null,_context2.finish(10);case 11:case"end":return _context2.stop()}},_callee,null,[[2,9,10,11]])}));return function(_x){return _ref2.apply(this,arguments)}}(),[container,onCommand,onOutput]);return Terminal_jsx("div",{style:{display:"flex",flexDirection:"column",height,background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,overflow:"hidden"}},Terminal_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)"}},Terminal_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},Terminal_jsx(terminal.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),Terminal_jsx("span",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},"Terminal")),isRunning&&Terminal_jsx("button",{onClick:function handleStop(){processRef.current&&(processRef.current.kill(),processRef.current=null,setIsRunning(!1))},style:{padding:"4px 8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11}},Terminal_jsx(square.A,{size:12}),"Stop")),Terminal_jsx("div",{ref:outputRef,style:{flex:1,overflowY:"auto",padding:8,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',fontSize:12,lineHeight:1.5,background:"#000000",color:"#00ff00"}},0===output.length?Terminal_jsx("div",{style:{color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"Terminal ready. Type a command and press Enter."):output.map(function(item,index){return Terminal_jsx("div",{key:index,style:{color:"error"===item.type?"#ef4444":"input"===item.type?"#00ff00":"#e4e7eb",marginBottom:2,wordBreak:"break-word"}},item.text)})),Terminal_jsx("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"var(--slate-panel, #16181d)",borderTop:"1px solid var(--slate-border, #26292f)"}},Terminal_jsx("span",{style:{color:"#00ff00",fontSize:12}},"$"),Terminal_jsx("input",{ref:inputRef,type:"text",value:currentCommand,onChange:function onChange(e){return setCurrentCommand(e.target.value)},onKeyDown:function handleKeyDown(e){if("Enter"===e.key){e.preventDefault();var command=currentCommand.trim();command&&(executeCommand(command),setCurrentCommand(""))}else if("ArrowUp"===e.key){if(e.preventDefault(),history.length>0){var newIndex=-1===historyIndex?history.length-1:Math.max(0,historyIndex-1);setHistoryIndex(newIndex),setCurrentCommand(history[newIndex])}}else if("ArrowDown"===e.key){if(e.preventDefault(),-1!==historyIndex){var _newIndex=historyIndex+1;_newIndex>=history.length?(setHistoryIndex(-1),setCurrentCommand("")):(setHistoryIndex(_newIndex),setCurrentCommand(history[_newIndex]))}}else"c"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),processRef.current&&(processRef.current.kill(),processRef.current=null,setIsRunning(!1)))},disabled:isRunning,placeholder:isRunning?"Command running...":"Enter command...",style:{flex:1,background:"transparent",border:"none",outline:"none",color:"#e4e7eb",fontSize:12,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace'}}),!isRunning&&Terminal_jsx("button",{onClick:function onClick(){currentCommand.trim()&&(executeCommand(currentCommand),setCurrentCommand(""))},style:{padding:"4px 8px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11}},Terminal_jsx(play.A,{size:12}),"Run")))};Terminal.displayName="Terminal";try{Terminal.displayName="Terminal",Terminal.__docgenInfo={description:"",displayName:"Terminal",props:{container:{defaultValue:null,description:"",name:"container",required:!1,type:{name:"any"}},onCommand:{defaultValue:null,description:"",name:"onCommand",required:!1,type:{name:"((command: string) => void) | undefined"}},onOutput:{defaultValue:null,description:"",name:"onOutput",required:!1,type:{name:"((output: string) => void) | undefined"}},height:{defaultValue:{value:"300px"},description:"",name:"height",required:!1,type:{name:"string | undefined"}},autoFocus:{defaultValue:{value:"true"},description:"",name:"autoFocus",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/Terminal.tsx#Terminal"]={docgenInfo:Terminal.__docgenInfo,name:"Terminal",path:"src/editor/runtime/Terminal.tsx#Terminal"})}catch(__react_docgen_typescript_loader_error){}var loader_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-2.js"),check_circle_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/check-circle-2.js"),x_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x-circle.js"),alert_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/alert-circle.js"),BuildStatus_jsx=react.createElement,BuildStatus=function BuildStatus(_ref){var status=_ref.status,message=_ref.message,progress=_ref.progress,_ref$errors=_ref.errors,errors=void 0===_ref$errors?[]:_ref$errors,_ref$warnings=_ref.warnings,warnings=void 0===_ref$warnings?[]:_ref$warnings,buildTime=_ref.buildTime,getStatusColor=function getStatusColor(){switch(status){case"building":return"#3b82f6";case"success":return"#10b981";case"error":return"#ef4444";case"warning":return"#f59e0b";default:return"var(--slate-text-muted, #9ba1aa)"}};return BuildStatus_jsx("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8}},BuildStatus_jsx("div",{style:{display:"flex",alignItems:"center"}},function getStatusIcon(){switch(status){case"building":return BuildStatus_jsx(loader_2.A,{size:16,className:"animate-spin"});case"success":return BuildStatus_jsx(check_circle_2.A,{size:16,style:{color:"#10b981"}});case"error":return BuildStatus_jsx(x_circle.A,{size:16,style:{color:"#ef4444"}});case"warning":return BuildStatus_jsx(alert_circle.A,{size:16,style:{color:"#f59e0b"}});default:return null}}()),BuildStatus_jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:2}},BuildStatus_jsx("div",{style:{fontSize:12,fontWeight:500,color:getStatusColor()}},message||status.charAt(0).toUpperCase()+status.slice(1)),"building"===status&&void 0!==progress&&BuildStatus_jsx("div",{style:{width:"100%",height:2,background:"var(--slate-bg, #0f1115)",borderRadius:1,overflow:"hidden"}},BuildStatus_jsx("div",{style:{width:"".concat(progress,"%"),height:"100%",background:getStatusColor(),transition:"width 0.3s ease"}})),void 0!==buildTime&&"success"===status&&BuildStatus_jsx("div",{style:{fontSize:10,color:"var(--slate-text-muted, #9ba1aa)"}},"Built in ",buildTime.toFixed(2),"s"),errors.length>0&&BuildStatus_jsx("div",{style:{marginTop:4}},errors.map(function(error,index){return BuildStatus_jsx("div",{key:index,style:{fontSize:11,color:"#ef4444",marginTop:2}},error)})),warnings.length>0&&BuildStatus_jsx("div",{style:{marginTop:4}},warnings.map(function(warning,index){return BuildStatus_jsx("div",{key:index,style:{fontSize:11,color:"#f59e0b",marginTop:2}},warning)}))))};BuildStatus.displayName="BuildStatus";try{BuildStatus.displayName="BuildStatus",BuildStatus.__docgenInfo={description:"",displayName:"BuildStatus",props:{status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"idle"'},{value:'"building"'},{value:'"success"'},{value:'"error"'},{value:'"warning"'}]}},message:{defaultValue:null,description:"",name:"message",required:!1,type:{name:"string | undefined"}},progress:{defaultValue:null,description:"",name:"progress",required:!1,type:{name:"number | undefined"}},errors:{defaultValue:{value:"[]"},description:"",name:"errors",required:!1,type:{name:"string[] | undefined"}},warnings:{defaultValue:{value:"[]"},description:"",name:"warnings",required:!1,type:{name:"string[] | undefined"}},buildTime:{defaultValue:null,description:"",name:"buildTime",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/BuildStatus.tsx#BuildStatus"]={docgenInfo:BuildStatus.__docgenInfo,name:"BuildStatus",path:"src/editor/runtime/BuildStatus.tsx#BuildStatus"})}catch(__react_docgen_typescript_loader_error){}var copy=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/copy.js"),ErrorOverlay_jsx=react.createElement,ErrorOverlay=function ErrorOverlay(_ref){var error=_ref.error,onClose=_ref.onClose,onRetry=_ref.onRetry,_ref$show=_ref.show;if(!(void 0===_ref$show||_ref$show)||!error)return null;var errorMessage=error instanceof Error?error.message:error,errorStack=error instanceof Error?error.stack:void 0;return ErrorOverlay_jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:20}},ErrorOverlay_jsx("div",{style:{background:"var(--slate-panel, #16181d)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,maxWidth:600,width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"}},ErrorOverlay_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid var(--slate-border, #26292f)"}},ErrorOverlay_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},ErrorOverlay_jsx(alert_circle.A,{size:20,style:{color:"#ef4444"}}),ErrorOverlay_jsx("span",{style:{fontSize:16,fontWeight:600,color:"#ef4444"}},"Runtime Error")),ErrorOverlay_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},onRetry&&ErrorOverlay_jsx("button",{onClick:onRetry,style:{padding:"6px 12px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:12}},ErrorOverlay_jsx(refresh_cw.A,{size:14}),"Retry"),onClose&&ErrorOverlay_jsx("button",{onClick:onClose,style:{padding:"6px 12px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:12}},ErrorOverlay_jsx(x.A,{size:14})))),ErrorOverlay_jsx("div",{style:{padding:"20px"}},ErrorOverlay_jsx("div",{style:{fontSize:14,color:"#ef4444",marginBottom:12,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace'}},errorMessage),errorStack&&ErrorOverlay_jsx("div",{style:{marginTop:16}},ErrorOverlay_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8}},ErrorOverlay_jsx("span",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text-muted, #9ba1aa)"}},"Stack Trace"),ErrorOverlay_jsx("button",{onClick:function handleCopy(){var text=errorStack||errorMessage;navigator.clipboard.writeText(text)},style:{padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",display:"flex",alignItems:"center",gap:4,fontSize:11}},ErrorOverlay_jsx(copy.A,{size:12}),"Copy")),ErrorOverlay_jsx("pre",{style:{background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,padding:12,fontSize:11,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',color:"var(--slate-text, #e4e7eb)",overflow:"auto",maxHeight:300,lineHeight:1.5}},errorStack)))))};ErrorOverlay.displayName="ErrorOverlay";try{ErrorOverlay.displayName="ErrorOverlay",ErrorOverlay.__docgenInfo={description:"",displayName:"ErrorOverlay",props:{error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string | Error | null | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void) | undefined"}},onRetry:{defaultValue:null,description:"",name:"onRetry",required:!1,type:{name:"(() => void) | undefined"}},show:{defaultValue:{value:"true"},description:"",name:"show",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/ErrorOverlay.tsx#ErrorOverlay"]={docgenInfo:ErrorOverlay.__docgenInfo,name:"ErrorOverlay",path:"src/editor/runtime/ErrorOverlay.tsx#ErrorOverlay"})}catch(__react_docgen_typescript_loader_error){}var SplitPane=__webpack_require__("./src/editor/shell/SplitPane.tsx"),RuntimeContainer_console=__webpack_require__("./node_modules/console-browserify/index.js"),RuntimeContainer_jsx=react.createElement,RuntimeContainer=function RuntimeContainer(_ref){var _ref$showPreview=_ref.showPreview,showPreview=void 0===_ref$showPreview||_ref$showPreview,_ref$showConsole=_ref.showConsole,showConsole=void 0===_ref$showConsole||_ref$showConsole,_ref$showTerminal=_ref.showTerminal,showTerminal=void 0===_ref$showTerminal||_ref$showTerminal,_ref$showBuildStatus=_ref.showBuildStatus,showBuildStatus=void 0===_ref$showBuildStatus||_ref$showBuildStatus,_ref$layout=_ref.layout,layout=void 0===_ref$layout?"horizontal":_ref$layout,_ref$previewHeight=_ref.previewHeight,previewHeight=void 0===_ref$previewHeight?"50%":_ref$previewHeight,_useState=(0,react.useState)([]),consoleMessages=_useState[0],setConsoleMessages=_useState[1],_useState2=(0,react.useState)("idle"),buildStatus=_useState2[0],setBuildStatus=_useState2[1],_useState3=(0,react.useState)(""),buildMessage=_useState3[0],setBuildMessage=_useState3[1],_useState4=(0,react.useState)(0),buildProgress=_useState4[0],setBuildProgress=_useState4[1],_useState5=(0,react.useState)(null),runtimeError=_useState5[0],setRuntimeError=_useState5[1],fs=(0,wissilFs.C)(),_useStackBlitzRuntime=useStackBlitzRuntime({onReady:handleRuntimeReady,onError:handleRuntimeError,autoStart:!0}),container=_useStackBlitzRuntime.container,runtimeStatus=_useStackBlitzRuntime.status,handleRuntimeReady=(0,react.useCallback)(function(container){container.on("server-ready",function(port,url){setBuildStatus("success"),setBuildMessage("Build completed successfully")})},[]),handleRuntimeError=(0,react.useCallback)(function(error){setRuntimeError(error),setBuildStatus("error"),setBuildMessage(error.message),setConsoleMessages(function(prev){return[].concat((0,toConsumableArray.A)(prev),[{type:"error",message:error.message,timestamp:new Date}])})},[]),handleRetry=(0,react.useCallback)(function(){setRuntimeError(null),setBuildStatus("idle"),setBuildMessage("")},[]),addConsoleMessage=(0,react.useCallback)(function(message){setConsoleMessages(function(prev){return[].concat((0,toConsumableArray.A)(prev),[message]).slice(-1e3)})},[]),handleClearConsole=(0,react.useCallback)(function(){setConsoleMessages([])},[]),handleTerminalOutput=(0,react.useCallback)(function(output){addConsoleMessage({type:"log",message:output,timestamp:new Date})},[addConsoleMessage]),handleTerminalCommand=(0,react.useCallback)(function(command){addConsoleMessage({type:"info",message:"Executing: ".concat(command),timestamp:new Date}),command.startsWith("npm")&&(setBuildStatus("building"),setBuildMessage("Installing dependencies..."),setBuildProgress(0))},[addConsoleMessage]);return(0,react.useEffect)(function(){if(container&&"running"===runtimeStatus.status){var syncFilesystem=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:try{fs.getSnapshot()}catch(error){RuntimeContainer_console.error("Failed to sync filesystem:",error)}case 1:case"end":return _context.stop()}},_callee)}));return function syncFilesystem(){return _ref2.apply(this,arguments)}}(),timeoutId=setTimeout(syncFilesystem,500);return function(){return clearTimeout(timeoutId)}}},[fs.getSnapshot(),container,runtimeStatus.status]),RuntimeContainer_jsx(react.Fragment,null,RuntimeContainer_jsx(ErrorOverlay,{error:runtimeError,onClose:function onClose(){return setRuntimeError(null)},onRetry:handleRetry,show:!!runtimeError}),RuntimeContainer_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},showBuildStatus&&RuntimeContainer_jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--slate-border, #26292f)"}},RuntimeContainer_jsx(BuildStatus,{status:buildStatus,message:buildMessage,progress:buildProgress})),RuntimeContainer_jsx("div",{style:{flex:1,display:"flex",flexDirection:"vertical"===layout?"column":"row"}},showPreview&&RuntimeContainer_jsx("div",{style:{flex:1,minHeight:0}},RuntimeContainer_jsx(PreviewFrame,{url:runtimeStatus.url,onLoad:function onLoad(){addConsoleMessage({type:"info",message:"Preview loaded successfully",timestamp:new Date})},onError:function onError(error){addConsoleMessage({type:"error",message:error.message,timestamp:new Date})},height:"vertical"===layout?previewHeight:"100%"})),(showConsole||showTerminal)&&RuntimeContainer_jsx(SplitPane.v,{direction:"vertical"===layout?"horizontal":"vertical",defaultSize:50,minSize:20,maxSize:80},showConsole&&RuntimeContainer_jsx(ConsoleOutput,{messages:consoleMessages,onClear:handleClearConsole}),showTerminal&&RuntimeContainer_jsx(Terminal,{container,onCommand:handleTerminalCommand,onOutput:handleTerminalOutput})))))};try{RuntimeContainer.displayName="RuntimeContainer",RuntimeContainer.__docgenInfo={description:"",displayName:"RuntimeContainer",props:{showPreview:{defaultValue:{value:"true"},description:"",name:"showPreview",required:!1,type:{name:"boolean | undefined"}},showConsole:{defaultValue:{value:"true"},description:"",name:"showConsole",required:!1,type:{name:"boolean | undefined"}},showTerminal:{defaultValue:{value:"true"},description:"",name:"showTerminal",required:!1,type:{name:"boolean | undefined"}},showBuildStatus:{defaultValue:{value:"true"},description:"",name:"showBuildStatus",required:!1,type:{name:"boolean | undefined"}},layout:{defaultValue:{value:"horizontal"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"horizontal"'},{value:'"vertical"'},{value:'"grid"'}]}},previewHeight:{defaultValue:{value:"50%"},description:"",name:"previewHeight",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/runtime/RuntimeContainer.tsx#RuntimeContainer"]={docgenInfo:RuntimeContainer.__docgenInfo,name:"RuntimeContainer",path:"src/editor/runtime/RuntimeContainer.tsx#RuntimeContainer"})}catch(__react_docgen_typescript_loader_error){}var git_branch=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/git-branch.js"),git_commit_horizontal=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/git-commit-horizontal.js"),icons_history=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/history.js"),file_diff=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/file-diff.js"),GitProvider=__webpack_require__("./src/editor/git/GitProvider.tsx"),GitStatus_jsx=react.createElement,GitStatus=function GitStatus(_ref){var _ref$showFiles=_ref.showFiles,showFiles=void 0===_ref$showFiles||_ref$showFiles,_ref$compact=_ref.compact,compact=void 0!==_ref$compact&&_ref$compact,_useGit=(0,GitProvider.Wo)(),status=_useGit.status,isLoading=_useGit.isLoading,error=_useGit.error;if(isLoading)return GitStatus_jsx("div",{style:{padding:compact?"4px 8px":"8px 12px",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,fontSize:12,color:"var(--slate-text-muted, #9ba1aa)"}},"Loading Git status...");if(error)return GitStatus_jsx("div",{style:{padding:compact?"4px 8px":"8px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,fontSize:12,color:"#ef4444",display:"flex",alignItems:"center",gap:6}},GitStatus_jsx(alert_circle.A,{size:14}),error.message);if(!status)return GitStatus_jsx("div",{style:{padding:compact?"4px 8px":"8px 12px",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,fontSize:12,color:"var(--slate-text-muted, #9ba1aa)"}},"Not a Git repository");var hasChanges=status.staged.length>0||status.not_added.length>0||status.modified.length>0||status.created.length>0||status.deleted.length>0;return GitStatus_jsx("div",{style:{display:"flex",flexDirection:"column",gap:compact?4:8,padding:compact?"4px 8px":"8px 12px",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4}},GitStatus_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},GitStatus_jsx(git_branch.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),GitStatus_jsx("span",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},status.current||"main"),status.tracking&&GitStatus_jsx("span",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)"}},"â†’ ",status.tracking),status.ahead>0&&GitStatus_jsx("span",{style:{fontSize:11,color:"#10b981"}},"â†‘ ",status.ahead),status.behind>0&&GitStatus_jsx("span",{style:{fontSize:11,color:"#f59e0b"}},"â†“ ",status.behind)),hasChanges&&GitStatus_jsx("div",{style:{display:"flex",alignItems:"center",gap:12,fontSize:11,color:"var(--slate-text-muted, #9ba1aa)"}},status.staged.length>0&&GitStatus_jsx("span",{style:{color:"#10b981"}},GitStatus_jsx(check_circle_2.A,{size:12,style:{display:"inline",marginRight:4}}),status.staged.length," staged"),status.modified.length>0&&GitStatus_jsx("span",{style:{color:"#f59e0b"}},status.modified.length," modified"),status.created.length>0&&GitStatus_jsx("span",{style:{color:"#3b82f6"}},status.created.length," created"),status.deleted.length>0&&GitStatus_jsx("span",{style:{color:"#ef4444"}},status.deleted.length," deleted")),showFiles&&hasChanges&&GitStatus_jsx("div",{style:{marginTop:4,paddingTop:8,borderTop:"1px solid var(--slate-border, #26292f)"}},status.staged.length>0&&GitStatus_jsx("div",{style:{marginBottom:8}},GitStatus_jsx("div",{style:{fontSize:11,fontWeight:500,color:"#10b981",marginBottom:4}},"Staged"),status.staged.map(function(file){return GitStatus_jsx("div",{key:file,style:{fontSize:11,color:"var(--slate-text, #e4e7eb)",padding:"2px 0",paddingLeft:8}},file)})),(status.not_added.length>0||status.modified.length>0||status.created.length>0||status.deleted.length>0)&&GitStatus_jsx("div",null,GitStatus_jsx("div",{style:{fontSize:11,fontWeight:500,color:"var(--slate-text-muted, #9ba1aa)",marginBottom:4}},"Changes"),[].concat((0,toConsumableArray.A)(status.modified),(0,toConsumableArray.A)(status.created),(0,toConsumableArray.A)(status.deleted)).map(function(file){return GitStatus_jsx("div",{key:file,style:{fontSize:11,color:"var(--slate-text, #e4e7eb)",padding:"2px 0",paddingLeft:8}},file)}))),!hasChanges&&GitStatus_jsx("div",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)",fontStyle:"italic"}},"No changes"))};GitStatus.displayName="GitStatus";try{GitStatus.displayName="GitStatus",GitStatus.__docgenInfo={description:"",displayName:"GitStatus",props:{showFiles:{defaultValue:{value:"true"},description:"",name:"showFiles",required:!1,type:{name:"boolean | undefined"}},compact:{defaultValue:{value:"false"},description:"",name:"compact",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/GitStatus.tsx#GitStatus"]={docgenInfo:GitStatus.__docgenInfo,name:"GitStatus",path:"src/editor/git/GitStatus.tsx#GitStatus"})}catch(__react_docgen_typescript_loader_error){}var minus=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/minus.js"),plus=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/plus.js"),check=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/check.js"),CommitPanel_console=__webpack_require__("./node_modules/console-browserify/index.js"),CommitPanel_jsx=react.createElement,CommitPanel=function CommitPanel(_ref){var onCommit=_ref.onCommit,_useGit=(0,GitProvider.Wo)(),status=_useGit.status,add=_useGit.add,commit=_useGit.commit,isLoading=_useGit.isLoading,_useState=(0,react.useState)(""),commitMessage=_useState[0],setCommitMessage=_useState[1],_useState2=(0,react.useState)(new Set),setSelectedFiles=(_useState2[0],_useState2[1]);if(!status)return CommitPanel_jsx("div",{style:{padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"Not a Git repository");var allChangedFiles=[].concat((0,toConsumableArray.A)(status.modified),(0,toConsumableArray.A)(status.created),(0,toConsumableArray.A)(status.deleted),(0,toConsumableArray.A)(status.not_added)),handleStageFile=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(file){var _t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=1,add([file]);case 1:setSelectedFiles(function(prev){var next=new Set(prev);return next.add(file),next}),_context.next=3;break;case 2:_context.prev=2,_t=_context.catch(0),CommitPanel_console.error("Failed to stage file:",_t);case 3:case"end":return _context.stop()}},_callee,null,[[0,2]])}));return function handleStageFile(_x){return _ref2.apply(this,arguments)}}(),handleUnstageFile=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(file){return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:try{setSelectedFiles(function(prev){var next=new Set(prev);return next.delete(file),next})}catch(error){CommitPanel_console.error("Failed to unstage file:",error)}case 1:case"end":return _context2.stop()}},_callee2)}));return function handleUnstageFile(_x2){return _ref3.apply(this,arguments)}}(),handleStageAll=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee3(){var _t2;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=1,add(allChangedFiles);case 1:setSelectedFiles(new Set(allChangedFiles)),_context3.next=3;break;case 2:_context3.prev=2,_t2=_context3.catch(0),CommitPanel_console.error("Failed to stage all files:",_t2);case 3:case"end":return _context3.stop()}},_callee3,null,[[0,2]])}));return function handleStageAll(){return _ref4.apply(this,arguments)}}(),handleCommit=function(){var _ref5=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee4(){var _t3;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(commitMessage.trim()){_context4.next=1;break}return _context4.abrupt("return");case 1:return _context4.prev=1,_context4.next=2,commit(commitMessage);case 2:setCommitMessage(""),setSelectedFiles(new Set),null==onCommit||onCommit(commitMessage),_context4.next=4;break;case 3:_context4.prev=3,_t3=_context4.catch(1),CommitPanel_console.error("Failed to commit:",_t3);case 4:case"end":return _context4.stop()}},_callee4,null,[[1,3]])}));return function handleCommit(){return _ref5.apply(this,arguments)}}();return CommitPanel_jsx("div",{style:{display:"flex",flexDirection:"column",gap:12,padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8}},CommitPanel_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},CommitPanel_jsx(git_commit_horizontal.A,{size:16,style:{color:"var(--slate-text, #e4e7eb)"}}),CommitPanel_jsx("span",{style:{fontSize:14,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},"Commit Changes")),status.staged.length>0&&CommitPanel_jsx("div",null,CommitPanel_jsx("div",{style:{fontSize:12,fontWeight:500,color:"#10b981",marginBottom:8}},"Staged (",status.staged.length,")"),CommitPanel_jsx("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,padding:8}},status.staged.map(function(file){return CommitPanel_jsx("div",{key:file,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",fontSize:11,color:"var(--slate-text, #e4e7eb)"}},CommitPanel_jsx("span",null,file),CommitPanel_jsx("button",{onClick:function onClick(){return handleUnstageFile(file)},style:{padding:"2px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:10}},CommitPanel_jsx(minus.A,{size:10})))}))),allChangedFiles.length>0&&CommitPanel_jsx("div",null,CommitPanel_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8}},CommitPanel_jsx("div",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text-muted, #9ba1aa)"}},"Changes (",allChangedFiles.length,")"),CommitPanel_jsx("button",{onClick:handleStageAll,style:{padding:"4px 8px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:"pointer",fontSize:11,display:"flex",alignItems:"center",gap:4}},CommitPanel_jsx(plus.A,{size:12}),"Stage All")),CommitPanel_jsx("div",{style:{maxHeight:200,overflowY:"auto",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,padding:8}},allChangedFiles.map(function(file){var isStaged=status.staged.includes(file);return CommitPanel_jsx("div",{key:file,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",fontSize:11,color:"var(--slate-text, #e4e7eb)",background:isStaged?"rgba(16, 185, 129, 0.1)":"transparent"}},CommitPanel_jsx("span",null,file),!isStaged&&CommitPanel_jsx("button",{onClick:function onClick(){return handleStageFile(file)},style:{padding:"2px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:10}},CommitPanel_jsx(plus.A,{size:10})))}))),CommitPanel_jsx("div",null,CommitPanel_jsx("div",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)",marginBottom:8}},"Commit Message"),CommitPanel_jsx("textarea",{value:commitMessage,onChange:function onChange(e){return setCommitMessage(e.target.value)},placeholder:"Enter commit message...",style:{width:"100%",minHeight:80,padding:8,background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,fontFamily:"inherit",resize:"vertical",outline:"none"}})),CommitPanel_jsx("button",{onClick:handleCommit,disabled:!commitMessage.trim()||0===status.staged.length||isLoading,style:{padding:"8px 16px",background:!commitMessage.trim()||0===status.staged.length||isLoading?"var(--slate-border, #26292f)":"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:!commitMessage.trim()||0===status.staged.length||isLoading?"not-allowed":"pointer",fontSize:12,fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:6}},CommitPanel_jsx(check.A,{size:14}),"Commit ",status.staged.length>0&&"(".concat(status.staged.length," file").concat(status.staged.length>1?"s":"",")")))};CommitPanel.displayName="CommitPanel";try{CommitPanel.displayName="CommitPanel",CommitPanel.__docgenInfo={description:"",displayName:"CommitPanel",props:{onCommit:{defaultValue:null,description:"",name:"onCommit",required:!1,type:{name:"((message: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/CommitPanel.tsx#CommitPanel"]={docgenInfo:CommitPanel.__docgenInfo,name:"CommitPanel",path:"src/editor/git/CommitPanel.tsx#CommitPanel"})}catch(__react_docgen_typescript_loader_error){}var BranchSelector_console=__webpack_require__("./node_modules/console-browserify/index.js"),BranchSelector_jsx=react.createElement,BranchSelector=function BranchSelector(_ref){var onBranchChange=_ref.onBranchChange,_useGit=(0,GitProvider.Wo)(),status=_useGit.status,getBranches=_useGit.getBranches,checkout=_useGit.checkout,createBranch=_useGit.createBranch,_useState=(_useGit.isLoading,(0,react.useState)([])),branches=_useState[0],setBranches=_useState[1],_useState2=(0,react.useState)(!1),isOpen=_useState2[0],setIsOpen=_useState2[1],_useState3=(0,react.useState)(""),newBranchName=_useState3[0],setNewBranchName=_useState3[1],_useState4=(0,react.useState)(!1),showCreateInput=_useState4[0],setShowCreateInput=_useState4[1];(0,react.useEffect)(function(){var loadBranches=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var branchList;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=1,getBranches();case 1:branchList=_context.sent,setBranches(branchList);case 2:case"end":return _context.stop()}},_callee)}));return function loadBranches(){return _ref2.apply(this,arguments)}}();loadBranches()},[getBranches,null==status?void 0:status.current]);var handleBranchSelect=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(branch){var _t;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=1,checkout(branch);case 1:setIsOpen(!1),null==onBranchChange||onBranchChange(branch),_context2.next=3;break;case 2:_context2.prev=2,_t=_context2.catch(0),BranchSelector_console.error("Failed to checkout branch:",_t);case 3:case"end":return _context2.stop()}},_callee2,null,[[0,2]])}));return function handleBranchSelect(_x){return _ref3.apply(this,arguments)}}(),handleCreateBranch=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee3(){var branchList,_t2;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(newBranchName.trim()){_context3.next=1;break}return _context3.abrupt("return");case 1:return _context3.prev=1,_context3.next=2,createBranch(newBranchName.trim());case 2:return setNewBranchName(""),setShowCreateInput(!1),_context3.next=3,getBranches();case 3:return branchList=_context3.sent,setBranches(branchList),_context3.next=4,checkout(newBranchName.trim());case 4:null==onBranchChange||onBranchChange(newBranchName.trim()),_context3.next=6;break;case 5:_context3.prev=5,_t2=_context3.catch(1),BranchSelector_console.error("Failed to create branch:",_t2);case 6:case"end":return _context3.stop()}},_callee3,null,[[1,5]])}));return function handleCreateBranch(){return _ref4.apply(this,arguments)}}(),currentBranch=(null==status?void 0:status.current)||"main";return BranchSelector_jsx("div",{style:{position:"relative"}},BranchSelector_jsx("button",{onClick:function onClick(){return setIsOpen(!isOpen)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12}},BranchSelector_jsx(git_branch.A,{size:14}),BranchSelector_jsx("span",null,currentBranch)),isOpen&&BranchSelector_jsx(react.Fragment,null,BranchSelector_jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3},onClick:function onClick(){return setIsOpen(!1)}}),BranchSelector_jsx("div",{style:{position:"absolute",top:"100%",left:0,marginTop:4,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1001,minWidth:200,maxHeight:300,overflowY:"auto"}},branches.map(function(branch){return BranchSelector_jsx("button",{key:branch,onClick:function onClick(){return handleBranchSelect(branch)},style:{width:"100%",padding:"8px 12px",background:branch===currentBranch?"rgba(63, 140, 255, 0.1)":"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",justifyContent:"space-between"},onMouseEnter:function onMouseEnter(e){branch!==currentBranch&&(e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)")},onMouseLeave:function onMouseLeave(e){branch!==currentBranch&&(e.currentTarget.style.background="transparent")}},BranchSelector_jsx("span",null,branch),branch===currentBranch&&BranchSelector_jsx(check.A,{size:14,style:{color:"var(--slate-accent, #3f8cff)"}}))}),BranchSelector_jsx("div",{style:{height:1,background:"var(--slate-border, #26292f)",margin:"4px 0"}}),showCreateInput?BranchSelector_jsx("div",{style:{padding:8}},BranchSelector_jsx("input",{type:"text",value:newBranchName,onChange:function onChange(e){return setNewBranchName(e.target.value)},onKeyDown:function onKeyDown(e){"Enter"===e.key?handleCreateBranch():"Escape"===e.key&&(setShowCreateInput(!1),setNewBranchName(""))},placeholder:"Branch name...",autoFocus:!0,style:{width:"100%",padding:"6px 8px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,outline:"none",marginBottom:4}}),BranchSelector_jsx("div",{style:{display:"flex",gap:4}},BranchSelector_jsx("button",{onClick:handleCreateBranch,style:{flex:1,padding:"4px 8px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:"pointer",fontSize:11}},"Create"),BranchSelector_jsx("button",{onClick:function onClick(){setShowCreateInput(!1),setNewBranchName("")},style:{flex:1,padding:"4px 8px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:11}},"Cancel"))):BranchSelector_jsx("button",{onClick:function onClick(){return setShowCreateInput(!0)},style:{width:"100%",padding:"8px 12px",background:"transparent",border:"none",textAlign:"left",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",gap:6},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},BranchSelector_jsx(plus.A,{size:14}),"Create new branch"))))};BranchSelector.displayName="BranchSelector";try{BranchSelector.displayName="BranchSelector",BranchSelector.__docgenInfo={description:"",displayName:"BranchSelector",props:{onBranchChange:{defaultValue:null,description:"",name:"onBranchChange",required:!1,type:{name:"((branch: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/BranchSelector.tsx#BranchSelector"]={docgenInfo:BranchSelector.__docgenInfo,name:"BranchSelector",path:"src/editor/git/BranchSelector.tsx#BranchSelector"})}catch(__react_docgen_typescript_loader_error){}var user=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/user.js"),calendar=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/calendar.js"),GitHistory_console=__webpack_require__("./node_modules/console-browserify/index.js"),GitHistory_jsx=react.createElement,GitHistory=function GitHistory(_ref){var _ref$limit=_ref.limit,limit=void 0===_ref$limit?50:_ref$limit,onCommitSelect=_ref.onCommitSelect,getCommits=(0,GitProvider.Wo)().getCommits,_useState=(0,react.useState)([]),commits=_useState[0],setCommits=_useState[1],_useState2=(0,react.useState)(!0),isLoading=_useState2[0],setIsLoading=_useState2[1];(0,react.useEffect)(function(){var loadCommits=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var commitList,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return setIsLoading(!0),_context.prev=1,_context.next=2,getCommits(limit);case 2:commitList=_context.sent,setCommits(commitList),_context.next=4;break;case 3:_context.prev=3,_t=_context.catch(1),GitHistory_console.error("Failed to load commits:",_t);case 4:return _context.prev=4,setIsLoading(!1),_context.finish(4);case 5:case"end":return _context.stop()}},_callee,null,[[1,3,4,5]])}));return function loadCommits(){return _ref2.apply(this,arguments)}}();loadCommits()},[getCommits,limit]);return isLoading?GitHistory_jsx("div",{style:{padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"Loading commit history..."):0===commits.length?GitHistory_jsx("div",{style:{padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"No commits found"):GitHistory_jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,maxHeight:400,overflowY:"auto"}},commits.map(function(commit){return GitHistory_jsx("div",{key:commit.hash,onClick:function onClick(){return null==onCommitSelect?void 0:onCommitSelect(commit)},style:{padding:12,background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-panel-hover, #1e2127)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="var(--slate-bg, #0f1115)"}},GitHistory_jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8}},GitHistory_jsx(git_commit_horizontal.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),GitHistory_jsx("code",{style:{fontSize:11,color:"var(--slate-accent, #3f8cff)",fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace'}},commit.hash.substring(0,7))),GitHistory_jsx("div",{style:{fontSize:13,fontWeight:500,color:"var(--slate-text, #e4e7eb)",marginBottom:8}},commit.message),GitHistory_jsx("div",{style:{display:"flex",alignItems:"center",gap:16,fontSize:11,color:"var(--slate-text-muted, #9ba1aa)"}},GitHistory_jsx("div",{style:{display:"flex",alignItems:"center",gap:4}},GitHistory_jsx(user.A,{size:12}),GitHistory_jsx("span",null,commit.author)),GitHistory_jsx("div",{style:{display:"flex",alignItems:"center",gap:4}},GitHistory_jsx(calendar.A,{size:12}),GitHistory_jsx("span",null,function formatDate(date){return date.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}(commit.date)))))}))};GitHistory.displayName="GitHistory";try{GitHistory.displayName="GitHistory",GitHistory.__docgenInfo={description:"",displayName:"GitHistory",props:{limit:{defaultValue:{value:"50"},description:"",name:"limit",required:!1,type:{name:"number | undefined"}},onCommitSelect:{defaultValue:null,description:"",name:"onCommitSelect",required:!1,type:{name:"((commit: GitCommit) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/GitHistory.tsx#GitHistory"]={docgenInfo:GitHistory.__docgenInfo,name:"GitHistory",path:"src/editor/git/GitHistory.tsx#GitHistory"})}catch(__react_docgen_typescript_loader_error){}var chevron_down=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-down.js"),chevron_right=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-right.js"),dist=__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs"),GitDiffViewer_console=__webpack_require__("./node_modules/console-browserify/index.js"),GitDiffViewer_jsx=react.createElement;function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return GitDiffViewer_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?GitDiffViewer_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function GitDiffViewer_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var GitDiffViewer=function GitDiffViewer(_ref){var file=_ref.file,commitHash=_ref.commitHash,_useGit=(0,GitProvider.Wo)(),getDiff=_useGit.getDiff,_useState=(_useGit.status,(0,react.useState)("")),diff=_useState[0],setDiff=_useState[1],_useState2=(0,react.useState)(!0),isLoading=_useState2[0],setIsLoading=_useState2[1],_useState3=(0,react.useState)(new Set),expandedFiles=_useState3[0],setExpandedFiles=_useState3[1];(0,react.useEffect)(function(){var loadDiff=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var diffText,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return setIsLoading(!0),_context.prev=1,_context.next=2,getDiff(file);case 2:diffText=_context.sent,setDiff(diffText),_context.next=4;break;case 3:_context.prev=3,_t=_context.catch(1),GitDiffViewer_console.error("Failed to load diff:",_t),setDiff("");case 4:return _context.prev=4,setIsLoading(!1),_context.finish(4);case 5:case"end":return _context.stop()}},_callee,null,[[1,3,4,5]])}));return function loadDiff(){return _ref2.apply(this,arguments)}}();loadDiff()},[getDiff,file,commitHash]);var diffChunks=function parseDiff(diffText){var _step,chunks=[],currentFile="",currentHeader="",currentContent=[],_iterator=_createForOfIteratorHelper(diffText.split("\n"));try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;line.startsWith("diff --git")?(currentFile&&chunks.push({file:currentFile,header:currentHeader,content:currentContent.join("\n")}),currentFile=line.split(" ")[3]||"",currentHeader=line,currentContent=[]):line.startsWith("---")||line.startsWith("+++")?currentHeader+="\n"+line:currentContent.push(line)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return currentFile&&chunks.push({file:currentFile,header:currentHeader,content:currentContent.join("\n")}),chunks}(diff);return isLoading?GitDiffViewer_jsx("div",{style:{padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"Loading diff..."):diff?file&&1===diffChunks.length?GitDiffViewer_jsx("div",{style:{height:"100%"}},GitDiffViewer_jsx(dist.Ay,{value:diff,language:"diff",height:"100%",theme:"vs-dark",options:{readOnly:!0,wordWrap:"on",lineNumbers:"on"}})):GitDiffViewer_jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,maxHeight:"100%",overflowY:"auto"}},diffChunks.map(function(chunk){var isExpanded=expandedFiles.has(chunk.file);return GitDiffViewer_jsx("div",{key:chunk.file,style:{border:"1px solid var(--slate-border, #26292f)",borderRadius:4,overflow:"hidden"}},GitDiffViewer_jsx("button",{onClick:function onClick(){return function toggleFile(file){setExpandedFiles(function(prev){var next=new Set(prev);return next.has(file)?next.delete(file):next.add(file),next})}(chunk.file)},style:{width:"100%",display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"var(--slate-bg, #0f1115)",border:"none",textAlign:"left",cursor:"pointer"}},GitDiffViewer_jsx(isExpanded?chevron_down.A:chevron_right.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),GitDiffViewer_jsx(file_diff.A,{size:14,style:{color:"var(--slate-text-muted, #9ba1aa)"}}),GitDiffViewer_jsx("span",{style:{fontSize:12,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},chunk.file)),isExpanded&&GitDiffViewer_jsx("div",{style:{borderTop:"1px solid var(--slate-border, #26292f)"}},GitDiffViewer_jsx(dist.Ay,{value:chunk.header+"\n"+chunk.content,language:"diff",height:"300px",theme:"vs-dark",options:{readOnly:!0,wordWrap:"on",lineNumbers:"on"}})))})):GitDiffViewer_jsx("div",{style:{padding:16,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderRadius:8,color:"var(--slate-text-muted, #9ba1aa)",fontSize:12}},"No changes to display")};GitDiffViewer.displayName="GitDiffViewer";try{GitDiffViewer.displayName="GitDiffViewer",GitDiffViewer.__docgenInfo={description:"",displayName:"GitDiffViewer",props:{file:{defaultValue:null,description:"",name:"file",required:!1,type:{name:"string | undefined"}},commitHash:{defaultValue:null,description:"",name:"commitHash",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/GitDiffViewer.tsx#GitDiffViewer"]={docgenInfo:GitDiffViewer.__docgenInfo,name:"GitDiffViewer",path:"src/editor/git/GitDiffViewer.tsx#GitDiffViewer"})}catch(__react_docgen_typescript_loader_error){}var process=__webpack_require__("./node_modules/process/browser.js"),GitPanel_jsx=react.createElement,GitPanel=function GitPanel(_ref){var _ref$workingDir=_ref.workingDir,workingDir=void 0===_ref$workingDir?process.cwd():_ref$workingDir,_useState=(0,react.useState)("status"),view=_useState[0],setView=_useState[1];return GitPanel_jsx(GitProvider.KN,{workingDir},GitPanel_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%",background:"var(--slate-panel, #16181d)",borderLeft:"1px solid var(--slate-border, #26292f)"}},GitPanel_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid var(--slate-border, #26292f)"}},GitPanel_jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},GitPanel_jsx(git_branch.A,{size:16,style:{color:"var(--slate-text, #e4e7eb)"}}),GitPanel_jsx("span",{style:{fontSize:14,fontWeight:500,color:"var(--slate-text, #e4e7eb)"}},"Git")),GitPanel_jsx(BranchSelector,null)),GitPanel_jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--slate-border, #26292f)"}},[{id:"status",label:"Status",icon:git_branch.A},{id:"commit",label:"Commit",icon:git_commit_horizontal.A},{id:"history",label:"History",icon:icons_history.A},{id:"diff",label:"Diff",icon:file_diff.A}].map(function(tab){var Icon=tab.icon,isActive=view===tab.id;return GitPanel_jsx("button",{key:tab.id,onClick:function onClick(){return setView(tab.id)},style:{flex:1,padding:"8px 12px",background:isActive?"var(--slate-bg, #0f1115)":"transparent",border:"none",borderBottom:isActive?"2px solid var(--slate-accent, #3f8cff)":"2px solid transparent",color:isActive?"var(--slate-text, #e4e7eb)":"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",gap:6}},GitPanel_jsx(Icon,{size:14}),GitPanel_jsx("span",null,tab.label))})),GitPanel_jsx("div",{style:{flex:1,overflowY:"auto",padding:16}},"status"===view&&GitPanel_jsx(GitStatus,{showFiles:!0}),"commit"===view&&GitPanel_jsx(CommitPanel,null),"history"===view&&GitPanel_jsx(GitHistory,null),"diff"===view&&GitPanel_jsx(GitDiffViewer,null))))};GitPanel.displayName="GitPanel";try{GitPanel.displayName="GitPanel",GitPanel.__docgenInfo={description:"",displayName:"GitPanel",props:{workingDir:{defaultValue:{value:"process.cwd()"},description:"",name:"workingDir",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/git/GitPanel.tsx#GitPanel"]={docgenInfo:GitPanel.__docgenInfo,name:"GitPanel",path:"src/editor/git/GitPanel.tsx#GitPanel"})}catch(__react_docgen_typescript_loader_error){}var SplitEditor_jsx=react.createElement,SplitEditor=function SplitEditor(_ref){var primaryFilePath=_ref.primaryFilePath,secondaryFilePath=_ref.secondaryFilePath,_ref$direction=_ref.direction,direction=void 0===_ref$direction?"horizontal":_ref$direction,_ref$defaultSize=_ref.defaultSize,defaultSize=void 0===_ref$defaultSize?50:_ref$defaultSize,fs=(_ref.onPrimaryFileChange,_ref.onSecondaryFileChange,(0,wissilFs.C)()),_useState=(0,react.useState)(primaryFilePath),primaryFile=_useState[0],_useState2=(_useState[1],(0,react.useState)(secondaryFilePath)),secondaryFile=_useState2[0];_useState2[1];return SplitEditor_jsx(SplitPane.v,{direction,defaultSize,minSize:20,maxSize:80},SplitEditor_jsx("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},primaryFile?SplitEditor_jsx(MonacoEditor.T,{filePath:primaryFile,height:"100%",onSave:function onSave(content){fs.writeFile(primaryFile,content)}}):SplitEditor_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"var(--slate-bg, #0f1115)",color:"var(--slate-text-muted, #9ba1aa)",fontSize:14}},"No file open")),SplitEditor_jsx("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},secondaryFile?SplitEditor_jsx(MonacoEditor.T,{filePath:secondaryFile,height:"100%",onSave:function onSave(content){fs.writeFile(secondaryFile,content)}}):SplitEditor_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"var(--slate-bg, #0f1115)",color:"var(--slate-text-muted, #9ba1aa)",fontSize:14}},"No file open")))};SplitEditor.displayName="SplitEditor";try{SplitEditor.displayName="SplitEditor",SplitEditor.__docgenInfo={description:"",displayName:"SplitEditor",props:{primaryFilePath:{defaultValue:null,description:"",name:"primaryFilePath",required:!1,type:{name:"string | undefined"}},secondaryFilePath:{defaultValue:null,description:"",name:"secondaryFilePath",required:!1,type:{name:"string | undefined"}},direction:{defaultValue:{value:"horizontal"},description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"horizontal"'},{value:'"vertical"'}]}},defaultSize:{defaultValue:{value:"50"},description:"",name:"defaultSize",required:!1,type:{name:"number | undefined"}},onPrimaryFileChange:{defaultValue:null,description:"",name:"onPrimaryFileChange",required:!1,type:{name:"((path: string) => void) | undefined"}},onSecondaryFileChange:{defaultValue:null,description:"",name:"onSecondaryFileChange",required:!1,type:{name:"((path: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/split/SplitEditor.tsx#SplitEditor"]={docgenInfo:SplitEditor.__docgenInfo,name:"SplitEditor",path:"src/editor/split/SplitEditor.tsx#SplitEditor"})}catch(__react_docgen_typescript_loader_error){}var EditorContainer_jsx=react.createElement,EditorContainer=function EditorContainer(_ref){var _openFiles$,_openFiles$2,_openFiles$3,_openFiles$4,_ref$initialFiles=_ref.initialFiles,initialFiles=void 0===_ref$initialFiles?[]:_ref$initialFiles,_ref$showRuntime=_ref.showRuntime,showRuntime=void 0===_ref$showRuntime||_ref$showRuntime,_ref$runtimeLayout=_ref.runtimeLayout,runtimeLayout=void 0===_ref$runtimeLayout?"horizontal":_ref$runtimeLayout,_ref$showGit=_ref.showGit,showGit=void 0===_ref$showGit||_ref$showGit,_ref$showSplitEditor=_ref.showSplitEditor,showSplitEditor=void 0!==_ref$showSplitEditor&&_ref$showSplitEditor,fs=(0,wissilFs.C)(),_useEditorStore=(0,editorStore.U)(),openFiles=_useEditorStore.openFiles,activeFilePath=_useEditorStore.activeFilePath,openFile=_useEditorStore.openFile,setActiveFile=_useEditorStore.setActiveFile,_useState=(0,react.useState)(!0),showPreview=_useState[0],_useState2=(_useState[1],(0,react.useState)(!1)),showGitPanel=_useState2[0],setShowGitPanel=_useState2[1];react.useEffect(function(){initialFiles.forEach(function(_ref2){var path=_ref2.path,content=_ref2.content;fs.exists(path)||fs.writeFile(path,content)})},[initialFiles,fs]);var _convertFSTree=function convertFSTree(node){var path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!node||"file"===node.type)return[];for(var children=[],_i=0,_Object$entries=Object.entries(node.children||{});_i<_Object$entries.length;_i++){var _Object$entries$_i=(0,slicedToArray.A)(_Object$entries[_i],2),name=_Object$entries$_i[0],child=_Object$entries$_i[1],childPath=path?"".concat(path,"/").concat(name):"/".concat(name);"file"===child.type?children.push({name,type:"file",path:childPath}):children.push({name,type:"folder",path:childPath,children:_convertFSTree(child,childPath)})}return children},fsTree=react.useMemo(function(){var snapshot=fs.getSnapshot();return _convertFSTree(snapshot)},[fs]);openFiles.map(function(file){return{id:file.path,label:file.path.split("/").pop()||file.path,dirty:file.isDirty}});return EditorContainer_jsx(AppShell.G,{sidebarVisible:!0,panelsVisible:!1,sidebar:EditorContainer_jsx(FileTree.h,{files:fsTree,onFileSelect:function handleFileSelect(path){openFile(path),setActiveFile(path)},defaultExpanded:["/src","/components"]}),topBar:EditorContainer_jsx(TopBar.V,{title:activeFilePath?activeFilePath.split("/").pop()||"Editor":"WISSIL IDE",showSaveIndicator:openFiles.some(function(f){return f.isDirty}),actions:showGit?EditorContainer_jsx("button",{onClick:function onClick(){return setShowGitPanel(!showGitPanel)},style:{padding:"6px 12px",background:showGitPanel?"var(--slate-accent, #3f8cff)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:showGitPanel?"#FFFFFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",fontSize:12}},"Git"):void 0})},EditorContainer_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},EditorContainer_jsx(TabManager,{onTabSelect:function handleTabSelect(tabId){setActiveFile(tabId)},onTabClose:function handleTabClose(tabId){(0,editorStore.U.getState().closeFile)(tabId)}}),EditorContainer_jsx("div",{style:{flex:1,display:"flex",position:"relative"}},showRuntime?EditorContainer_jsx(SplitPane.v,{direction:runtimeLayout,defaultSize:50,minSize:20,maxSize:80},EditorContainer_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},showSplitEditor&&openFiles.length>=2?EditorContainer_jsx(SplitEditor,{primaryFilePath:null===(_openFiles$=openFiles[0])||void 0===_openFiles$?void 0:_openFiles$.path,secondaryFilePath:null===(_openFiles$2=openFiles[1])||void 0===_openFiles$2?void 0:_openFiles$2.path,direction:"horizontal"===runtimeLayout?"vertical":"horizontal"}):activeFilePath?EditorContainer_jsx(MonacoEditor.T,{filePath:activeFilePath,height:"100%",onSave:function onSave(content){fs.writeFile(activeFilePath,content)}}):EditorContainer_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#0A0A0A",color:"#FFFFFF",fontSize:14}},"Select a file from the explorer to start editing")),EditorContainer_jsx(RuntimeContainer,{showPreview,showConsole:!0,showTerminal:!0,showBuildStatus:!0,layout:"horizontal"===runtimeLayout?"vertical":"horizontal"})):showSplitEditor&&openFiles.length>=2?EditorContainer_jsx(SplitEditor,{primaryFilePath:null===(_openFiles$3=openFiles[0])||void 0===_openFiles$3?void 0:_openFiles$3.path,secondaryFilePath:null===(_openFiles$4=openFiles[1])||void 0===_openFiles$4?void 0:_openFiles$4.path,direction:"horizontal"}):activeFilePath?EditorContainer_jsx(MonacoEditor.T,{filePath:activeFilePath,height:"100%",onSave:function onSave(content){fs.writeFile(activeFilePath,content)}}):EditorContainer_jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#0A0A0A",color:"#FFFFFF",fontSize:14}},"Select a file from the explorer to start editing"),showGit&&showGitPanel&&EditorContainer_jsx("div",{style:{width:400,height:"100%"}},EditorContainer_jsx(GitPanel,null)))))};EditorContainer.displayName="EditorContainer";try{EditorContainer.displayName="EditorContainer",EditorContainer.__docgenInfo={description:"",displayName:"EditorContainer",props:{initialFiles:{defaultValue:{value:"[]"},description:"",name:"initialFiles",required:!1,type:{name:"{ path: string; content: string; }[] | undefined"}},showRuntime:{defaultValue:{value:"true"},description:"",name:"showRuntime",required:!1,type:{name:"boolean | undefined"}},runtimeLayout:{defaultValue:{value:"horizontal"},description:"",name:"runtimeLayout",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"horizontal"'},{value:'"vertical"'}]}},showGit:{defaultValue:{value:"true"},description:"",name:"showGit",required:!1,type:{name:"boolean | undefined"}},showSplitEditor:{defaultValue:{value:"false"},description:"",name:"showSplitEditor",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/monaco/EditorContainer.tsx#EditorContainer"]={docgenInfo:EditorContainer.__docgenInfo,name:"EditorContainer",path:"src/editor/monaco/EditorContainer.tsx#EditorContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/monaco/MonacoEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>MonacoEditor});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs"),wissilFs=__webpack_require__("./src/wissil/runtime/fs/wissilFs.ts"),editorStore=__webpack_require__("./src/editor/monaco/editorStore.ts"),SearchReplace=__webpack_require__("./src/editor/monaco/SearchReplace.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function formatCode(_x){return _formatCode.apply(this,arguments)}function _formatCode(){return(_formatCode=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(editorInstance){var _editorInstance$getAc,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=1,null===(_editorInstance$getAc=editorInstance.getAction("editor.action.formatDocument"))||void 0===_editorInstance$getAc?void 0:_editorInstance$getAc.run();case 1:_context.next=3;break;case 2:throw _context.prev=2,_t=_context.catch(0),console.error("Formatting error:",_t),_t;case 3:case"end":return _context.stop()}},_callee,null,[[0,2]])}))).apply(this,arguments)}function formatSelection(_x2){return _formatSelection.apply(this,arguments)}function _formatSelection(){return(_formatSelection=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(editorInstance){var _editorInstance$getAc2,_t2;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=1,null===(_editorInstance$getAc2=editorInstance.getAction("editor.action.formatSelection"))||void 0===_editorInstance$getAc2?void 0:_editorInstance$getAc2.run();case 1:_context2.next=3;break;case 2:throw _context2.prev=2,_t2=_context2.catch(0),console.error("Format selection error:",_t2),_t2;case 3:case"end":return _context2.stop()}},_callee2,null,[[0,2]])}))).apply(this,arguments)}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),editor=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./node_modules/postcss-loader/dist/cjs.js!./src/styles/editor.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(editor.A,options);editor.A&&editor.A.locals&&editor.A.locals;var MonacoEditor_console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function createSlateTheme(){if("undefined"!=typeof window){var monaco=window.monaco;monaco&&monaco.editor&&monaco.editor.defineTheme("slate-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6B7280",fontStyle:"italic"},{token:"keyword",foreground:"A64DFF",fontStyle:"bold"},{token:"string",foreground:"47E0FF"},{token:"number",foreground:"F5B914"},{token:"type",foreground:"FF6B35"},{token:"function",foreground:"10B981"},{token:"variable",foreground:"E5E7EB"}],colors:{"editor.background":"#0A0A0A","editor.foreground":"#FFFFFF","editor.lineHighlightBackground":"#1A1A1A","editor.selectionBackground":"#A64DFF40","editor.selectionHighlightBackground":"#A64DFF20","editorCursor.foreground":"#47E0FF","editorWhitespace.foreground":"#2A2A2A","editorIndentGuide.activeBackground":"#2A2A2A","editorIndentGuide.background":"#1A1A1A","editorLineNumber.foreground":"#6B7280","editorLineNumber.activeForeground":"#9CA3AF","editorGutter.background":"#0A0A0A","editorWidget.background":"#1A1A1A","editorWidget.border":"#2A2A2A","editorSuggestWidget.background":"#1A1A1A","editorSuggestWidget.border":"#2A2A2A","editorSuggestWidget.selectedBackground":"#A64DFF40","editorHoverWidget.background":"#1A1A1A","editorHoverWidget.border":"#2A2A2A"}})}}var MonacoEditor=function MonacoEditor(_ref){var filePath=_ref.filePath,propLanguage=_ref.language,_ref$theme=_ref.theme,theme=void 0===_ref$theme?"slate-dark":_ref$theme,options=_ref.options,onChange=_ref.onChange,onSave=_ref.onSave,_ref$height=_ref.height,height=void 0===_ref$height?"100%":_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?"100%":_ref$width,_ref$showSearchReplac=_ref.showSearchReplace,showSearchReplace=void 0===_ref$showSearchReplac||_ref$showSearchReplac,_ref$formatOnSave=_ref.formatOnSave,formatOnSave=void 0===_ref$formatOnSave||_ref$formatOnSave,_ref$enableIntelliSen=_ref.enableIntelliSense,enableIntelliSense=void 0===_ref$enableIntelliSen||_ref$enableIntelliSen,fs=(0,wissilFs.C)(),editorRef=(0,react.useRef)(null),_useState=(0,react.useState)(""),value=_useState[0],setValue=_useState[1],_useState2=(0,react.useState)(!0),isLoading=_useState2[0],setIsLoading=_useState2[1],_useState3=(0,react.useState)(!1),searchReplaceVisible=_useState3[0],setSearchReplaceVisible=_useState3[1],_useEditorStore=(0,editorStore.U)(),setActiveEditor=_useEditorStore.setActiveEditor,markDirty=_useEditorStore.markDirty,markClean=_useEditorStore.markClean,language=propLanguage||(filePath?function detectLanguage(filePath){var _filePath$split$pop;return{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",json:"json",md:"markdown",mdx:"markdown",css:"css",scss:"scss",sass:"sass",html:"html",xml:"xml",yaml:"yaml",yml:"yaml",py:"python",java:"java",c:"c",cpp:"cpp",cs:"csharp",go:"go",rs:"rust",php:"php",rb:"ruby",sh:"shell",bash:"shell",zsh:"shell",sql:"sql",vue:"vue",svelte:"svelte"}[(null===(_filePath$split$pop=filePath.split(".").pop())||void 0===_filePath$split$pop?void 0:_filePath$split$pop.toLowerCase())||""]||"plaintext"}(filePath):"typescript");(0,react.useEffect)(function(){if(!filePath)return setValue(""),void setIsLoading(!1);var content=fs.readFile(filePath);null!==content?(setValue(content),setIsLoading(!1)):(setValue(""),setIsLoading(!1))},[filePath,fs]);var handleFormatDocument=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee3(){var _t;return regenerator_default().wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(editorRef.current){_context3.next=1;break}return _context3.abrupt("return");case 1:return _context3.prev=1,_context3.next=2,formatCode(editorRef.current);case 2:_context3.next=4;break;case 3:_context3.prev=3,_t=_context3.catch(1),MonacoEditor_console.error("Format error:",_t);case 4:case"end":return _context3.stop()}},_callee3,null,[[1,3]])}));return function handleFormatDocument(){return _ref4.apply(this,arguments)}}(),handleFormatSelection=function(){var _ref5=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee4(){var _t2;return regenerator_default().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(editorRef.current){_context4.next=1;break}return _context4.abrupt("return");case 1:return _context4.prev=1,_context4.next=2,formatSelection(editorRef.current);case 2:_context4.next=4;break;case 3:_context4.prev=3,_t2=_context4.catch(1),MonacoEditor_console.error("Format selection error:",_t2);case 4:case"end":return _context4.stop()}},_callee4,null,[[1,3]])}));return function handleFormatSelection(){return _ref5.apply(this,arguments)}}(),handleSave=function(){var _ref6=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee5(){var content,_t3;return regenerator_default().wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(filePath&&editorRef.current){_context5.next=1;break}return _context5.abrupt("return");case 1:if(!formatOnSave){_context5.next=5;break}return _context5.prev=2,_context5.next=3,formatCode(editorRef.current);case 3:_context5.next=5;break;case 4:_context5.prev=4,_t3=_context5.catch(2),MonacoEditor_console.error("Format on save error:",_t3);case 5:content=editorRef.current.getValue(),fs.writeFile(filePath,content),markClean(filePath),null==onSave||onSave(content);case 6:case"end":return _context5.stop()}},_callee5,null,[[2,4]])}));return function handleSave(){return _ref6.apply(this,arguments)}}(),defaultOptions=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({fontSize:14,fontFamily:'JetBrains Mono, Menlo, Monaco, "Courier New", monospace',lineNumbers:"on",lineNumbersMinChars:3,minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,wordWrap:"on",formatOnPaste:!0,formatOnType:!0,suggestOnTriggerCharacters:enableIntelliSense,acceptSuggestionOnCommitCharacter:enableIntelliSense,acceptSuggestionOnEnter:enableIntelliSense?"on":"off",quickSuggestions:!!enableIntelliSense&&{other:!0,comments:!0,strings:!0},quickSuggestionsDelay:100,parameterHints:{enabled:enableIntelliSense},hover:{enabled:enableIntelliSense},gotoLocation:{multiple:"goto",multipleDefinitions:"goto",multipleDeclarations:"goto",multipleImplementations:"goto",multipleReferences:"goto"},bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},codeActionsOnSave:{"source.fixAll":"explicit","source.organizeImports":"explicit"}},options);return isLoading?__jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height,width,background:"#0A0A0A",color:"#FFFFFF"}},"Loading editor..."):__jsx("div",{style:{position:"relative",height,width}},__jsx(dist.Ay,{height,width,language,theme,value,onChange:function handleChange(newValue){setValue(newValue||""),filePath&&markDirty(filePath),null==onChange||onChange(newValue)},onMount:function handleEditorDidMount(editor,monaco){editorRef.current=editor,setActiveEditor(editor,filePath||""),createSlateTheme(),setTimeout(function(){try{monaco.editor.setTheme(theme)}catch(e){createSlateTheme(),monaco.editor.setTheme(theme)}},100),editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,function(){handleSave()}),editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyF,function(){setSearchReplaceVisible(!0)}),editor.addCommand(monaco.KeyMod.Shift|monaco.KeyMod.Alt|monaco.KeyCode.KeyF,(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=1,handleFormatDocument();case 1:case"end":return _context.stop()}},_callee)}))),editor.addCommand(monaco.KeyMod.Shift|monaco.KeyMod.Alt|monaco.KeyCode.KeyF,(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(){var selection;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(selection=editor.getSelection())||selection.isEmpty()){_context2.next=2;break}return _context2.next=1,handleFormatSelection();case 1:_context2.next=3;break;case 2:return _context2.next=3,handleFormatDocument();case 3:case"end":return _context2.stop()}},_callee2)}))),enableIntelliSense&&(monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES2020,allowNonTsExtensions:!0,moduleResolution:monaco.languages.typescript.ModuleResolutionKind.NodeJs,module:monaco.languages.typescript.ModuleKind.ESNext,noEmit:!0,esModuleInterop:!0,jsx:monaco.languages.typescript.JsxEmit.React,reactNamespace:"React",allowJs:!0,typeRoots:["node_modules/@types"]}),monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1,noSuggestionDiagnostics:!1}),editor.updateOptions({quickSuggestions:{other:!0,comments:!0,strings:!0},suggestOnTriggerCharacters:!0,acceptSuggestionOnCommitCharacter:!0,acceptSuggestionOnEnter:"on",tabCompletion:"on",wordBasedSuggestions:"matchingDocuments"})),editor.focus()},options:defaultOptions,loading:__jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#0A0A0A",color:"#FFFFFF"}},"Loading Monaco Editor...")}),showSearchReplace&&__jsx(SearchReplace.P,{editor:editorRef.current,visible:searchReplaceVisible,onClose:function onClose(){return setSearchReplaceVisible(!1)}}))};MonacoEditor.displayName="MonacoEditor";try{MonacoEditor.displayName="MonacoEditor",MonacoEditor.__docgenInfo={description:"",displayName:"MonacoEditor",props:{filePath:{defaultValue:null,description:"",name:"filePath",required:!1,type:{name:"string | undefined"}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string | undefined"}},theme:{defaultValue:{value:"slate-dark"},description:"",name:"theme",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"vs-dark"'},{value:'"light"'},{value:'"slate-dark"'}]}},options:{defaultValue:null,description:"",name:"options",required:!1,type:{name:"IStandaloneEditorConstructionOptions | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string | undefined) => void) | undefined"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((value: string) => void) | undefined"}},height:{defaultValue:{value:"100%"},description:"",name:"height",required:!1,type:{name:"string | undefined"}},width:{defaultValue:{value:"100%"},description:"",name:"width",required:!1,type:{name:"string | undefined"}},showSearchReplace:{defaultValue:{value:"true"},description:"",name:"showSearchReplace",required:!1,type:{name:"boolean | undefined"}},formatOnSave:{defaultValue:{value:"true"},description:"",name:"formatOnSave",required:!1,type:{name:"boolean | undefined"}},enableIntelliSense:{defaultValue:{value:"true"},description:"",name:"enableIntelliSense",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/monaco/MonacoEditor.tsx#MonacoEditor"]={docgenInfo:MonacoEditor.__docgenInfo,name:"MonacoEditor",path:"src/editor/monaco/MonacoEditor.tsx#MonacoEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/monaco/SearchReplace.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>SearchReplace});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),lucide_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/case-sensitive.js"),lucide_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-down.js"),lucide_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-up.js"),lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/regex.js"),lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/replace.js"),lucide_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/search.js"),lucide_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/whole-word.js"),lucide_react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_1__.createElement,SearchReplace=function SearchReplace(_ref){var editor=_ref.editor,_ref$visible=_ref.visible,visible=void 0!==_ref$visible&&_ref$visible,onClose=_ref.onClose,_useState=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),searchTerm=_useState[0],setSearchTerm=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),replaceTerm=_useState2[0],setReplaceTerm=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),isRegex=_useState3[0],setIsRegex=_useState3[1],_useState4=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),isCaseSensitive=_useState4[0],setIsCaseSensitive=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),isWholeWord=_useState5[0],setIsWholeWord=_useState5[1],_useState6=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),matchCount=_useState6[0],setMatchCount=_useState6[1],_useState7=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),currentMatch=_useState7[0],setCurrentMatch=_useState7[1],_useState8=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),isReplaceMode=_useState8[0],setIsReplaceMode=_useState8[1],searchInputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),replaceInputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){visible&&searchInputRef.current&&searchInputRef.current.focus()},[visible]);var performSearch=function performSearch(){if(!editor||!searchTerm)return setMatchCount(0),void setCurrentMatch(0);var model=editor.getModel();if(model){var matches=model.findMatches(searchTerm,!1,!0,isRegex,isCaseSensitive,isWholeWord);if(setMatchCount(matches.length),setCurrentMatch(matches.length>0?1:0),matches.length>0){var firstMatch=matches[0];editor.setPosition(firstMatch.range.getStartPosition()),editor.setSelection(firstMatch.range),editor.revealLineInCenter(firstMatch.range.startLineNumber),editor.deltaDecorations([],matches.map(function(match){return{range:match.range,options:{className:"search-match",inlineClassName:"search-match"}}}))}}},goToNext=function goToNext(){if(editor&&searchTerm){var model=editor.getModel();if(model){var matches=model.findMatches(searchTerm,!1,!0,isRegex,isCaseSensitive,isWholeWord);if(0===matches.length)return setMatchCount(0),void setCurrentMatch(0);var nextIndex=currentMatch<matches.length?currentMatch:0,match=matches[nextIndex];editor.setPosition(match.range.getStartPosition()),editor.setSelection(match.range),editor.revealLineInCenter(match.range.startLineNumber),setCurrentMatch(nextIndex+1),setMatchCount(matches.length)}}},goToPrevious=function goToPrevious(){if(editor&&searchTerm){var model=editor.getModel();if(model){var matches=model.findMatches(searchTerm,!1,!0,isRegex,isCaseSensitive,isWholeWord);if(0===matches.length)return setMatchCount(0),void setCurrentMatch(0);var prevIndex=currentMatch>1?currentMatch-2:matches.length-1,match=matches[prevIndex];editor.setPosition(match.range.getStartPosition()),editor.setSelection(match.range),editor.revealLineInCenter(match.range.startLineNumber),setCurrentMatch(prevIndex+1),setMatchCount(matches.length)}}},replace=function replace(){if(editor&&searchTerm&&replaceTerm){var selection=editor.getSelection();if(selection){var model=editor.getModel();if(model){var selectedText=model.getValueInRange(selection),shouldReplace=!1;if(isRegex)shouldReplace=new RegExp(searchTerm,isCaseSensitive?"g":"gi").test(selectedText);else shouldReplace=isCaseSensitive?selectedText===searchTerm:selectedText.toLowerCase()===searchTerm.toLowerCase();shouldReplace&&(editor.executeEdits("replace",[{range:selection,text:replaceTerm}]),goToNext())}}}},replaceAll=function replaceAll(){if(editor&&searchTerm&&replaceTerm){var model=editor.getModel();if(model){var matches=model.findMatches(searchTerm,!1,!0,isRegex,isCaseSensitive,isWholeWord);if(0!==matches.length){var sortedMatches=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__.A)(matches).sort(function(a,b){return a.range.startLineNumber!==b.range.startLineNumber?b.range.startLineNumber-a.range.startLineNumber:b.range.startColumn-a.range.startColumn});editor.executeEdits("replaceAll",sortedMatches.map(function(match){return{range:match.range,text:replaceTerm}})),setMatchCount(0),setCurrentMatch(0)}}}};return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){searchTerm&&performSearch()},[isRegex,isCaseSensitive,isWholeWord]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){if(visible){var handleKeyDown=function handleKeyDown(e){var _searchInputRef$curre;(e.ctrlKey||e.metaKey)&&"f"===e.key?(e.preventDefault(),null===(_searchInputRef$curre=searchInputRef.current)||void 0===_searchInputRef$curre||_searchInputRef$curre.focus()):"Escape"===e.key?null==onClose||onClose():"Enter"===e.key&&e.shiftKey?(e.preventDefault(),goToPrevious()):"Enter"===e.key&&(e.preventDefault(),goToNext())};return window.addEventListener("keydown",handleKeyDown),function(){return window.removeEventListener("keydown",handleKeyDown)}}},[visible,onClose]),visible?__jsx("div",{style:{position:"absolute",top:0,right:0,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderTop:"none",borderRight:"none",borderRadius:"0 0 0 8px",padding:"8px 12px",zIndex:1e3,minWidth:400,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}},__jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8}},__jsx("div",{style:{position:"relative",flex:1}},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_7__.A,{size:16,style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:"var(--slate-text-muted, #9ba1aa)"}}),__jsx("input",{ref:searchInputRef,type:"text",placeholder:"Search",value:searchTerm,onChange:function onChange(e){setSearchTerm(e.target.value),setTimeout(performSearch,100)},style:{width:"100%",padding:"6px 8px 6px 32px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,outline:"none"},onKeyDown:function onKeyDown(e){"Enter"===e.key&&e.shiftKey?(e.preventDefault(),goToPrevious()):"Enter"===e.key&&(e.preventDefault(),goToNext())}})),searchTerm&&__jsx("div",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)",whiteSpace:"nowrap",minWidth:60,textAlign:"right"}},currentMatch>0?"".concat(currentMatch," / ").concat(matchCount):"0 / 0"),__jsx("button",{onClick:goToPrevious,disabled:0===matchCount,style:{padding:"4px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:matchCount>0?"pointer":"not-allowed",opacity:matchCount>0?1:.5,display:"flex",alignItems:"center"},title:"Previous (Shift+Enter)"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{size:14})),__jsx("button",{onClick:goToNext,disabled:0===matchCount,style:{padding:"4px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:matchCount>0?"pointer":"not-allowed",opacity:matchCount>0?1:.5,display:"flex",alignItems:"center"},title:"Next (Enter)"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_3__.A,{size:14})),__jsx("button",{onClick:function onClick(){return setIsRegex(!isRegex)},style:{padding:"4px 6px",background:isRegex?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:isRegex?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Regex"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{size:14})),__jsx("button",{onClick:function onClick(){return setIsCaseSensitive(!isCaseSensitive)},style:{padding:"4px 6px",background:isCaseSensitive?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:isCaseSensitive?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Case Sensitive"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_2__.A,{size:14})),__jsx("button",{onClick:function onClick(){return setIsWholeWord(!isWholeWord)},style:{padding:"4px 6px",background:isWholeWord?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:isWholeWord?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Whole Word"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_8__.A,{size:14})),__jsx("button",{onClick:onClose,style:{padding:"4px 6px",background:"transparent",border:"none",color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Close (Esc)"},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_9__.A,{size:14}))),isReplaceMode&&__jsx("div",{style:{display:"flex",alignItems:"center",gap:8}},__jsx("div",{style:{position:"relative",flex:1}},__jsx(lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{size:16,style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:"var(--slate-text-muted, #9ba1aa)"}}),__jsx("input",{ref:replaceInputRef,type:"text",placeholder:"Replace",value:replaceTerm,onChange:function onChange(e){return setReplaceTerm(e.target.value)},style:{width:"100%",padding:"6px 8px 6px 32px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,outline:"none"},onKeyDown:function onKeyDown(e){"Enter"===e.key&&e.ctrlKey?(e.preventDefault(),replaceAll()):"Enter"===e.key&&(e.preventDefault(),replace())}})),__jsx("button",{onClick:replace,disabled:!searchTerm||!replaceTerm,style:{padding:"6px 12px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:searchTerm&&replaceTerm?"pointer":"not-allowed",opacity:searchTerm&&replaceTerm?1:.5,fontSize:12}},"Replace"),__jsx("button",{onClick:replaceAll,disabled:!searchTerm||!replaceTerm,style:{padding:"6px 12px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:searchTerm&&replaceTerm?"pointer":"not-allowed",opacity:searchTerm&&replaceTerm?1:.5,fontSize:12}},"Replace All")),__jsx("div",{style:{marginTop:4}},__jsx("button",{onClick:function onClick(){return setIsReplaceMode(!isReplaceMode)},style:{padding:"4px 8px",background:"transparent",border:"none",color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:11,textDecoration:isReplaceMode?"underline":"none"}},isReplaceMode?"â–¼ Replace":"â–¶ Replace"))):null};SearchReplace.displayName="SearchReplace";try{SearchReplace.displayName="SearchReplace",SearchReplace.__docgenInfo={description:"",displayName:"SearchReplace",props:{editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"IStandaloneCodeEditor | null"}},visible:{defaultValue:{value:"false"},description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/monaco/SearchReplace.tsx#SearchReplace"]={docgenInfo:SearchReplace.__docgenInfo,name:"SearchReplace",path:"src/editor/monaco/SearchReplace.tsx#SearchReplace"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/monaco/editorStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>useEditorStore});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var useEditorStore=(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").vt)(function(set,get){return{openFiles:[],activeFilePath:null,activeEditor:null,openFile:function openFile(path,language){var openFiles=get().openFiles;if(openFiles.find(function(f){return f.path===path}))set({activeFilePath:path});else{var newFile={path,language,isDirty:!1};set({openFiles:[].concat((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(openFiles),[newFile]),activeFilePath:path})}},closeFile:function closeFile(path){var _get2=get(),openFiles=_get2.openFiles,activeFilePath=_get2.activeFilePath,filtered=openFiles.filter(function(f){return f.path!==path}),newActive=activeFilePath;if(activeFilePath===path){var _filtered$nextIndex,index=openFiles.findIndex(function(f){return f.path===path});if(filtered.length>0)newActive=(null===(_filtered$nextIndex=filtered[index<filtered.length?index:filtered.length-1])||void 0===_filtered$nextIndex?void 0:_filtered$nextIndex.path)||null;else newActive=null}set({openFiles:filtered,activeFilePath:newActive,activeEditor:newActive===activeFilePath?null:get().activeEditor})},setActiveFile:function setActiveFile(path){set({activeFilePath:path})},setActiveEditor:function setActiveEditor(editor,path){set({activeEditor:editor,activeFilePath:path})},markDirty:function markDirty(path){var updated=get().openFiles.map(function(f){return f.path===path?_objectSpread(_objectSpread({},f),{},{isDirty:!0}):f});set({openFiles:updated})},markClean:function markClean(path){var updated=get().openFiles.map(function(f){return f.path===path?_objectSpread(_objectSpread({},f),{},{isDirty:!1,lastSaved:new Date}):f});set({openFiles:updated})},isDirty:function isDirty(path){var file=get().openFiles.find(function(f){return f.path===path});return(null==file?void 0:file.isDirty)||!1},hasUnsavedChanges:function hasUnsavedChanges(){return get().openFiles.some(function(f){return f.isDirty})},closeAllFiles:function closeAllFiles(){set({openFiles:[],activeFilePath:null,activeEditor:null})},closeOtherFiles:function closeOtherFiles(path){var kept=get().openFiles.filter(function(f){return f.path===path});set({openFiles:kept,activeFilePath:path})}}})},"./src/editor/shell/AppShell.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>AppShell});var __jsx=__webpack_require__("./node_modules/next/dist/compiled/react/index.js").createElement,AppShell=function AppShell(_ref){var children=_ref.children,_ref$sidebarVisible=_ref.sidebarVisible,sidebarVisible=void 0===_ref$sidebarVisible||_ref$sidebarVisible,_ref$panelsVisible=_ref.panelsVisible,panelsVisible=void 0===_ref$panelsVisible||_ref$panelsVisible,_ref$fullscreen=_ref.fullscreen,fullscreen=void 0!==_ref$fullscreen&&_ref$fullscreen,sidebar=_ref.sidebar,topBar=_ref.topBar,panels=_ref.panels;return __jsx("div",{style:{display:"flex",height:"100vh",background:"var(--slate-bg, #0f1115)",fontFamily:"var(--font-primary, system-ui)",overflow:"hidden"}},sidebarVisible&&!fullscreen&&sidebar&&__jsx("div",{style:{width:250,background:"var(--slate-panel, #16181d)",borderRight:"1px solid var(--slate-border, #26292f)",display:"flex",flexDirection:"column",overflow:"hidden"}},sidebar),__jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"}},topBar&&__jsx("div",{style:{height:40,background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)",display:"flex",alignItems:"center"}},topBar),__jsx("div",{style:{flex:1,display:"flex",overflow:"hidden"}},__jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"}},children),panelsVisible&&!fullscreen&&panels&&__jsx("div",{style:{width:300,background:"var(--slate-panel, #16181d)",borderLeft:"1px solid var(--slate-border, #26292f)",display:"flex",flexDirection:"column",overflow:"hidden"}},panels))))};AppShell.displayName="AppShell";try{AppShell.displayName="AppShell",AppShell.__docgenInfo={description:"",displayName:"AppShell",props:{sidebarVisible:{defaultValue:{value:"true"},description:"",name:"sidebarVisible",required:!1,type:{name:"boolean | undefined"}},panelsVisible:{defaultValue:{value:"true"},description:"",name:"panelsVisible",required:!1,type:{name:"boolean | undefined"}},fullscreen:{defaultValue:{value:"false"},description:"",name:"fullscreen",required:!1,type:{name:"boolean | undefined"}},sidebar:{defaultValue:null,description:"",name:"sidebar",required:!1,type:{name:"ReactNode"}},topBar:{defaultValue:null,description:"",name:"topBar",required:!1,type:{name:"ReactNode"}},panels:{defaultValue:null,description:"",name:"panels",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/shell/AppShell.tsx#AppShell"]={docgenInfo:AppShell.__docgenInfo,name:"AppShell",path:"src/editor/shell/AppShell.tsx#AppShell"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/shell/SplitPane.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>SplitPane});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,SplitPane=function SplitPane(_ref){var _ref$direction=_ref.direction,direction=void 0===_ref$direction?"horizontal":_ref$direction,_ref$defaultSize=_ref.defaultSize,defaultSize=void 0===_ref$defaultSize?50:_ref$defaultSize,_ref$minSize=_ref.minSize,minSize=void 0===_ref$minSize?10:_ref$minSize,_ref$maxSize=_ref.maxSize,maxSize=void 0===_ref$maxSize?90:_ref$maxSize,children=_ref.children,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultSize),size=_useState[0],setSize=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),isDragging=_useState2[0],setIsDragging=_useState2[1],containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){if(isDragging){var handleMouseMove=function handleMouseMove(e){if(containerRef.current){var newSize,rect=containerRef.current.getBoundingClientRect();newSize="horizontal"===direction?(e.clientX-rect.left)/rect.width*100:(e.clientY-rect.top)/rect.height*100,newSize=Math.max(minSize,Math.min(maxSize,newSize)),setSize(newSize)}},handleMouseUp=function handleMouseUp(){setIsDragging(!1)};return window.addEventListener("mousemove",handleMouseMove),window.addEventListener("mouseup",handleMouseUp),function(){window.removeEventListener("mousemove",handleMouseMove),window.removeEventListener("mouseup",handleMouseUp)}}},[isDragging,direction,minSize,maxSize]);var isHorizontal="horizontal"===direction;return __jsx("div",{ref:containerRef,style:{display:"flex",flexDirection:isHorizontal?"row":"column",width:"100%",height:"100%",overflow:"hidden"}},__jsx("div",{style:{width:isHorizontal?"".concat(size,"%"):"100%",height:isHorizontal?"100%":"".concat(size,"%"),overflow:"auto"}},children[0]),__jsx("div",{onMouseDown:function handleMouseDown(){setIsDragging(!0)},style:{width:isHorizontal?4:"100%",height:isHorizontal?"100%":4,background:isDragging?"var(--slate-accent, #3f8cff)":"var(--slate-border, #26292f)",cursor:isHorizontal?"col-resize":"row-resize",transition:isDragging?"none":"background 0.2s",position:"relative",zIndex:10}}),__jsx("div",{style:{width:isHorizontal?"".concat(100-size,"%"):"100%",height:isHorizontal?"100%":"".concat(100-size,"%"),overflow:"auto"}},children[1]))};SplitPane.displayName="SplitPane";try{SplitPane.displayName="SplitPane",SplitPane.__docgenInfo={description:"",displayName:"SplitPane",props:{direction:{defaultValue:{value:"horizontal"},description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"horizontal"'},{value:'"vertical"'}]}},defaultSize:{defaultValue:{value:"50"},description:"",name:"defaultSize",required:!1,type:{name:"number | undefined"}},minSize:{defaultValue:{value:"10"},description:"",name:"minSize",required:!1,type:{name:"number | undefined"}},maxSize:{defaultValue:{value:"90"},description:"",name:"maxSize",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/shell/SplitPane.tsx#SplitPane"]={docgenInfo:SplitPane.__docgenInfo,name:"SplitPane",path:"src/editor/shell/SplitPane.tsx#SplitPane"})}catch(__react_docgen_typescript_loader_error){}},"./src/editor/shell/TopBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>TopBar});var __jsx=__webpack_require__("./node_modules/next/dist/compiled/react/index.js").createElement,TopBar=function TopBar(_ref){var _ref$title=_ref.title,title=void 0===_ref$title?"WISSIL IDE":_ref$title,_ref$menuItems=_ref.menuItems,menuItems=void 0===_ref$menuItems?[{id:"file",label:"File"},{id:"edit",label:"Edit"},{id:"view",label:"View"},{id:"run",label:"Run"},{id:"help",label:"Help"}]:_ref$menuItems,onMenuItemClick=_ref.onMenuItemClick,_ref$showCommandPalet=_ref.showCommandPalette,showCommandPalette=void 0===_ref$showCommandPalet||_ref$showCommandPalet,onCommandPaletteClick=_ref.onCommandPaletteClick,_ref$showSaveIndicato=_ref.showSaveIndicator,showSaveIndicator=void 0!==_ref$showSaveIndicato&&_ref$showSaveIndicato;return __jsx("div",{style:{height:40,background:"var(--slate-panel, #16181d)",borderBottom:"1px solid var(--slate-border, #26292f)",display:"flex",alignItems:"center",padding:"0 8px",gap:16}},__jsx("div",{style:{color:"var(--slate-text, #e4e7eb)",fontWeight:"bold",fontSize:13,marginRight:16}},title),__jsx("div",{style:{display:"flex",gap:4}},menuItems.map(function(item){return __jsx("button",{key:item.id,onClick:function onClick(){return null==onMenuItemClick?void 0:onMenuItemClick(item.id)},style:{padding:"4px 8px",background:"transparent",border:"none",color:"var(--slate-text, #e4e7eb)",cursor:"pointer",borderRadius:4,fontSize:12,transition:"background 0.2s"},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.background="var(--slate-bg, #0f1115)"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.background="transparent"}},item.label)})),__jsx("div",{style:{flex:1}}),showCommandPalette&&__jsx("button",{onClick:onCommandPaletteClick,style:{padding:"4px 12px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:11,display:"flex",alignItems:"center",gap:4},title:"Command Palette (Ctrl+P)"},__jsx("span",null,"âŒ˜"),__jsx("span",null,"P")),showSaveIndicator&&__jsx("div",{style:{padding:"4px 8px",background:"rgba(63, 140, 255, 0.1)",borderRadius:4,fontSize:11,color:"var(--slate-accent, #3f8cff)"}},"â— Unsaved"))};TopBar.displayName="TopBar";try{TopBar.displayName="TopBar",TopBar.__docgenInfo={description:"",displayName:"TopBar",props:{title:{defaultValue:{value:"WISSIL IDE"},description:"",name:"title",required:!1,type:{name:"string | undefined"}},menuItems:{defaultValue:{value:"[\n    { id: 'file', label: 'File' },\n    { id: 'edit', label: 'Edit' },\n    { id: 'view', label: 'View' },\n    { id: 'run', label: 'Run' },\n    { id: 'help', label: 'Help' },\n  ]"},description:"",name:"menuItems",required:!1,type:{name:"MenuItem[] | undefined"}},onMenuItemClick:{defaultValue:null,description:"",name:"onMenuItemClick",required:!1,type:{name:"((itemId: string) => void) | undefined"}},showCommandPalette:{defaultValue:{value:"true"},description:"",name:"showCommandPalette",required:!1,type:{name:"boolean | undefined"}},onCommandPaletteClick:{defaultValue:null,description:"",name:"onCommandPaletteClick",required:!1,type:{name:"(() => void) | undefined"}},showSaveIndicator:{defaultValue:{value:"false"},description:"",name:"showSaveIndicator",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/editor/shell/TopBar.tsx#TopBar"]={docgenInfo:TopBar.__docgenInfo,name:"TopBar",path:"src/editor/shell/TopBar.tsx#TopBar"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/runtime/fs/pathUtils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function splitPath(path){return path.replace(/^\//,"").split("/").filter(Boolean)}function normalizePath(path){var _step,resolved=[],_iterator=_createForOfIteratorHelper(splitPath(path));try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;"."!==part&&(".."===part?resolved.pop():resolved.push(part))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return resolved.join("/")}function joinPath(){for(var _len=arguments.length,segments=new Array(_len),_key=0;_key<_len;_key++)segments[_key]=arguments[_key];return segments.filter(Boolean).join("/").replace(/\/+/g,"/")}__webpack_require__.d(__webpack_exports__,{Fd:()=>normalizePath,Uf:()=>splitPath,uJ:()=>joinPath})},"./src/wissil/runtime/fs/wissilFs.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C:()=>useWissilFS});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toArray.js"),_pathUtils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/wissil/runtime/fs/pathUtils.ts");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function ensureFolder(folder,parts){if(0===parts.length)return folder;var _parts=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(parts),head=_parts[0],rest=_arrayLikeToArray(_parts).slice(1);folder.children[head]||(folder.children[head]={type:"folder",children:{}});var next=folder.children[head];if("folder"!==next.type)throw new Error("Cannot create folder: ".concat(head," already exists as a file"));return ensureFolder(next,rest)}function navigateToFolder(root,parts){var _step,current=root,_iterator=_createForOfIteratorHelper(parts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;if("folder"!==current.type)return null;var next=current.children[part];if(!next||"folder"!==next.type)return null;current=next}}catch(err){_iterator.e(err)}finally{_iterator.f()}return"folder"===current.type?current:null}var useWissilFS=(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").vt)(function(set,get){return{root:{type:"folder",children:{}},writeFile:function writeFile(path,content){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);if(0===parts.length)throw new Error("Cannot write to root path");var fileName=parts.pop();ensureFolder(get().root,parts).children[fileName]={type:"file",content},set({root:_objectSpread({},get().root)})},readFile:function readFile(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);if(0===parts.length)return null;var fileName=parts.pop(),folder=navigateToFolder(get().root,parts);if(!folder)return null;var node=folder.children[fileName];return node&&"file"===node.type?node.content:null},deleteFile:function deleteFile(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);if(0!==parts.length){var fileName=parts.pop(),folder=navigateToFolder(get().root,parts);folder&&(delete folder.children[fileName],set({root:_objectSpread({},get().root)}))}},exists:function exists(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);if(0===parts.length)return!0;var fileName=parts.pop(),folder=navigateToFolder(get().root,parts);return!!folder&&fileName in folder.children},createFolder:function createFolder(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);0!==parts.length&&(ensureFolder(get().root,parts),set({root:_objectSpread({},get().root)}))},deleteFolder:function deleteFolder(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path);if(0!==parts.length){var folderName=parts.pop(),parent=navigateToFolder(get().root,parts);if(parent){var folder=parent.children[folderName];folder&&"folder"===folder.type&&(delete parent.children[folderName],set({root:_objectSpread({},get().root)}))}}else set({root:{type:"folder",children:{}}})},listDirectory:function listDirectory(path){var parts=(0,_pathUtils__WEBPACK_IMPORTED_MODULE_2__.Uf)(path),folder=navigateToFolder(get().root,parts);return folder?Object.keys(folder.children):[]},getSnapshot:function getSnapshot(){return JSON.parse(JSON.stringify(get().root))},hydrate:function hydrate(tree){set({root:tree})},clear:function clear(){set({root:{type:"folder",children:{}}})}}})}}]);