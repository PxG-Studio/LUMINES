"use strict";(self.webpackChunklumines_wissil=self.webpackChunklumines_wissil||[]).push([[9207],{"./src/wissil/Ignis/IgnisContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>IgnisContainer});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Button=__webpack_require__("./src/design-system/primitives/Button.tsx"),ThemeProvider=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisDeviceSelector(_ref){var device=_ref.device,setDevice=_ref.setDevice,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return __jsx("div",{className,style:_objectSpread({display:"flex",gap:theme.spacing.xs},style)},["desktop","tablet","mobile"].map(function(t){return __jsx(Button.$,{key:t,variant:device===t?"accent":"ghost",onClick:function onClick(){return setDevice(t)},style:{padding:"4px 10px",fontSize:theme.typography.size.sm,textTransform:"capitalize"}},t[0].toUpperCase()+t.slice(1))}))}IgnisDeviceSelector.displayName="IgnisDeviceSelector";try{IgnisDeviceSelector.displayName="IgnisDeviceSelector",IgnisDeviceSelector.__docgenInfo={description:"",displayName:"IgnisDeviceSelector",props:{device:{defaultValue:null,description:"",name:"device",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"tablet"'},{value:'"mobile"'}]}},setDevice:{defaultValue:null,description:"",name:"setDevice",required:!0,type:{name:"(device: DeviceType) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisDeviceSelector.tsx#IgnisDeviceSelector"]={docgenInfo:IgnisDeviceSelector.__docgenInfo,name:"IgnisDeviceSelector",path:"src/wissil/Ignis/IgnisDeviceSelector.tsx#IgnisDeviceSelector"})}catch(__react_docgen_typescript_loader_error){}var IgnisFPSMeter_jsx=react.createElement;function IgnisFPSMeter_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisFPSMeter_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisFPSMeter_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisFPSMeter_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisFPSMeter(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)(60),fps=_useState[0],setFps=_useState[1];return(0,react.useEffect)(function(){var interval=setInterval(function(){setFps(55+Math.round(10*Math.random()))},700);return function(){return clearInterval(interval)}},[]),IgnisFPSMeter_jsx("div",{className,style:IgnisFPSMeter_objectSpread({fontSize:theme.typography.size.sm,color:theme.colors.text2,fontFamily:theme.typography.font},style)},fps," FPS")}IgnisFPSMeter.displayName="IgnisFPSMeter";try{IgnisFPSMeter.displayName="IgnisFPSMeter",IgnisFPSMeter.__docgenInfo={description:"",displayName:"IgnisFPSMeter",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisFPSMeter.tsx#IgnisFPSMeter"]={docgenInfo:IgnisFPSMeter.__docgenInfo,name:"IgnisFPSMeter",path:"src/wissil/Ignis/IgnisFPSMeter.tsx#IgnisFPSMeter"})}catch(__react_docgen_typescript_loader_error){}var IgnisFullscreenButton_jsx=react.createElement;function IgnisFullscreenButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisFullscreenButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisFullscreenButton_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisFullscreenButton_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisFullscreenButton(_ref){var onFullscreen=_ref.onFullscreen,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return IgnisFullscreenButton_jsx(Button.$,{variant:"ghost",onClick:function handleClick(){onFullscreen?onFullscreen():alert("Fullscreen placeholder - will be wired to Unity canvas in Phase 4")},className,style:IgnisFullscreenButton_objectSpread({padding:"4px 10px",fontSize:theme.typography.size.sm},style)},"Fullscreen")}IgnisFullscreenButton.displayName="IgnisFullscreenButton";try{IgnisFullscreenButton.displayName="IgnisFullscreenButton",IgnisFullscreenButton.__docgenInfo={description:"",displayName:"IgnisFullscreenButton",props:{onFullscreen:{defaultValue:null,description:"",name:"onFullscreen",required:!1,type:{name:"(() => void) | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisFullscreenButton.tsx#IgnisFullscreenButton"]={docgenInfo:IgnisFullscreenButton.__docgenInfo,name:"IgnisFullscreenButton",path:"src/wissil/Ignis/IgnisFullscreenButton.tsx#IgnisFullscreenButton"})}catch(__react_docgen_typescript_loader_error){}var IgnisCanvasPlaceholder_jsx=react.createElement;function IgnisCanvasPlaceholder_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisCanvasPlaceholder_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisCanvasPlaceholder_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisCanvasPlaceholder_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisCanvasPlaceholder(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return IgnisCanvasPlaceholder_jsx("div",{className,style:IgnisCanvasPlaceholder_objectSpread({position:"absolute",inset:0,width:"100%",height:"100%",background:"repeating-linear-gradient(\n          45deg,\n          ".concat(theme.colors.bg2,",\n          ").concat(theme.colors.bg2," 10px,\n          ").concat(theme.colors.bg1," 10px,\n          ").concat(theme.colors.bg1," 20px\n        )"),color:theme.colors.text2,display:"flex",alignItems:"center",justifyContent:"center",fontSize:theme.typography.size.md,opacity:.25},style)},"Unity WebGL will render here")}IgnisCanvasPlaceholder.displayName="IgnisCanvasPlaceholder";try{IgnisCanvasPlaceholder.displayName="IgnisCanvasPlaceholder",IgnisCanvasPlaceholder.__docgenInfo={description:"",displayName:"IgnisCanvasPlaceholder",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisCanvasPlaceholder.tsx#IgnisCanvasPlaceholder"]={docgenInfo:IgnisCanvasPlaceholder.__docgenInfo,name:"IgnisCanvasPlaceholder",path:"src/wissil/Ignis/IgnisCanvasPlaceholder.tsx#IgnisCanvasPlaceholder"})}catch(__react_docgen_typescript_loader_error){}var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),unityBridge=__webpack_require__("./src/wissil/IgnisWebGL/unityBridge.ts"),editorState=__webpack_require__("./src/state/editorState.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js"),messagingSetup=!1;function setupUnityMessaging(){if(!messagingSetup){var state=editorState.e.getState(),originalLog=console.log,originalError=console.error,originalWarn=console.warn;console.log=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];originalLog.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.pushMessage("[Unity] ".concat(message))},console.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];originalError.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.setRuntimeError("Unity Error: ".concat(message)),state.pushMessage("❌ [Unity Error] ".concat(message))},console.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];originalWarn.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.pushMessage("⚠️ [Unity Warning] ".concat(message))},messagingSetup=!0}}var unityMount_jsx=react.createElement;function unityMount_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function unityMount_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?unityMount_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):unityMount_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function UnityMount(_ref){var _ref$buildUrl=_ref.buildUrl,buildUrl=void 0===_ref$buildUrl?"/UnityBuild":_ref$buildUrl,_ref$enabled=_ref.enabled,enabled=void 0===_ref$enabled||_ref$enabled,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),containerRef=(0,react.useRef)(null),_useState=(0,react.useState)(!1),loading=_useState[0],setLoading=_useState[1],_useState2=(0,react.useState)(null),error=_useState2[0],setError=_useState2[1],setRuntimeError=(0,editorState.e)(function(s){return s.setRuntimeError}),pushMessage=(0,editorState.e)(function(s){return s.pushMessage});return(0,react.useEffect)(function(){if(enabled&&containerRef.current){var active=!0;return setLoading(!0),setError(null),function start(){return _start.apply(this,arguments)}(),function(){active=!1,enabled&&unityBridge.D.destroy()}}function _start(){return(_start=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var errorMsg,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,pushMessage("[Unity] Loading Unity WebGL build from ".concat(buildUrl,"...")),setupUnityMessaging(),_context.next=1,unityBridge.D.loadInto(containerRef.current,buildUrl);case 1:active&&(setLoading(!1),pushMessage("[Unity] Unity WebGL loaded successfully")),_context.next=3;break;case 2:_context.prev=2,_t=_context.catch(0),active&&(errorMsg=(null==_t?void 0:_t.message)||String(_t),setError(errorMsg),setRuntimeError("Unity Load Error: ".concat(errorMsg)),pushMessage("❌ [Unity] Load failed: ".concat(errorMsg)),setLoading(!1));case 3:case"end":return _context.stop()}},_callee,null,[[0,2]])}))).apply(this,arguments)}},[buildUrl,enabled,setRuntimeError,pushMessage]),enabled?unityMount_jsx("div",{ref:containerRef,className,style:unityMount_objectSpread({position:"absolute",inset:0,zIndex:2,overflow:"hidden",background:theme.colors.bg2},style)},loading&&unityMount_jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:theme.colors.text2,fontSize:theme.typography.size.md}},"Loading Unity WebGL..."),error&&unityMount_jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:theme.colors.error,fontSize:theme.typography.size.md,padding:theme.spacing.lg}},"Unity Load Error: ",error)):null}UnityMount.displayName="UnityMount";try{UnityMount.displayName="UnityMount",UnityMount.__docgenInfo={description:"",displayName:"UnityMount",props:{buildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"buildUrl",required:!1,type:{name:"string | undefined"}},enabled:{defaultValue:{value:"true"},description:"",name:"enabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/IgnisWebGL/unityMount.tsx#UnityMount"]={docgenInfo:UnityMount.__docgenInfo,name:"UnityMount",path:"src/wissil/IgnisWebGL/unityMount.tsx#UnityMount"})}catch(__react_docgen_typescript_loader_error){}var IgnisContainer_jsx=react.createElement;function IgnisContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisContainer_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisContainer(_ref){var className=_ref.className,style=_ref.style,_ref$unityEnabled=_ref.unityEnabled,unityEnabled=void 0!==_ref$unityEnabled&&_ref$unityEnabled,_ref$unityBuildUrl=_ref.unityBuildUrl,unityBuildUrl=void 0===_ref$unityBuildUrl?"/UnityBuild":_ref$unityBuildUrl,theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)("desktop"),device=_useState[0],setDevice=_useState[1],deviceStyles={desktop:{width:"100%",height:"100%"},tablet:{width:820,height:1180,maxWidth:"100%",maxHeight:"100%"},mobile:{width:420,height:800,maxWidth:"100%",maxHeight:"100%"}}[device];return IgnisContainer_jsx("div",{className,style:IgnisContainer_objectSpread({width:"100%",height:"100%",background:theme.colors.bg1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},style)},IgnisContainer_jsx("div",{style:{height:40,borderBottom:"1px solid ".concat(theme.colors.border),display:"flex",alignItems:"center",paddingLeft:theme.spacing.md,paddingRight:theme.spacing.md,background:theme.colors.bg2}},IgnisContainer_jsx(IgnisDeviceSelector,{device,setDevice}),IgnisContainer_jsx("div",{style:{marginLeft:"auto",display:"flex",gap:theme.spacing.md,alignItems:"center"}},IgnisContainer_jsx(IgnisFPSMeter,null),IgnisContainer_jsx(IgnisFullscreenButton,null))),IgnisContainer_jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"auto",padding:theme.spacing.md}},IgnisContainer_jsx("div",{style:IgnisContainer_objectSpread(IgnisContainer_objectSpread({background:theme.colors.bg2,borderRadius:theme.radii.md,border:"1px solid ".concat(theme.colors.border),overflow:"hidden",boxShadow:theme.shadows.strong},deviceStyles),{},{position:"relative",minWidth:"desktop"===device?"100%":void 0,minHeight:"desktop"===device?"100%":void 0})},unityEnabled?IgnisContainer_jsx(UnityMount,{buildUrl:unityBuildUrl,enabled:unityEnabled}):IgnisContainer_jsx(react.Fragment,null,IgnisContainer_jsx(IgnisCanvasPlaceholder,null),IgnisContainer_jsx("div",{id:"ignis-canvas-root",style:{position:"absolute",inset:0,zIndex:1,pointerEvents:"auto"}})))))}IgnisContainer.displayName="IgnisContainer";try{IgnisContainer.displayName="IgnisContainer",IgnisContainer.__docgenInfo={description:"",displayName:"IgnisContainer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},unityEnabled:{defaultValue:{value:"false"},description:"",name:"unityEnabled",required:!1,type:{name:"boolean | undefined"}},unityBuildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"unityBuildUrl",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisContainer.tsx#IgnisContainer"]={docgenInfo:IgnisContainer.__docgenInfo,name:"IgnisContainer",path:"src/wissil/Ignis/IgnisContainer.tsx#IgnisContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/Slate/SlateLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>SlateLayout});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Folder=__webpack_require__("./src/design-system/icons/Folder.tsx"),File=__webpack_require__("./src/design-system/icons/File.tsx"),ThemeProvider=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react.createElement;function Sidebar(){var theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)("explorer"),activeId=_useState[0],setActiveId=_useState[1],items=[{id:"explorer",icon:__jsx(Folder.s,{size:20}),title:"Explorer"},{id:"files",icon:__jsx(File.o,{size:20}),title:"Files"}];return __jsx("div",{style:{width:52,background:theme.colors.bg1,borderRight:"1px solid ".concat(theme.colors.border),display:"flex",flexDirection:"column",alignItems:"center",paddingTop:16,gap:20}},items.map(function(item){return __jsx("div",{key:item.id,onClick:function onClick(){return setActiveId(item.id)},title:item.title,style:{padding:10,cursor:"pointer",color:activeId===item.id?theme.colors.accent:theme.colors.text1,background:activeId===item.id?"".concat(theme.colors.accent,"20"):"transparent",borderRadius:theme.radii.sm,transition:"all 0.15s ease"},onMouseEnter:function onMouseEnter(e){activeId!==item.id&&(e.currentTarget.style.color=theme.colors.text0)},onMouseLeave:function onMouseLeave(e){activeId!==item.id&&(e.currentTarget.style.color=theme.colors.text1)}},item.icon)}))}Sidebar.displayName="Sidebar";var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),useEditorTabs=__webpack_require__("./src/wissil/Slate/editor/useEditorTabs.ts"),TabBar_jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function TabBar(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),_useEditorTabs=(0,useEditorTabs.D)(),openFiles=_useEditorTabs.openFiles,activeFile=_useEditorTabs.activeFile,setActive=_useEditorTabs.setActive,close=_useEditorTabs.close;return 0===openFiles.length?TabBar_jsx("div",{className,style:_objectSpread({height:40,borderBottom:"1px solid ".concat(theme.colors.border),background:theme.colors.bg1},style)}):TabBar_jsx("div",{className,style:_objectSpread({height:40,display:"flex",alignItems:"center",background:theme.colors.bg1,borderBottom:"1px solid ".concat(theme.colors.border),paddingLeft:theme.spacing.sm,gap:theme.spacing.xs,overflowX:"auto"},style)},openFiles.map(function(file){var isActive=file===activeFile,fileName=file.split("/").pop()||file;return TabBar_jsx("div",{key:file,onClick:function onClick(){return setActive(file)},style:{padding:"6px 10px",borderRadius:theme.radii.sm,border:"1px solid ".concat(theme.colors.border),background:isActive?theme.colors.bg2:theme.colors.bg1,cursor:"pointer",display:"flex",alignItems:"center",gap:theme.spacing.xs,fontSize:theme.typography.size.sm,color:isActive?theme.colors.text0:theme.colors.text1,whiteSpace:"nowrap",transition:"all 0.15s ease"},onMouseEnter:function onMouseEnter(e){isActive||(e.currentTarget.style.background=theme.colors.bg2)},onMouseLeave:function onMouseLeave(e){isActive||(e.currentTarget.style.background=theme.colors.bg1)}},TabBar_jsx("span",null,fileName),TabBar_jsx("span",{onClick:function onClick(e){e.stopPropagation(),close(file)},style:{cursor:"pointer",opacity:.6,fontSize:"14px",lineHeight:1,padding:"2px 4px",borderRadius:theme.radii.sm,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:function onMouseEnter(e){e.currentTarget.style.opacity="1",e.currentTarget.style.background=theme.colors.error,e.currentTarget.style.color="#fff"},onMouseLeave:function onMouseLeave(e){e.currentTarget.style.opacity="0.6",e.currentTarget.style.background="transparent",e.currentTarget.style.color=""}},"✕"))}))}TabBar.displayName="TabBar";try{TabBar.displayName="TabBar",TabBar.__docgenInfo={description:"",displayName:"TabBar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/TabBar.tsx#TabBar"]={docgenInfo:TabBar.__docgenInfo,name:"TabBar",path:"src/wissil/Slate/components/TabBar.tsx#TabBar"})}catch(__react_docgen_typescript_loader_error){}var IgnitionRuntimeBar=__webpack_require__("./src/wissil/Ignition/IgnitionRuntimeBar.tsx"),EditorToolbar_jsx=react.createElement;function EditorToolbar(_ref){var onRun=_ref.onRun,onRestart=_ref.onRestart,onStop=_ref.onStop,theme=(0,ThemeProvider.D)();return EditorToolbar_jsx("div",{style:{height:44,borderBottom:"1px solid ".concat(theme.colors.border),background:theme.colors.bg1,display:"flex",alignItems:"center",paddingLeft:theme.spacing.md}},EditorToolbar_jsx(IgnitionRuntimeBar.N,{onRun,onRestart,onStop}))}EditorToolbar.displayName="EditorToolbar";try{EditorToolbar.displayName="EditorToolbar",EditorToolbar.__docgenInfo={description:"",displayName:"EditorToolbar",props:{onRun:{defaultValue:null,description:"",name:"onRun",required:!1,type:{name:"(() => void) | undefined"}},onRestart:{defaultValue:null,description:"",name:"onRestart",required:!1,type:{name:"(() => void) | undefined"}},onStop:{defaultValue:null,description:"",name:"onStop",required:!1,type:{name:"(() => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/EditorToolbar.tsx#EditorToolbar"]={docgenInfo:EditorToolbar.__docgenInfo,name:"EditorToolbar",path:"src/wissil/Slate/components/EditorToolbar.tsx#EditorToolbar"})}catch(__react_docgen_typescript_loader_error){}var FileTree=__webpack_require__("./src/wissil/Slate/components/FileTree.tsx"),InspectorPanel=__webpack_require__("./src/wissil/Slate/components/InspectorPanel.tsx"),dist=__webpack_require__("./node_modules/@monaco-editor/react/dist/index.mjs"),wissilFs=__webpack_require__("./src/wissil/runtime/fs/wissilFs.ts"),editorState=__webpack_require__("./src/state/editorState.ts"),ignitionController=__webpack_require__("./src/wissil/runtime/ignition/ignitionController.ts"),timeout=null;var MonacoEditor_jsx=react.createElement;function MonacoEditor(){var theme=(0,ThemeProvider.D)(),activeFile=(0,useEditorTabs.D)(function(s){return s.activeFile}),fs=wissilFs.C.getState(),setCursor=(0,editorState.e)(function(s){return s.setCursorPosition}),editorRef=(0,react.useRef)(null),_useState=(0,react.useState)(""),value=_useState[0],setValue=_useState[1];(0,react.useEffect)(function(){var _fs$readFile;if(activeFile){var code=null!==(_fs$readFile=fs.readFile(activeFile))&&void 0!==_fs$readFile?_fs$readFile:"";setValue(code)}else setValue("")},[activeFile,fs]);return activeFile?MonacoEditor_jsx(dist.Ay,{height:"100%",theme:"nocturna-dark",path:activeFile,defaultLanguage:detectLanguage(activeFile),value,onChange:function handleEditorChange(newValue){activeFile&&null!=newValue&&(fs.writeFile(activeFile,newValue),setValue(newValue),function triggerHMR(){timeout&&clearTimeout(timeout),timeout=setTimeout(function(){ignitionController.K.run("src/main.ts"),timeout=null},350)}())},onMount:function handleEditorDidMount(editor,monaco){editorRef.current=editor,editor.onDidChangeCursorPosition(function(e){setCursor(e.position.lineNumber,e.position.column)}),monaco.editor.defineTheme("nocturna-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#161923","editor.foreground":"#d4d7e0","editor.lineHighlightBackground":"#1e2230","editorCursor.foreground":"#6d8cff","editor.selectionBackground":"#2a3441","editor.inactiveSelectionBackground":"#1e2230","editorLineNumber.foreground":"#4a5568","editorLineNumber.activeForeground":"#6d8cff"}}),monaco.editor.setTheme("nocturna-dark")},beforeMount:function handleEditorWillMount(monaco){monaco.languages.typescript.typescriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ES2020,allowNonTsExtensions:!0,moduleResolution:monaco.languages.typescript.ModuleResolutionKind.NodeJs,module:monaco.languages.typescript.ModuleKind.ESNext,noEmit:!0,esModuleInterop:!0,jsx:monaco.languages.typescript.JsxEmit.React,reactNamespace:"React",allowJs:!0,typeRoots:["node_modules/@types"]}),monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})},options:{fontSize:14,fontFamily:"'Fira Code', 'Consolas', 'Monaco', monospace",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,wordWrap:"on",lineNumbers:"on",renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",smoothScrolling:!0,formatOnPaste:!0,formatOnType:!0}}):MonacoEditor_jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:.4,fontSize:14,color:theme.colors.text2}},"Select a file to start editing.")}function detectLanguage(path){return path.endsWith(".ts")||path.endsWith(".tsx")?"typescript":path.endsWith(".js")||path.endsWith(".jsx")?"javascript":path.endsWith(".css")?"css":path.endsWith(".html")?"html":path.endsWith(".json")?"json":path.endsWith(".md")||path.endsWith(".mdx")?"markdown":"plaintext"}MonacoEditor.displayName="MonacoEditor";var IgnisContainer=__webpack_require__("./src/wissil/Ignis/IgnisContainer.tsx"),PreviewPanel_jsx=react.createElement;function PreviewPanel(_ref){var className=_ref.className,style=_ref.style;return PreviewPanel_jsx(IgnisContainer.g,{className,style})}PreviewPanel.displayName="PreviewPanel";try{PreviewPanel.displayName="PreviewPanel",PreviewPanel.__docgenInfo={description:"",displayName:"PreviewPanel",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/PreviewPanel.tsx#PreviewPanel"]={docgenInfo:PreviewPanel.__docgenInfo,name:"PreviewPanel",path:"src/wissil/Slate/components/PreviewPanel.tsx#PreviewPanel"})}catch(__react_docgen_typescript_loader_error){}var IgnitionMessageStream=__webpack_require__("./src/wissil/Ignition/IgnitionMessageStream.tsx"),ConsolePanel_jsx=react.createElement;function ConsolePanel(_ref){_ref.logs;var className=_ref.className,style=_ref.style;return ConsolePanel_jsx(IgnitionMessageStream.X,{className,style})}ConsolePanel.displayName="ConsolePanel";try{ConsolePanel.displayName="ConsolePanel",ConsolePanel.__docgenInfo={description:"",displayName:"ConsolePanel",props:{logs:{defaultValue:null,description:"",name:"logs",required:!1,type:{name:"string[] | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/ConsolePanel.tsx#ConsolePanel"]={docgenInfo:ConsolePanel.__docgenInfo,name:"ConsolePanel",path:"src/wissil/Slate/components/ConsolePanel.tsx#ConsolePanel"})}catch(__react_docgen_typescript_loader_error){}var BottomPanel_jsx=react.createElement;function BottomPanel_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function BottomPanel_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?BottomPanel_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):BottomPanel_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function BottomPanel(_ref){var _ref$initialTab=_ref.initialTab,initialTab=void 0===_ref$initialTab?"console":_ref$initialTab,height=_ref.height,className=_ref.className,style=_ref.style,onTabChange=_ref.onTabChange,theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)(initialTab),tab=_useState[0],setTab=_useState[1],panelHeight=void 0!==height?"".concat(height,"px"):"100%";return BottomPanel_jsx("div",{className,style:BottomPanel_objectSpread({display:"flex",flexDirection:"column",height:panelHeight,width:"100%",background:theme.colors.bg1,borderTop:"1px solid ".concat(theme.colors.border)},style)},BottomPanel_jsx("div",{style:{height:34,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(theme.colors.border),paddingLeft:theme.spacing.md,gap:theme.spacing.lg,background:theme.colors.bg2}},["console","logs","errors"].map(function(t){var isActive=tab===t;return BottomPanel_jsx("div",{key:t,onClick:function onClick(){return function handleTabChange(newTab){setTab(newTab),null==onTabChange||onTabChange(newTab)}(t)},style:{padding:"6px 8px",cursor:"pointer",fontSize:theme.typography.size.sm,color:isActive?theme.colors.text0:theme.colors.text2,borderBottom:isActive?"2px solid ".concat(theme.colors.accent):"none",transition:"color 0.15s ease",textTransform:"uppercase",fontWeight:isActive?theme.typography.weight.medium:theme.typography.weight.regular},onMouseEnter:function onMouseEnter(e){isActive||(e.currentTarget.style.color=theme.colors.text1)},onMouseLeave:function onMouseLeave(e){isActive||(e.currentTarget.style.color=theme.colors.text2)}},t)})),BottomPanel_jsx("div",{style:{flex:1,overflow:"hidden"}},"console"===tab&&BottomPanel_jsx(ConsolePanel,null),"logs"===tab&&BottomPanel_jsx("div",{style:{padding:theme.spacing.md,color:theme.colors.text2,fontSize:theme.typography.size.sm,height:"100%",overflowY:"auto"}},BottomPanel_jsx("div",{style:{opacity:.4}},"Logs will appear here")),"errors"===tab&&BottomPanel_jsx("div",{style:{padding:theme.spacing.md,color:theme.colors.error,fontSize:theme.typography.size.sm,height:"100%",overflowY:"auto"}},BottomPanel_jsx("div",{style:{opacity:.4}},"Build/runtime errors will appear here"))))}BottomPanel.displayName="BottomPanel";try{BottomPanel.displayName="BottomPanel",BottomPanel.__docgenInfo={description:"",displayName:"BottomPanel",props:{initialTab:{defaultValue:{value:"console"},description:"",name:"initialTab",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"console"'},{value:'"logs"'},{value:'"errors"'}]}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab: BottomPanelTab) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/BottomPanel.tsx#BottomPanel"]={docgenInfo:BottomPanel.__docgenInfo,name:"BottomPanel",path:"src/wissil/Slate/components/BottomPanel.tsx#BottomPanel"})}catch(__react_docgen_typescript_loader_error){}var StatusBar_jsx=react.createElement;function StatusBar_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function StatusBar_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?StatusBar_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):StatusBar_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function StatusBar(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),selectedFile=(0,editorState.e)(function(s){return s.selectedFile}),buildStatus=(0,editorState.e)(function(s){return s.buildStatus}),cursorLine=(0,editorState.e)(function(s){return s.cursorLine}),cursorCol=(0,editorState.e)(function(s){return s.cursorCol}),statusColor="running"===buildStatus?theme.colors.accent:"error"===buildStatus?theme.colors.error:theme.colors.text2;return StatusBar_jsx("div",{className,style:StatusBar_objectSpread({height:28,width:"100%",background:theme.colors.bg1,borderTop:"1px solid ".concat(theme.colors.border),display:"flex",alignItems:"center",fontSize:theme.typography.size.sm,color:theme.colors.text2,paddingLeft:theme.spacing.md,paddingRight:theme.spacing.md,fontFamily:theme.typography.font},style)},StatusBar_jsx("div",{style:{display:"flex",alignItems:"center",marginRight:theme.spacing.lg,color:statusColor,fontWeight:theme.typography.weight.medium}},StatusBar_jsx("span",{style:{marginRight:theme.spacing.xs}},"●"),buildStatus.toUpperCase()),StatusBar_jsx("div",{style:{marginRight:"auto",color:theme.colors.text1,fontFamily:"monospace",fontSize:theme.typography.size.sm,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"40%"}},selectedFile||"No file selected"),StatusBar_jsx("div",{style:{marginRight:theme.spacing.lg,color:theme.colors.text2}},"Ln ",cursorLine,", Col ",cursorCol),StatusBar_jsx("div",{style:{color:theme.colors.text2}},function getFileMode(path){return path?path.endsWith(".ts")||path.endsWith(".tsx")?"TypeScript":path.endsWith(".js")||path.endsWith(".jsx")?"JavaScript":path.endsWith(".css")?"CSS":path.endsWith(".html")||path.endsWith(".htm")?"HTML":path.endsWith(".json")?"JSON":path.endsWith(".md")?"Markdown":path.endsWith(".py")?"Python":path.endsWith(".rs")?"Rust":path.endsWith(".go")?"Go":"Plain Text":"Plain Text"}(selectedFile)))}StatusBar.displayName="StatusBar";try{StatusBar.displayName="StatusBar",StatusBar.__docgenInfo={description:"",displayName:"StatusBar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/components/StatusBar.tsx#StatusBar"]={docgenInfo:StatusBar.__docgenInfo,name:"StatusBar",path:"src/wissil/Slate/components/StatusBar.tsx#StatusBar"})}catch(__react_docgen_typescript_loader_error){}var IgnitionProvider=__webpack_require__("./src/wissil/Ignition/IgnitionProvider.tsx"),SplitView=__webpack_require__("./src/design-system/primitives/SplitView.tsx"),SlateLayout_jsx=react.createElement;function SlateLayout(_ref){var onFileSelect=_ref.onFileSelect,onRun=(_ref.onTabSelect,_ref.onTabClose,_ref.onRun),onRestart=_ref.onRestart,onStop=_ref.onStop,theme=(0,ThemeProvider.D)();return SlateLayout_jsx(IgnitionProvider.n,null,SlateLayout_jsx("div",{style:{width:"100vw",height:"100vh",background:theme.colors.bg0,display:"flex",overflow:"hidden"}},SlateLayout_jsx(Sidebar,null),SlateLayout_jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"}},SlateLayout_jsx(EditorToolbar,{onRun,onRestart,onStop}),SlateLayout_jsx(TabBar,null),SlateLayout_jsx("div",{style:{flex:1}},SlateLayout_jsx(SplitView.U,{direction:"vertical",initial:340,min:200,max:600},SlateLayout_jsx(SplitView.U,{direction:"horizontal",initial:220,min:150,max:400},SlateLayout_jsx(InspectorPanel.g,null),SlateLayout_jsx("div",{style:{overflowY:"auto",height:"100%",background:theme.colors.bg1}},SlateLayout_jsx(FileTree.h,{onFileSelect}))),SlateLayout_jsx(SplitView.U,{direction:"vertical",initial:350,min:250,max:800},SlateLayout_jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},SlateLayout_jsx(MonacoEditor,null),SlateLayout_jsx(StatusBar,null)),SlateLayout_jsx(SplitView.U,{direction:"horizontal",initial:200,min:150,max:400},SlateLayout_jsx(PreviewPanel,null),SlateLayout_jsx(BottomPanel,{height:void 0}))))))))}SlateLayout.displayName="SlateLayout";try{SlateLayout.displayName="SlateLayout",SlateLayout.__docgenInfo={description:"",displayName:"SlateLayout",props:{onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((path: string) => void) | undefined"}},onTabSelect:{defaultValue:null,description:"",name:"onTabSelect",required:!1,type:{name:"((tab: string) => void) | undefined"}},onTabClose:{defaultValue:null,description:"",name:"onTabClose",required:!1,type:{name:"((tab: string) => void) | undefined"}},onRun:{defaultValue:null,description:"",name:"onRun",required:!1,type:{name:"(() => void) | undefined"}},onRestart:{defaultValue:null,description:"",name:"onRestart",required:!1,type:{name:"(() => void) | undefined"}},onStop:{defaultValue:null,description:"",name:"onStop",required:!1,type:{name:"(() => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Slate/SlateLayout.tsx#SlateLayout"]={docgenInfo:SlateLayout.__docgenInfo,name:"SlateLayout",path:"src/wissil/Slate/SlateLayout.tsx#SlateLayout"})}catch(__react_docgen_typescript_loader_error){}}}]);