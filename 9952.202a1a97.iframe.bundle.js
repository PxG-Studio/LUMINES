"use strict";(self.webpackChunklumines_wissil=self.webpackChunklumines_wissil||[]).push([[9559,9952],{"./src/wissil/Ignition/IgnitionErrorOverlay.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>IgnitionErrorOverlay});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_state_editorState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/state/editorState.ts"),_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_1__.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnitionErrorOverlay(_ref){var className=_ref.className,style=_ref.style,theme=(0,_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__.D)(),runtimeError=(0,_state_editorState__WEBPACK_IMPORTED_MODULE_2__.e)(function(s){return s.runtimeError}),setRuntimeError=(0,_state_editorState__WEBPACK_IMPORTED_MODULE_2__.e)(function(s){return s.setRuntimeError});return runtimeError?__jsx("div",{className,style:_objectSpread({position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",color:theme.colors.error,padding:theme.spacing.xl,zIndex:9999,overflowY:"auto",display:"flex",flexDirection:"column"},style),onClick:function onClick(){return setRuntimeError(null)}},__jsx("h2",{style:{marginTop:0,marginBottom:theme.spacing.lg,fontSize:theme.typography.size.xl,color:theme.colors.error,fontWeight:theme.typography.weight.semibold}},"Runtime Error"),__jsx("pre",{style:{whiteSpace:"pre-wrap",fontSize:theme.typography.size.md,fontFamily:"monospace",background:theme.colors.bg1,padding:theme.spacing.lg,borderRadius:theme.radii.md,border:"1px solid ".concat(theme.colors.border),color:theme.colors.text1,overflowX:"auto",flex:1}},runtimeError),__jsx("div",{style:{opacity:.6,marginTop:theme.spacing.lg,fontSize:theme.typography.size.sm,color:theme.colors.text2,textAlign:"center"}},"(Click anywhere to dismiss)")):null}IgnitionErrorOverlay.displayName="IgnitionErrorOverlay";try{IgnitionErrorOverlay.displayName="IgnitionErrorOverlay",IgnitionErrorOverlay.__docgenInfo={description:"",displayName:"IgnitionErrorOverlay",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignition/IgnitionErrorOverlay.tsx#IgnitionErrorOverlay"]={docgenInfo:IgnitionErrorOverlay.__docgenInfo,name:"IgnitionErrorOverlay",path:"src/wissil/Ignition/IgnitionErrorOverlay.tsx#IgnitionErrorOverlay"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/Ignition/IgnitionMessageStream.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>IgnitionMessageStream});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_state_editorState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/state/editorState.ts"),_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_1__.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnitionMessageStream(_ref){var className=_ref.className,style=_ref.style,theme=(0,_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__.D)(),msgs=(0,_state_editorState__WEBPACK_IMPORTED_MODULE_2__.e)(function(s){return s.runtimeMessages}),scrollRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){var el=scrollRef.current;el&&(el.scrollTop=el.scrollHeight)},[msgs]),__jsx("div",{ref:scrollRef,className,style:_objectSpread({padding:theme.spacing.sm,height:"100%",overflowY:"auto",overflowX:"hidden"},style)},0===msgs.length&&__jsx("div",{style:{opacity:.4,color:theme.colors.text2,fontSize:theme.typography.size.sm}},"No runtime logs — run a program to begin."),msgs.map(function(message,i){return __jsx("pre",{key:i,style:{margin:0,marginBottom:theme.spacing.xs,fontSize:theme.typography.size.sm,color:theme.colors.text1,fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"}},message)}))}IgnitionMessageStream.displayName="IgnitionMessageStream";try{IgnitionMessageStream.displayName="IgnitionMessageStream",IgnitionMessageStream.__docgenInfo={description:"",displayName:"IgnitionMessageStream",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignition/IgnitionMessageStream.tsx#IgnitionMessageStream"]={docgenInfo:IgnitionMessageStream.__docgenInfo,name:"IgnitionMessageStream",path:"src/wissil/Ignition/IgnitionMessageStream.tsx#IgnitionMessageStream"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/Ignition/IgnitionProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>IgnitionProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_IgnitionErrorOverlay__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/wissil/Ignition/IgnitionErrorOverlay.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function IgnitionProvider(_ref){var children=_ref.children;return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,children,__jsx(_IgnitionErrorOverlay__WEBPACK_IMPORTED_MODULE_1__.e,null))}try{IgnitionProvider.displayName="IgnitionProvider",IgnitionProvider.__docgenInfo={description:"",displayName:"IgnitionProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignition/IgnitionProvider.tsx#IgnitionProvider"]={docgenInfo:IgnitionProvider.__docgenInfo,name:"IgnitionProvider",path:"src/wissil/Ignition/IgnitionProvider.tsx#IgnitionProvider"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/Ignition/IgnitionRuntimeBar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>IgnitionRuntimeBar});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Button=__webpack_require__("./src/design-system/primitives/Button.tsx"),editorState=__webpack_require__("./src/state/editorState.ts"),IgnitionStatusIndicator=__webpack_require__("./src/wissil/Ignition/IgnitionStatusIndicator.tsx"),ignitionController=__webpack_require__("./src/wissil/runtime/ignition/ignitionController.ts"),UnityMessagingBus=__webpack_require__("./src/wissil/runtime/unityBridge/UnityMessagingBus.ts"),LiveCommand={run:function run(options){var _options$onSuccess;UnityMessagingBus.UnityMessagingBus.send("run",{}),null==options||null===(_options$onSuccess=options.onSuccess)||void 0===_options$onSuccess||_options$onSuccess.call(options)},reload:function reload(options){var _options$onSuccess2;UnityMessagingBus.UnityMessagingBus.send("reload",{}),null==options||null===(_options$onSuccess2=options.onSuccess)||void 0===_options$onSuccess2||_options$onSuccess2.call(options)},stop:function stop(options){var _options$onSuccess3;UnityMessagingBus.UnityMessagingBus.send("stop",{}),null==options||null===(_options$onSuccess3=options.onSuccess)||void 0===_options$onSuccess3||_options$onSuccess3.call(options)},evaluate:function evaluate(code,options){var _options$onSuccess4;UnityMessagingBus.UnityMessagingBus.send("evaluate",{code}),null==options||null===(_options$onSuccess4=options.onSuccess)||void 0===_options$onSuccess4||_options$onSuccess4.call(options)},playAnimation:function playAnimation(id,options){var _options$onSuccess5;UnityMessagingBus.UnityMessagingBus.send("playAnimation",{id}),null==options||null===(_options$onSuccess5=options.onSuccess)||void 0===_options$onSuccess5||_options$onSuccess5.call(options)},setValue:function setValue(path,value,options){var _options$onSuccess6;UnityMessagingBus.UnityMessagingBus.send("setValue",{path,value}),null==options||null===(_options$onSuccess6=options.onSuccess)||void 0===_options$onSuccess6||_options$onSuccess6.call(options)},call:function call(method,args,options){var _options$onSuccess7;UnityMessagingBus.UnityMessagingBus.send("call",{method,args:args||[]}),null==options||null===(_options$onSuccess7=options.onSuccess)||void 0===_options$onSuccess7||_options$onSuccess7.call(options)},setValues:function setValues(values,options){var _options$onSuccess8;UnityMessagingBus.UnityMessagingBus.send("setValues",{values}),null==options||null===(_options$onSuccess8=options.onSuccess)||void 0===_options$onSuccess8||_options$onSuccess8.call(options)}},ThemeProvider=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnitionRuntimeBar(_ref){var onRun=_ref.onRun,onRestart=_ref.onRestart,onStop=_ref.onStop,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),pushMessage=((0,editorState.e)(function(s){return s.setBuildStatus}),(0,editorState.e)(function(s){return s.setRuntimeError}),(0,editorState.e)(function(s){return s.pushMessage}));return __jsx("div",{className,style:_objectSpread({display:"flex",gap:theme.spacing.sm,alignItems:"center",marginLeft:"auto",marginRight:theme.spacing.md},style)},__jsx(IgnitionStatusIndicator.r,null),__jsx(Button.$,{variant:"accent",onClick:function handleRun(){UnityMessagingBus.UnityMessagingBus.isConnected()?LiveCommand.run({onSuccess:function onSuccess(){return pushMessage("[Unity] Runtime started via LiveCommand")},onError:function onError(err){pushMessage("❌ [Unity] Run failed: ".concat(err)),onRun?onRun():ignitionController.K.run()}}):onRun?onRun():ignitionController.K.run()},style:{padding:"6px 12px",fontSize:theme.typography.size.sm}},"Run"),__jsx(Button.$,{variant:"ghost",onClick:function handleRestart(){UnityMessagingBus.UnityMessagingBus.isConnected()?LiveCommand.reload({onSuccess:function onSuccess(){return pushMessage("[Unity] Runtime restarted via LiveCommand")},onError:function onError(err){pushMessage("❌ [Unity] Restart failed: ".concat(err)),onRestart?onRestart():ignitionController.K.restart()}}):onRestart?onRestart():ignitionController.K.restart()},style:{padding:"6px 12px",fontSize:theme.typography.size.sm}},"Restart"),__jsx(Button.$,{variant:"ghost",onClick:function handleStop(){UnityMessagingBus.UnityMessagingBus.isConnected()&&LiveCommand.stop({onSuccess:function onSuccess(){return pushMessage("[Unity] Runtime stopped via LiveCommand")}}),onStop?onStop():ignitionController.K.stop()},style:{padding:"6px 12px",fontSize:theme.typography.size.sm}},"Stop"))}IgnitionRuntimeBar.displayName="IgnitionRuntimeBar";try{IgnitionRuntimeBar.displayName="IgnitionRuntimeBar",IgnitionRuntimeBar.__docgenInfo={description:"",displayName:"IgnitionRuntimeBar",props:{onRun:{defaultValue:null,description:"",name:"onRun",required:!1,type:{name:"(() => void) | undefined"}},onRestart:{defaultValue:null,description:"",name:"onRestart",required:!1,type:{name:"(() => void) | undefined"}},onStop:{defaultValue:null,description:"",name:"onStop",required:!1,type:{name:"(() => void) | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignition/IgnitionRuntimeBar.tsx#IgnitionRuntimeBar"]={docgenInfo:IgnitionRuntimeBar.__docgenInfo,name:"IgnitionRuntimeBar",path:"src/wissil/Ignition/IgnitionRuntimeBar.tsx#IgnitionRuntimeBar"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/Ignition/IgnitionStatusIndicator.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>IgnitionStatusIndicator});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_state_editorState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/state/editorState.ts"),_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_1__.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnitionStatusIndicator(_ref){var className=_ref.className,style=_ref.style,theme=(0,_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_3__.D)(),buildStatus=(0,_state_editorState__WEBPACK_IMPORTED_MODULE_2__.e)(function(s){return s.buildStatus}),color="running"===buildStatus?theme.colors.accent:"error"===buildStatus?theme.colors.error:theme.colors.text2;return __jsx("div",{className,style:_objectSpread({display:"flex",alignItems:"center",gap:theme.spacing.xs,fontSize:theme.typography.size.sm,color:theme.colors.text2},style)},__jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:color,transition:"background 0.2s ease"}}),__jsx("span",null,buildStatus.toUpperCase()))}IgnitionStatusIndicator.displayName="IgnitionStatusIndicator";try{IgnitionStatusIndicator.displayName="IgnitionStatusIndicator",IgnitionStatusIndicator.__docgenInfo={description:"",displayName:"IgnitionStatusIndicator",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignition/IgnitionStatusIndicator.tsx#IgnitionStatusIndicator"]={docgenInfo:IgnitionStatusIndicator.__docgenInfo,name:"IgnitionStatusIndicator",path:"src/wissil/Ignition/IgnitionStatusIndicator.tsx#IgnitionStatusIndicator"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/runtime/unityBridge/UnityMessagingBus.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UnityMessagingBus:()=>UnityMessagingBus});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),UnityMessagingBus=function(){return(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_1__.A)(function UnityMessagingBus(){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_0__.A)(this,UnityMessagingBus)},null,[{key:"setUnityInstance",value:function setUnityInstance(instance){this.unityInstance=instance,window.UnityBridge={receive:this.receive.bind(this)},this.processQueue()}},{key:"getUnityInstance",value:function getUnityInstance(){return this.unityInstance}},{key:"isConnected",value:function isConnected(){return null!==this.unityInstance}},{key:"receive",value:function receive(message){var parsed;if("string"==typeof message)try{parsed=JSON.parse(message)}catch(err){return void console.error("[UnityBridge] Failed to parse message:",err)}else parsed=message;parsed.type?(parsed.timestamp=parsed.timestamp||Date.now(),(this.listeners[parsed.type]||[]).forEach(function(fn){try{fn(parsed.payload||{},parsed)}catch(err){console.error("[UnityBridge] Listener error for ".concat(parsed.type,":"),err)}}),(this.listeners["*"]||[]).forEach(function(fn){try{fn(parsed.payload||{},parsed)}catch(err){console.error("[UnityBridge] Wildcard listener error:",err)}})):console.warn("[UnityBridge] Message missing type:",parsed)}},{key:"send",value:function send(type,payload){if(!this.unityInstance)return this.messageQueue.push({type,payload,timestamp:Date.now()}),console.warn("[UnityBridge] Unity not loaded, queued message: ".concat(type)),!1;var message={type,payload,timestamp:Date.now()};try{return"function"==typeof this.unityInstance.SendMessage?(this.unityInstance.SendMessage("JSBridge","ReceiveMessage",JSON.stringify(message)),!0):(console.warn("[UnityBridge] Unity instance does not support SendMessage"),!1)}catch(err){return console.error("[UnityBridge] Error sending message ".concat(type,":"),err),!1}}},{key:"on",value:function on(type,listener){var _this=this;return this.listeners[type]||(this.listeners[type]=[]),this.listeners[type].push(listener),function(){var _this$listeners$type,index=null===(_this$listeners$type=_this.listeners[type])||void 0===_this$listeners$type?void 0:_this$listeners$type.indexOf(listener);void 0!==index&&index>=0&&_this.listeners[type].splice(index,1)}}},{key:"off",value:function off(type,listener){if(this.listeners[type]){var index=this.listeners[type].indexOf(listener);index>=0&&this.listeners[type].splice(index,1)}}},{key:"removeAllListeners",value:function removeAllListeners(type){type?delete this.listeners[type]:this.listeners={}}},{key:"processQueue",value:function processQueue(){for(;this.messageQueue.length>0&&this.unityInstance;){var _message=this.messageQueue.shift();_message&&this.send(_message.type,_message.payload)}}},{key:"reset",value:function reset(){this.unityInstance=null,this.listeners={},this.messageQueue=[],delete window.UnityBridge}}])}();(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.A)(UnityMessagingBus,"unityInstance",null),(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.A)(UnityMessagingBus,"listeners",{}),(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.A)(UnityMessagingBus,"messageQueue",[])}}]);