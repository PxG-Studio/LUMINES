"use strict";(self.webpackChunklumines_wissil=self.webpackChunklumines_wissil||[]).push([[642],{"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _arrayWithHoles(r){if(Array.isArray(r))return r}__webpack_require__.d(__webpack_exports__,{A:()=>_arrayWithHoles})},"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}__webpack_require__.d(__webpack_exports__,{A:()=>_nonIterableRest})},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_slicedToArray});var arrayWithHoles=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js");var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"),nonIterableRest=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js");function _slicedToArray(r,e){return(0,arrayWithHoles.A)(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||(0,unsupportedIterableToArray.A)(r,e)||(0,nonIterableRest.A)()}},"./src/design-system/primitives/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Button});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),_excluded=["variant","style"],__jsx=react__WEBPACK_IMPORTED_MODULE_3__.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Button(_ref){var _ref$variant=_ref.variant,variant=void 0===_ref$variant?"default":_ref$variant,style=_ref.style,props=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__.A)(_ref,_excluded),theme=(0,_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_4__.D)(),bg=theme.colors.bg1,color=theme.colors.text0,border=theme.colors.border;return"accent"===variant?(bg="var(--nv-accent-button, #4c5eff)",color="#fff"):"ghost"===variant&&(bg="transparent",border="transparent"),__jsx("button",(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_0__.A)({},props,{style:_objectSpread({padding:"".concat(theme.spacing.sm," ").concat(theme.spacing.md),borderRadius:theme.radii.md,background:bg,color,border:"1px solid ".concat(border),fontFamily:theme.typography.font,fontSize:theme.typography.size.md,cursor:"pointer",transition:"background 0.15s ease"},style)}))}Button.displayName="Button";try{Button.displayName="Button",Button.__docgenInfo={description:"",displayName:"Button",props:{variant:{defaultValue:{value:"default"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"default"'},{value:'"accent"'},{value:'"ghost"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/design-system/primitives/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/design-system/primitives/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}},"./src/state/editorState.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>useEditorState});var _home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var useEditorState=(0,__webpack_require__("./node_modules/zustand/esm/index.mjs").vt)(function(set){return{files:{},activeFile:null,openFiles:[],selectedFiles:[],selectedFile:null,buildStatus:"idle",cursorLine:1,cursorCol:1,runtimeMessages:[],runtimeError:null,setFiles:function setFiles(files){var editorFiles={};Object.entries(files).forEach(function(_ref){var _ref2=(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.A)(_ref,2),path=_ref2[0],file=_ref2[1],content="string"==typeof file?file:"code"in file?file.code:"";editorFiles[path]={path,content,isDirty:!1}}),set({files:editorFiles})},openFile:function openFile(path){return set(function(state){return state.openFiles.includes(path)?state:{openFiles:[].concat((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(state.openFiles),[path]),activeFile:path}})},closeFile:function closeFile(path){return set(function(state){return{openFiles:state.openFiles.filter(function(p){return p!==path}),activeFile:state.activeFile===path?state.openFiles[state.openFiles.length-2]||null:state.activeFile}})},updateFile:function updateFile(path,content){return set(function(state){return{files:_objectSpread(_objectSpread({},state.files),{},(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)({},path,_objectSpread(_objectSpread({},state.files[path]),{},{content,isDirty:!0})))}})},createFile:function createFile(path,content){return set(function(state){return{files:_objectSpread(_objectSpread({},state.files),{},(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)({},path,{path,content,isDirty:!1})),openFiles:[].concat((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(state.openFiles),[path]),activeFile:path}})},deleteFile:function deleteFile(path){return set(function(state){var newFiles=_objectSpread({},state.files);return delete newFiles[path],{files:newFiles,openFiles:state.openFiles.filter(function(p){return p!==path}),activeFile:state.activeFile===path?null:state.activeFile}})},setActiveFile:function setActiveFile(path){return set(function(state){return{activeFile:path,openFiles:state.openFiles.includes(path)?state.openFiles:[].concat((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(state.openFiles),[path])}})},selectFiles:function selectFiles(paths){return set({selectedFiles:paths})},setSelectedFile:function setSelectedFile(path){return set({selectedFile:path})},setBuildStatus:function setBuildStatus(status){return set({buildStatus:status})},setCursorPosition:function setCursorPosition(line,col){return set({cursorLine:line,cursorCol:col})},pushMessage:function pushMessage(msg){return set(function(s){return{runtimeMessages:[].concat((0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_1__.A)(s.runtimeMessages),[msg])}})},setRuntimeError:function setRuntimeError(msg){return set({runtimeError:msg})},markDirty:function markDirty(path,isDirty){return set(function(state){return{files:_objectSpread(_objectSpread({},state.files),{},(0,_home_runner_work_LUMINES_LUMINES_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.A)({},path,_objectSpread(_objectSpread({},state.files[path]),{},{isDirty})))}})}}})},"./src/wissil/Ignis/IgnisComponents.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,DesktopView:()=>DesktopView,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_IgnisContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/wissil/Ignis/IgnisContainer.tsx"),_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const __WEBPACK_DEFAULT_EXPORT__={title:"Lumenforge.io Design System/WIS2L Framework/Ignis/Shared Framework Components/IgnisComponents",component:_IgnisContainer__WEBPACK_IMPORTED_MODULE_1__.g,decorators:[function(Story){return __jsx(_design_system_themes_ThemeProvider__WEBPACK_IMPORTED_MODULE_2__.N,null,__jsx("div",{style:{width:"100vw",height:"100vh",overflow:"hidden"}},__jsx(Story,null)))}],parameters:{layout:"fullscreen",backgrounds:{default:"dark"}},tags:["autodocs"]};var Default={},DesktopView={render:function render(){return __jsx("div",{style:{width:"100vw",height:"100vh"}},__jsx(_IgnisContainer__WEBPACK_IMPORTED_MODULE_1__.g,null))}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},DesktopView.parameters={...DesktopView.parameters,docs:{...DesktopView.parameters?.docs,source:{originalSource:'{\n  render: () => <div style={{\n    width: "100vw",\n    height: "100vh"\n  }}>\n      <IgnisContainer />\n    </div>\n}',...DesktopView.parameters?.docs?.source}}};const __namedExportsOrder=["Default","DesktopView"]},"./src/wissil/Ignis/IgnisContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>IgnisContainer});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Button=__webpack_require__("./src/design-system/primitives/Button.tsx"),ThemeProvider=__webpack_require__("./src/design-system/themes/ThemeProvider.tsx"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisDeviceSelector(_ref){var device=_ref.device,setDevice=_ref.setDevice,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return __jsx("div",{className,style:_objectSpread({display:"flex",gap:theme.spacing.xs},style)},["desktop","tablet","mobile"].map(function(t){return __jsx(Button.$,{key:t,variant:device===t?"accent":"ghost",onClick:function onClick(){return setDevice(t)},style:{padding:"4px 10px",fontSize:theme.typography.size.sm,textTransform:"capitalize"}},t[0].toUpperCase()+t.slice(1))}))}IgnisDeviceSelector.displayName="IgnisDeviceSelector";try{IgnisDeviceSelector.displayName="IgnisDeviceSelector",IgnisDeviceSelector.__docgenInfo={description:"",displayName:"IgnisDeviceSelector",props:{device:{defaultValue:null,description:"",name:"device",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"tablet"'},{value:'"mobile"'}]}},setDevice:{defaultValue:null,description:"",name:"setDevice",required:!0,type:{name:"(device: DeviceType) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisDeviceSelector.tsx#IgnisDeviceSelector"]={docgenInfo:IgnisDeviceSelector.__docgenInfo,name:"IgnisDeviceSelector",path:"src/wissil/Ignis/IgnisDeviceSelector.tsx#IgnisDeviceSelector"})}catch(__react_docgen_typescript_loader_error){}var IgnisFPSMeter_jsx=react.createElement;function IgnisFPSMeter_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisFPSMeter_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisFPSMeter_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisFPSMeter_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisFPSMeter(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)(60),fps=_useState[0],setFps=_useState[1];return(0,react.useEffect)(function(){var interval=setInterval(function(){setFps(55+Math.round(10*Math.random()))},700);return function(){return clearInterval(interval)}},[]),IgnisFPSMeter_jsx("div",{className,style:IgnisFPSMeter_objectSpread({fontSize:theme.typography.size.sm,color:theme.colors.text2,fontFamily:theme.typography.font},style)},fps," FPS")}IgnisFPSMeter.displayName="IgnisFPSMeter";try{IgnisFPSMeter.displayName="IgnisFPSMeter",IgnisFPSMeter.__docgenInfo={description:"",displayName:"IgnisFPSMeter",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisFPSMeter.tsx#IgnisFPSMeter"]={docgenInfo:IgnisFPSMeter.__docgenInfo,name:"IgnisFPSMeter",path:"src/wissil/Ignis/IgnisFPSMeter.tsx#IgnisFPSMeter"})}catch(__react_docgen_typescript_loader_error){}var IgnisFullscreenButton_jsx=react.createElement;function IgnisFullscreenButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisFullscreenButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisFullscreenButton_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisFullscreenButton_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisFullscreenButton(_ref){var onFullscreen=_ref.onFullscreen,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return IgnisFullscreenButton_jsx(Button.$,{variant:"ghost",onClick:function handleClick(){onFullscreen?onFullscreen():alert("Fullscreen placeholder - will be wired to Unity canvas in Phase 4")},className,style:IgnisFullscreenButton_objectSpread({padding:"4px 10px",fontSize:theme.typography.size.sm},style)},"Fullscreen")}IgnisFullscreenButton.displayName="IgnisFullscreenButton";try{IgnisFullscreenButton.displayName="IgnisFullscreenButton",IgnisFullscreenButton.__docgenInfo={description:"",displayName:"IgnisFullscreenButton",props:{onFullscreen:{defaultValue:null,description:"",name:"onFullscreen",required:!1,type:{name:"(() => void) | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisFullscreenButton.tsx#IgnisFullscreenButton"]={docgenInfo:IgnisFullscreenButton.__docgenInfo,name:"IgnisFullscreenButton",path:"src/wissil/Ignis/IgnisFullscreenButton.tsx#IgnisFullscreenButton"})}catch(__react_docgen_typescript_loader_error){}var IgnisCanvasPlaceholder_jsx=react.createElement;function IgnisCanvasPlaceholder_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisCanvasPlaceholder_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisCanvasPlaceholder_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisCanvasPlaceholder_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisCanvasPlaceholder(_ref){var className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)();return IgnisCanvasPlaceholder_jsx("div",{className,style:IgnisCanvasPlaceholder_objectSpread({position:"absolute",inset:0,width:"100%",height:"100%",background:"repeating-linear-gradient(\n          45deg,\n          ".concat(theme.colors.bg2,",\n          ").concat(theme.colors.bg2," 10px,\n          ").concat(theme.colors.bg1," 10px,\n          ").concat(theme.colors.bg1," 20px\n        )"),color:theme.colors.text2,display:"flex",alignItems:"center",justifyContent:"center",fontSize:theme.typography.size.md,opacity:.25},style)},"Unity WebGL will render here")}IgnisCanvasPlaceholder.displayName="IgnisCanvasPlaceholder";try{IgnisCanvasPlaceholder.displayName="IgnisCanvasPlaceholder",IgnisCanvasPlaceholder.__docgenInfo={description:"",displayName:"IgnisCanvasPlaceholder",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisCanvasPlaceholder.tsx#IgnisCanvasPlaceholder"]={docgenInfo:IgnisCanvasPlaceholder.__docgenInfo,name:"IgnisCanvasPlaceholder",path:"src/wissil/Ignis/IgnisCanvasPlaceholder.tsx#IgnisCanvasPlaceholder"})}catch(__react_docgen_typescript_loader_error){}var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),unityBridge=__webpack_require__("./src/wissil/IgnisWebGL/unityBridge.ts"),editorState=__webpack_require__("./src/state/editorState.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js"),messagingSetup=!1;function setupUnityMessaging(){if(!messagingSetup){var state=editorState.e.getState(),originalLog=console.log,originalError=console.error,originalWarn=console.warn;console.log=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];originalLog.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.pushMessage("[Unity] ".concat(message))},console.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];originalError.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.setRuntimeError("Unity Error: ".concat(message)),state.pushMessage("❌ [Unity Error] ".concat(message))},console.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];originalWarn.apply(console,args);var message=args.map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");state.pushMessage("⚠️ [Unity Warning] ".concat(message))},messagingSetup=!0}}var unityMount_jsx=react.createElement;function unityMount_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function unityMount_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?unityMount_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):unityMount_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function UnityMount(_ref){var _ref$buildUrl=_ref.buildUrl,buildUrl=void 0===_ref$buildUrl?"/UnityBuild":_ref$buildUrl,_ref$enabled=_ref.enabled,enabled=void 0===_ref$enabled||_ref$enabled,className=_ref.className,style=_ref.style,theme=(0,ThemeProvider.D)(),containerRef=(0,react.useRef)(null),_useState=(0,react.useState)(!1),loading=_useState[0],setLoading=_useState[1],_useState2=(0,react.useState)(null),error=_useState2[0],setError=_useState2[1],setRuntimeError=(0,editorState.e)(function(s){return s.setRuntimeError}),pushMessage=(0,editorState.e)(function(s){return s.pushMessage});return(0,react.useEffect)(function(){if(enabled&&containerRef.current){var active=!0;return setLoading(!0),setError(null),function start(){return _start.apply(this,arguments)}(),function(){active=!1,enabled&&unityBridge.D.destroy()}}function _start(){return(_start=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var errorMsg,_t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,pushMessage("[Unity] Loading Unity WebGL build from ".concat(buildUrl,"...")),setupUnityMessaging(),_context.next=1,unityBridge.D.loadInto(containerRef.current,buildUrl);case 1:active&&(setLoading(!1),pushMessage("[Unity] Unity WebGL loaded successfully")),_context.next=3;break;case 2:_context.prev=2,_t=_context.catch(0),active&&(errorMsg=(null==_t?void 0:_t.message)||String(_t),setError(errorMsg),setRuntimeError("Unity Load Error: ".concat(errorMsg)),pushMessage("❌ [Unity] Load failed: ".concat(errorMsg)),setLoading(!1));case 3:case"end":return _context.stop()}},_callee,null,[[0,2]])}))).apply(this,arguments)}},[buildUrl,enabled,setRuntimeError,pushMessage]),enabled?unityMount_jsx("div",{ref:containerRef,className,style:unityMount_objectSpread({position:"absolute",inset:0,zIndex:2,overflow:"hidden",background:theme.colors.bg2},style)},loading&&unityMount_jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:theme.colors.text2,fontSize:theme.typography.size.md}},"Loading Unity WebGL..."),error&&unityMount_jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:theme.colors.error,fontSize:theme.typography.size.md,padding:theme.spacing.lg}},"Unity Load Error: ",error)):null}UnityMount.displayName="UnityMount";try{UnityMount.displayName="UnityMount",UnityMount.__docgenInfo={description:"",displayName:"UnityMount",props:{buildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"buildUrl",required:!1,type:{name:"string | undefined"}},enabled:{defaultValue:{value:"true"},description:"",name:"enabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/IgnisWebGL/unityMount.tsx#UnityMount"]={docgenInfo:UnityMount.__docgenInfo,name:"UnityMount",path:"src/wissil/IgnisWebGL/unityMount.tsx#UnityMount"})}catch(__react_docgen_typescript_loader_error){}var IgnisContainer_jsx=react.createElement;function IgnisContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function IgnisContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?IgnisContainer_ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):IgnisContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function IgnisContainer(_ref){var className=_ref.className,style=_ref.style,_ref$unityEnabled=_ref.unityEnabled,unityEnabled=void 0!==_ref$unityEnabled&&_ref$unityEnabled,_ref$unityBuildUrl=_ref.unityBuildUrl,unityBuildUrl=void 0===_ref$unityBuildUrl?"/UnityBuild":_ref$unityBuildUrl,theme=(0,ThemeProvider.D)(),_useState=(0,react.useState)("desktop"),device=_useState[0],setDevice=_useState[1],deviceStyles={desktop:{width:"100%",height:"100%"},tablet:{width:820,height:1180,maxWidth:"100%",maxHeight:"100%"},mobile:{width:420,height:800,maxWidth:"100%",maxHeight:"100%"}}[device];return IgnisContainer_jsx("div",{className,style:IgnisContainer_objectSpread({width:"100%",height:"100%",background:theme.colors.bg1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},style)},IgnisContainer_jsx("div",{style:{height:40,borderBottom:"1px solid ".concat(theme.colors.border),display:"flex",alignItems:"center",paddingLeft:theme.spacing.md,paddingRight:theme.spacing.md,background:theme.colors.bg2}},IgnisContainer_jsx(IgnisDeviceSelector,{device,setDevice}),IgnisContainer_jsx("div",{style:{marginLeft:"auto",display:"flex",gap:theme.spacing.md,alignItems:"center"}},IgnisContainer_jsx(IgnisFPSMeter,null),IgnisContainer_jsx(IgnisFullscreenButton,null))),IgnisContainer_jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"auto",padding:theme.spacing.md}},IgnisContainer_jsx("div",{style:IgnisContainer_objectSpread(IgnisContainer_objectSpread({background:theme.colors.bg2,borderRadius:theme.radii.md,border:"1px solid ".concat(theme.colors.border),overflow:"hidden",boxShadow:theme.shadows.strong},deviceStyles),{},{position:"relative",minWidth:"desktop"===device?"100%":void 0,minHeight:"desktop"===device?"100%":void 0})},unityEnabled?IgnisContainer_jsx(UnityMount,{buildUrl:unityBuildUrl,enabled:unityEnabled}):IgnisContainer_jsx(react.Fragment,null,IgnisContainer_jsx(IgnisCanvasPlaceholder,null),IgnisContainer_jsx("div",{id:"ignis-canvas-root",style:{position:"absolute",inset:0,zIndex:1,pointerEvents:"auto"}})))))}IgnisContainer.displayName="IgnisContainer";try{IgnisContainer.displayName="IgnisContainer",IgnisContainer.__docgenInfo={description:"",displayName:"IgnisContainer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},unityEnabled:{defaultValue:{value:"false"},description:"",name:"unityEnabled",required:!1,type:{name:"boolean | undefined"}},unityBuildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"unityBuildUrl",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wissil/Ignis/IgnisContainer.tsx#IgnisContainer"]={docgenInfo:IgnisContainer.__docgenInfo,name:"IgnisContainer",path:"src/wissil/Ignis/IgnisContainer.tsx#IgnisContainer"})}catch(__react_docgen_typescript_loader_error){}},"./src/wissil/IgnisWebGL/unityBridge.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>UnityBridge});var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),classCallCheck=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createClass.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),loaderLoaded=!1,loaderPromise=null;function loadUnityLoader(buildUrl){return loaderPromise||(loaderLoaded&&window.createUnityInstance?Promise.resolve():loaderPromise=new Promise(function(resolve,reject){var loaderPaths=["".concat(buildUrl,"/Build/build.loader.js"),"".concat(buildUrl,"/Build/Build.loader.js"),"".concat(buildUrl,"/Build/UnityLoader.js"),"".concat(buildUrl,"/Build/[ProjectName].loader.js")],maxAttempts=loaderPaths.length,_tryLoad=function tryLoad(index){if(index>=maxAttempts)return reject(new Error("Failed to load Unity loader. Tried ".concat(maxAttempts," paths."))),void(loaderPromise=null);var script=document.createElement("script");script.src=loaderPaths[index],script.onload=function(){loaderLoaded=!0,loaderPromise=null,window.createUnityInstance?resolve():_tryLoad(index+1)},script.onerror=function(){_tryLoad(index+1)},document.head.appendChild(script)};_tryLoad(0)}))}var console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,defineProperty.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var UnityBridge=function(){return(0,createClass.A)(function UnityBridge(){(0,classCallCheck.A)(this,UnityBridge)},null,[{key:"loadInto",value:(_loadInto=(0,asyncToGenerator.A)(regenerator_default().mark(function _callee2(container,buildUrl,config){var createUnityInstance,defaultConfig,finalConfig,_t2,_this=this;return regenerator_default().wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.instance){try{"function"==typeof this.instance.Quit&&this.instance.Quit()}catch(err){console.warn("Error quitting Unity instance:",err)}this.instance=null}return this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),container.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.id="unity-canvas",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",container.appendChild(this.canvas),this.buildUrl=buildUrl,_context2.next=1,loadUnityLoader(buildUrl);case 1:if(createUnityInstance=window.createUnityInstance){_context2.next=2;break}throw new Error("Unity loader did not register createUnityInstance. Make sure the loader script loaded correctly.");case 2:return defaultConfig={dataUrl:"".concat(buildUrl,"/Build/build.data"),frameworkUrl:"".concat(buildUrl,"/Build/build.framework.js"),codeUrl:"".concat(buildUrl,"/Build/build.wasm"),streamingAssetsUrl:"".concat(buildUrl,"/StreamingAssets"),companyName:"WISSIL",productName:"Unity WebGL Build",productVersion:"1.0.0"},finalConfig=_objectSpread(_objectSpread({},defaultConfig),config),_context2.prev=3,_context2.next=4,createUnityInstance(this.canvas,finalConfig);case 4:return this.instance=_context2.sent,"undefined"!=typeof window&&setTimeout((0,asyncToGenerator.A)(regenerator_default().mark(function _callee(){var _t;return regenerator_default().wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=1,__webpack_require__.e(9559).then(__webpack_require__.bind(__webpack_require__,"./src/wissil/runtime/unityBridge/UnityMessagingBus.ts"));case 1:return _context.sent.UnityMessagingBus.setUnityInstance(_this.instance),_context.next=2,__webpack_require__.e(1189).then(__webpack_require__.bind(__webpack_require__,"./src/wissil/runtime/unityBridge/RuntimeEvents.ts"));case 2:(0,_context.sent.setupUnityEventListeners)(),_context.next=4;break;case 3:_context.prev=3,_t=_context.catch(0),console.warn("[UnityBridge] Failed to set up messaging bus:",_t);case 4:case"end":return _context.stop()}},_callee,null,[[0,3]])})),0),_context2.abrupt("return",this.instance);case 5:throw _context2.prev=5,_t2=_context2.catch(3),this.instance=null,this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),_t2;case 6:case"end":return _context2.stop()}},_callee2,this,[[3,5]])})),function loadInto(_x,_x2,_x3){return _loadInto.apply(this,arguments)})},{key:"postMessageToUnity",value:function postMessageToUnity(gameObject,method,message){if(this.instance)try{var messageStr="string"==typeof message?message:JSON.stringify(message);"function"==typeof this.instance.SendMessage?this.instance.SendMessage(gameObject,method,messageStr):console.warn("Unity instance does not support SendMessage")}catch(err){console.error("Error sending message to Unity:",err)}else console.warn("Unity instance not loaded. Cannot send message.")}},{key:"getInstance",value:function getInstance(){return this.instance}},{key:"isLoaded",value:function isLoaded(){return null!==this.instance}},{key:"destroy",value:function destroy(){if("undefined"!=typeof window&&Promise.all([__webpack_require__.e(9559).then(__webpack_require__.bind(__webpack_require__,"./src/wissil/runtime/unityBridge/UnityMessagingBus.ts")).then(function(_ref2){_ref2.UnityMessagingBus.reset()}).catch(function(){}),__webpack_require__.e(1189).then(__webpack_require__.bind(__webpack_require__,"./src/wissil/runtime/unityBridge/RuntimeEvents.ts")).then(function(_ref3){(0,_ref3.cleanupUnityEventListeners)()}).catch(function(){})]).catch(function(){}),this.instance){try{"function"==typeof this.instance.Quit&&this.instance.Quit()}catch(err){console.warn("Error quitting Unity instance:",err)}this.instance=null}this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.buildUrl=null}},{key:"getBuildUrl",value:function getBuildUrl(){return this.buildUrl}}]);var _loadInto}();(0,defineProperty.A)(UnityBridge,"instance",null),(0,defineProperty.A)(UnityBridge,"canvas",null),(0,defineProperty.A)(UnityBridge,"buildUrl",null)}}]);