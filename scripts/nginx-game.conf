# Nginx config for PXG.STUDIO game deploy (production + staging).
# Copy to server: /etc/nginx/sites-available/game
# Enable: sudo ln -sf /etc/nginx/sites-available/game /etc/nginx/sites-enabled/
# Test: sudo nginx -t && sudo systemctl reload nginx
#
# Production: http://192.168.86.29:8080
# Staging:    http://192.168.86.29:8081
# (Ports 8080/8081 avoid conflict with GitLab on port 80.)

server {
    listen 8080;
    server_name 192.168.86.29 localhost;
    root /var/www/game;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
    access_log /var/log/nginx/game-access.log;
    error_log  /var/log/nginx/game-error.log;
}

server {
    listen 8081;
    server_name 192.168.86.29 localhost;
    root /var/www/staging;
    index index.html;
    location / {
        try_files $uri $uri/ /index.html;
    }
    access_log /var/log/nginx/staging-access.log;
    error_log  /var/log/nginx/staging-error.log;
}
