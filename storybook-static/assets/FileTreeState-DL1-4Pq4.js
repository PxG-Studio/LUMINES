import{c}from"./iframe-BXkX_8oL.js";import{u}from"./editorState-BZUma5kk.js";import{u as a}from"./wissilFs-D_4fnc1y.js";const p=c(n=>({openFiles:[],activeFile:null,open:t=>n(e=>({openFiles:e.openFiles.includes(t)?e.openFiles:[...e.openFiles,t],activeFile:t})),close:t=>n(e=>{const i=e.openFiles.filter(o=>o!==t),r=e.activeFile===t?i.length>0?i[0]:null:e.activeFile;return{openFiles:i,activeFile:r}}),setActive:t=>n(e=>({activeFile:e.openFiles.includes(t)?t:e.activeFile}))}));function S(n){const e=a.getState().readFile(n);return u.getState().setSelectedFile(n),p.getState().open(n),e}const F=()=>{const n=a.getState().getSnapshot();function t(e,i){return Object.keys(e.children).sort((r,o)=>{const s=e.children[r],l=e.children[o];return s.type==="folder"&&l.type!=="folder"?-1:s.type!=="folder"&&l.type==="folder"?1:r.localeCompare(o)}).map(r=>{const o=e.children[r],s=i?`${i}/${r}`:r;return o.type==="folder"?{name:r,path:s,children:t(o,s)}:{name:r,path:s}})}return t(n,"")},d=c(n=>({tree:[],regenerateTree:()=>n({tree:F()})})),v=()=>{d.getState().regenerateTree()};export{S as o,v as r,p as u};
