import{u as c,j as s,r as d}from"./iframe-BXkX_8oL.js";import{B as C}from"./Button-CDJro0XR.js";import{U as j}from"./unityBridge-ChVzu39L.js";import{u as g}from"./editorState-BZUma5kk.js";function m({device:t,setDevice:a,className:n,style:o}){const e=c(),r=["desktop","tablet","mobile"];return s.jsx("div",{className:n,style:{display:"flex",gap:e.spacing.xs,...o},children:r.map(i=>s.jsx(C,{variant:t===i?"accent":"ghost",onClick:()=>a(i),style:{padding:"4px 10px",fontSize:e.typography.size.sm,textTransform:"capitalize"},children:i[0].toUpperCase()+i.slice(1)},i))})}try{m.displayName="IgnisDeviceSelector",m.__docgenInfo={description:"",displayName:"IgnisDeviceSelector",props:{device:{defaultValue:null,description:"",name:"device",required:!0,type:{name:"enum",value:[{value:'"desktop"'},{value:'"tablet"'},{value:'"mobile"'}]}},setDevice:{defaultValue:null,description:"",name:"setDevice",required:!0,type:{name:"(device: DeviceType) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function h({className:t,style:a}){const n=c(),[o,e]=d.useState(60);return d.useEffect(()=>{const r=setInterval(()=>{e(55+Math.round(Math.random()*10))},700);return()=>clearInterval(r)},[]),s.jsxs("div",{className:t,style:{fontSize:n.typography.size.sm,color:n.colors.text2,fontFamily:n.typography.font,...a},children:[o," FPS"]})}try{h.displayName="IgnisFPSMeter",h.__docgenInfo={description:"",displayName:"IgnisFPSMeter",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function v({onFullscreen:t,className:a,style:n}){const o=c(),e=()=>{t?t():alert("Fullscreen placeholder - will be wired to Unity canvas in Phase 4")};return s.jsx(C,{variant:"ghost",onClick:e,className:a,style:{padding:"4px 10px",fontSize:o.typography.size.sm,...n},children:"Fullscreen"})}try{v.displayName="IgnisFullscreenButton",v.__docgenInfo={description:"",displayName:"IgnisFullscreenButton",props:{onFullscreen:{defaultValue:null,description:"",name:"onFullscreen",required:!1,type:{name:"(() => void) | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function x({className:t,style:a}){const n=c();return s.jsx("div",{className:t,style:{position:"absolute",inset:0,width:"100%",height:"100%",background:`repeating-linear-gradient(
          45deg,
          ${n.colors.bg2},
          ${n.colors.bg2} 10px,
          ${n.colors.bg1} 10px,
          ${n.colors.bg1} 20px
        )`,color:n.colors.text2,display:"flex",alignItems:"center",justifyContent:"center",fontSize:n.typography.size.md,opacity:.25,...a},children:"Unity WebGL will render here"})}try{x.displayName="IgnisCanvasPlaceholder",x.__docgenInfo={description:"",displayName:"IgnisCanvasPlaceholder",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}let U=!1;function V(){if(U)return;const t=g.getState(),a=console.log,n=console.error,o=console.warn;console.log=(...e)=>{a.apply(console,e);const r=e.map(i=>typeof i=="object"?JSON.stringify(i):String(i)).join(" ");t.pushMessage(`[Unity] ${r}`)},console.error=(...e)=>{n.apply(console,e);const r=e.map(i=>typeof i=="object"?JSON.stringify(i):String(i)).join(" ");t.setRuntimeError(`Unity Error: ${r}`),t.pushMessage(`❌ [Unity Error] ${r}`)},console.warn=(...e)=>{o.apply(console,e);const r=e.map(i=>typeof i=="object"?JSON.stringify(i):String(i)).join(" ");t.pushMessage(`⚠️ [Unity Warning] ${r}`)},U=!0}function _({buildUrl:t="/UnityBuild",enabled:a=!0,className:n,style:o}){const e=c(),r=d.useRef(null),[i,u]=d.useState(!1),[b,S]=d.useState(null),I=g(l=>l.setRuntimeError),p=g(l=>l.pushMessage);return d.useEffect(()=>{if(!a||!r.current)return;let l=!0;u(!0),S(null);async function q(){try{p(`[Unity] Loading Unity WebGL build from ${t}...`),V(),await j.loadInto(r.current,t),l&&(u(!1),p("[Unity] Unity WebGL loaded successfully"))}catch(y){if(l){const f=(y==null?void 0:y.message)||String(y);S(f),I(`Unity Load Error: ${f}`),p(`❌ [Unity] Load failed: ${f}`),u(!1)}}}return q(),()=>{l=!1,a&&j.destroy()}},[t,a,I,p]),a?s.jsxs("div",{ref:r,className:n,style:{position:"absolute",inset:0,zIndex:2,overflow:"hidden",background:e.colors.bg2,...o},children:[i&&s.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.colors.text2,fontSize:e.typography.size.md},children:"Loading Unity WebGL..."}),b&&s.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.colors.error,fontSize:e.typography.size.md,padding:e.spacing.lg},children:["Unity Load Error: ",b]})]}):null}try{_.displayName="UnityMount",_.__docgenInfo={description:"",displayName:"UnityMount",props:{buildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"buildUrl",required:!1,type:{name:"string | undefined"}},enabled:{defaultValue:{value:"true"},description:"",name:"enabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function N({className:t,style:a,unityEnabled:n=!1,unityBuildUrl:o="/UnityBuild"}){const e=c(),[r,i]=d.useState("desktop"),u={desktop:{width:"100%",height:"100%"},tablet:{width:820,height:1180,maxWidth:"100%",maxHeight:"100%"},mobile:{width:420,height:800,maxWidth:"100%",maxHeight:"100%"}}[r];return s.jsxs("div",{className:t,style:{width:"100%",height:"100%",background:e.colors.bg1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",...a},children:[s.jsxs("div",{style:{height:40,borderBottom:`1px solid ${e.colors.border}`,display:"flex",alignItems:"center",paddingLeft:e.spacing.md,paddingRight:e.spacing.md,background:e.colors.bg2},children:[s.jsx(m,{device:r,setDevice:i}),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:e.spacing.md,alignItems:"center"},children:[s.jsx(h,{}),s.jsx(v,{})]})]}),s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"auto",padding:e.spacing.md},children:s.jsx("div",{style:{background:e.colors.bg2,borderRadius:e.radii.md,border:`1px solid ${e.colors.border}`,overflow:"hidden",boxShadow:e.shadows.strong,...u,position:"relative",minWidth:r==="desktop"?"100%":void 0,minHeight:r==="desktop"?"100%":void 0},children:n?s.jsx(_,{buildUrl:o,enabled:n}):s.jsxs(s.Fragment,{children:[s.jsx(x,{}),s.jsx("div",{id:"ignis-canvas-root",style:{position:"absolute",inset:0,zIndex:1,pointerEvents:"auto"}})]})})})]})}try{N.displayName="IgnisContainer",N.__docgenInfo={description:"",displayName:"IgnisContainer",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},unityEnabled:{defaultValue:{value:"false"},description:"",name:"unityEnabled",required:!1,type:{name:"boolean | undefined"}},unityBuildUrl:{defaultValue:{value:"/UnityBuild"},description:"",name:"unityBuildUrl",required:!1,type:{name:"string | undefined"}}}}}catch{}export{N as I};
