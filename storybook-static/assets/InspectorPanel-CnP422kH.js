import{u as F,r as g,j as t,R as B}from"./iframe-BXkX_8oL.js";import{C as D}from"./ChevronRight-1H6bY8tN.js";import{F as E,a as q}from"./File-BlZ5GgWr.js";import{u as x}from"./editorState-BZUma5kk.js";import{o as P,r as V}from"./FileTreeState-DL1-4Pq4.js";import{u as $}from"./wissilFs-D_4fnc1y.js";import{S as N}from"./ScrollArea-B2QZ-rxO.js";function j({name:l,value:r,level:e,parentPath:i="",onFileClick:p}){const s=F(),n=typeof r=="object"&&r!==null&&!Array.isArray(r),[a,u]=g.useState(e===0),c=i===""?l:`${i}/${l}`,y=x(o=>o.selectedFile);x(o=>o.setSelectedFile);const d=y===c,b=o=>{o.stopPropagation(),n?u(!a):(P(c),p==null||p(c))},C=o=>{o.preventDefault(),console.log("Right-click on:",c),alert(`Context menu placeholder for: ${c}`)},v=g.useRef(null),[f,S]=g.useState(!1),A=o=>{var h,_,z,w,I,k;if(o.key==="Enter"||o.key===" ")o.preventDefault(),b(o);else if(o.key==="ArrowRight"&&n&&!a)o.preventDefault(),u(!0);else if(o.key==="ArrowLeft"&&n&&a)o.preventDefault(),u(!1);else if(o.key==="ArrowDown"){o.preventDefault();const m=(z=(_=(h=v.current)==null?void 0:h.parentElement)==null?void 0:_.nextElementSibling)==null?void 0:z.querySelector('[role="treeitem"]');m==null||m.focus()}else if(o.key==="ArrowUp"){o.preventDefault();const m=(k=(I=(w=v.current)==null?void 0:w.parentElement)==null?void 0:I.previousElementSibling)==null?void 0:k.querySelector('[role="treeitem"]');m==null||m.focus()}};return t.jsxs("div",{children:[t.jsxs("div",{ref:v,role:"treeitem","aria-expanded":n?a:void 0,"aria-selected":d,"aria-label":n?`Folder ${l}`:`File ${l}`,tabIndex:d?0:-1,style:{display:"flex",alignItems:"center",paddingLeft:e*12,paddingRight:s.spacing.xs,cursor:"pointer",userSelect:"none",minHeight:28,paddingTop:4,paddingBottom:4,background:d?`${s.colors.accent}20`:f&&!d?s.colors.bg2:"transparent",borderRadius:s.radii.sm,color:d?s.colors.text0:s.colors.text1,fontSize:s.typography.size.sm,transition:"all 0.15s ease",outline:"none",border:f?`1px solid ${s.colors.accent}40`:"1px solid transparent"},onClick:b,onContextMenu:C,onKeyDown:A,onFocus:o=>{S(!0),o.currentTarget.scrollIntoView({block:"nearest",behavior:"smooth"})},onBlur:()=>S(!1),onMouseEnter:o=>{!d&&!f&&(o.currentTarget.style.background=s.colors.bg2)},onMouseLeave:o=>{!d&&!f&&(o.currentTarget.style.background="transparent")},children:[n?t.jsx(D,{size:16,style:{marginRight:4,transform:a?"rotate(90deg)":"rotate(0)",transition:"transform 0.1s",color:s.colors.text2}}):t.jsx("span",{style:{width:16,display:"inline-block"}}),n?t.jsx(E,{size:16,style:{marginRight:6,color:s.colors.accent}}):t.jsx(q,{size:16,style:{marginRight:6,color:s.colors.text2}}),t.jsx("span",{children:l})]}),n&&a&&t.jsx("div",{role:"group",children:Object.entries(r).map(([o,h])=>t.jsx(j,{name:o,value:h,level:e+1,parentPath:c,onFileClick:p},o))})]})}try{j.displayName="FileTreeNode",j.__docgenInfo={description:"",displayName:"FileTreeNode",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"number"}},parentPath:{defaultValue:{value:""},description:"",name:"parentPath",required:!1,type:{name:"string | undefined"}},onFileClick:{defaultValue:null,description:"",name:"onFileClick",required:!1,type:{name:"((path: string) => void) | undefined"}}}}}catch{}function T({onFileSelect:l}){const r=F(),e=$(),i=x(n=>n.selectedFile);g.useEffect(()=>{if(i){const n=document.getElementById("sr-announcements");if(n){const a=i.split("/").pop()||i;n.textContent=`Opened file ${a}`,setTimeout(()=>{n.textContent=""},1e3)}}},[i]);const p=B.useCallback(()=>{const n=e.getSnapshot();function a(u){const c={};for(const[y,d]of Object.entries(u.children||{}))d.type==="folder"?c[y]=a(d):c[y]="";return c}return a(n)},[e]);g.useEffect(()=>{V()},[e.root]);const s=p();return Object.keys(s).length===0?t.jsx(N,{style:{height:"100%",padding:r.spacing.md},children:t.jsxs("div",{role:"status","aria-live":"polite",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",padding:r.spacing.xl,textAlign:"center"},children:[t.jsx(E,{size:48,style:{color:r.colors.text2,opacity:.4,marginBottom:r.spacing.md}}),t.jsx("div",{style:{fontSize:r.typography.size.md,color:r.colors.text1,fontWeight:r.typography.weight.medium,marginBottom:r.spacing.xs},children:"No files yet"}),t.jsx("div",{style:{fontSize:r.typography.size.sm,color:r.colors.text1,maxWidth:"300px"},children:"Select a template or create a new file to begin"})]})}):t.jsx(N,{style:{height:"100%",padding:r.spacing.sm},children:t.jsx("div",{role:"tree","aria-label":"File Explorer",style:{fontSize:r.typography.size.sm,color:r.colors.text1},children:t.jsx(j,{name:"root",value:s,level:0,onFileClick:l})})})}try{T.displayName="FileTree",T.__docgenInfo={description:"",displayName:"FileTree",props:{onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((path: string) => void) | undefined"}}}}}catch{}function R({className:l,style:r}){var p;const e=F(),i=x(s=>s.selectedFile);return t.jsxs("div",{role:"region","aria-label":"Inspector panel",tabIndex:0,className:l,style:{height:"100%",width:"100%",background:e.colors.bg1,padding:e.spacing.md,borderRight:`1px solid ${e.colors.border}`,color:e.colors.text1,fontSize:e.typography.size.sm,overflowY:"auto",...r},children:[t.jsx("h3",{style:{margin:0,fontSize:e.typography.size.md,color:e.colors.text0,marginBottom:e.spacing.sm,fontWeight:e.typography.weight.semibold},children:"Inspector"}),!i&&t.jsxs("div",{role:"status","aria-live":"polite",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",padding:e.spacing.xl,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:32,marginBottom:e.spacing.md,opacity:.3,color:e.colors.text2},children:"üîç"}),t.jsx("div",{style:{fontSize:e.typography.size.md,color:e.colors.text1,fontWeight:e.typography.weight.medium,marginBottom:e.spacing.xs},children:"No file selected"}),t.jsx("div",{style:{fontSize:e.typography.size.sm,color:e.colors.text1},children:"Select a file to view its details"})]}),i&&t.jsxs("div",{style:{marginTop:e.spacing.md},children:[t.jsxs("div",{style:{marginBottom:e.spacing.sm},children:[t.jsx("strong",{style:{color:e.colors.text1},children:"Path:"})," ",t.jsx("span",{style:{color:e.colors.text2,fontFamily:"monospace"},children:i})]}),t.jsxs("div",{style:{marginBottom:e.spacing.sm},children:[t.jsx("strong",{style:{color:e.colors.text1},children:"Type:"})," ",t.jsx("span",{style:{color:e.colors.text2},children:i.includes(".")?"File":"Folder"})]}),i.includes(".")&&t.jsxs("div",{style:{marginBottom:e.spacing.sm},children:[t.jsx("strong",{style:{color:e.colors.text1},children:"Extension:"})," ",t.jsx("span",{style:{color:e.colors.text2},children:((p=i.split(".").pop())==null?void 0:p.toUpperCase())||"N/A"})]}),t.jsx("div",{style:{marginTop:e.spacing.lg,padding:e.spacing.md,background:e.colors.bg2,borderRadius:e.radii.sm,opacity:.6,color:e.colors.text2,fontSize:e.typography.size.sm},children:"(Additional metadata / editor tools will show here in Phase 4)"})]})]})}try{R.displayName="InspectorPanel",R.__docgenInfo={description:"",displayName:"InspectorPanel",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}export{T as F,R as I};
