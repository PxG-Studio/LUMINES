import{r as l,j as r}from"./iframe-BXkX_8oL.js";import{S as W}from"./search-CwVPrFhY.js";import{c as y}from"./createLucideIcon-kSpmkMCE.js";import{C as T}from"./chevron-down-CpZuDMZN.js";import{X as K}from"./x-BrWRloni.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=y("CaseSensitive",[["path",{d:"m3 15 4-8 4 8",key:"1vwr6u"}],["path",{d:"M4 13h6",key:"1r9ots"}],["circle",{cx:"18",cy:"12",r:"3",key:"1kchzo"}],["path",{d:"M21 9v6",key:"anns31"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=y("Regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("WholeWord",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),M=({editor:a,visible:h=!1,onClose:b})=>{const[n,I]=l.useState(""),[i,E]=l.useState(""),[d,z]=l.useState(!1),[c,F]=l.useState(!1),[p,D]=l.useState(!1),[u,f]=l.useState(0),[g,x]=l.useState(0),[m,L]=l.useState(!1),v=l.useRef(null),N=l.useRef(null);l.useEffect(()=>{h&&v.current&&v.current.focus()},[h]);const j=()=>{if(!a||!n){f(0),x(0);return}const e=a.getModel();if(!e)return;const t=e.findMatches(n,!1,!0,d,c,p);if(f(t.length),x(t.length>0?1:0),t.length>0){const o=t[0];a.setPosition(o.range.getStartPosition()),a.setSelection(o.range),a.revealLineInCenter(o.range.startLineNumber),a.deltaDecorations([],t.map(s=>({range:s.range,options:{className:"search-match",inlineClassName:"search-match"}})))}},k=()=>{if(!a||!n)return;const e=a.getModel();if(!e)return;const t=e.findMatches(n,!1,!0,d,c,p);if(t.length===0){f(0),x(0);return}const o=g<t.length?g:0,s=t[o];a.setPosition(s.range.getStartPosition()),a.setSelection(s.range),a.revealLineInCenter(s.range.startLineNumber),x(o+1),f(t.length)},R=()=>{if(!a||!n)return;const e=a.getModel();if(!e)return;const t=e.findMatches(n,!1,!0,d,c,p);if(t.length===0){f(0),x(0);return}const o=g>1?g-2:t.length-1,s=t[o];a.setPosition(s.range.getStartPosition()),a.setSelection(s.range),a.revealLineInCenter(s.range.startLineNumber),x(o+1),f(t.length)},w=()=>{if(!a||!n||!i)return;const e=a.getSelection();if(!e)return;const t=a.getModel();if(!t)return;const o=t.getValueInRange(e);let s=!1;d?s=new RegExp(n,c?"g":"gi").test(o):c?s=o===n:s=o.toLowerCase()===n.toLowerCase(),s&&(a.executeEdits("replace",[{range:e,text:i}]),k())},C=()=>{if(!a||!n||!i)return;const e=a.getModel();if(!e)return;const t=e.findMatches(n,!1,!0,d,c,p);if(t.length===0)return;const o=[...t].sort((s,S)=>s.range.startLineNumber!==S.range.startLineNumber?S.range.startLineNumber-s.range.startLineNumber:S.range.startColumn-s.range.startColumn);a.executeEdits("replaceAll",o.map(s=>({range:s.range,text:i}))),f(0),x(0)};return l.useEffect(()=>{n&&j()},[d,c,p]),l.useEffect(()=>{if(!h)return;const e=t=>{var o;(t.ctrlKey||t.metaKey)&&t.key==="f"?(t.preventDefault(),(o=v.current)==null||o.focus()):t.key==="Escape"?b==null||b():t.key==="Enter"&&t.shiftKey?(t.preventDefault(),R()):t.key==="Enter"&&(t.preventDefault(),k())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,b]),h?r.jsxs("div",{style:{position:"absolute",top:0,right:0,background:"var(--slate-panel, #16181d)",border:"1px solid var(--slate-border, #26292f)",borderTop:"none",borderRight:"none",borderRadius:"0 0 0 8px",padding:"8px 12px",zIndex:1e3,minWidth:400,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(W,{size:16,style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:"var(--slate-text-muted, #9ba1aa)"}}),r.jsx("input",{ref:v,type:"text",placeholder:"Search",value:n,onChange:e=>{I(e.target.value),setTimeout(j,100)},style:{width:"100%",padding:"6px 8px 6px 32px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,outline:"none"},onKeyDown:e=>{e.key==="Enter"&&e.shiftKey?(e.preventDefault(),R()):e.key==="Enter"&&(e.preventDefault(),k())}})]}),n&&r.jsx("div",{style:{fontSize:11,color:"var(--slate-text-muted, #9ba1aa)",whiteSpace:"nowrap",minWidth:60,textAlign:"right"},children:g>0?`${g} / ${u}`:"0 / 0"}),r.jsx("button",{onClick:R,disabled:u===0,style:{padding:"4px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:u>0?"pointer":"not-allowed",opacity:u>0?1:.5,display:"flex",alignItems:"center"},title:"Previous (Shift+Enter)",children:r.jsx(_,{size:14})}),r.jsx("button",{onClick:k,disabled:u===0,style:{padding:"4px 6px",background:"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",cursor:u>0?"pointer":"not-allowed",opacity:u>0?1:.5,display:"flex",alignItems:"center"},title:"Next (Enter)",children:r.jsx(T,{size:14})}),r.jsx("button",{onClick:()=>z(!d),style:{padding:"4px 6px",background:d?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:d?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Regex",children:r.jsx(A,{size:14})}),r.jsx("button",{onClick:()=>F(!c),style:{padding:"4px 6px",background:c?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:c?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Case Sensitive",children:r.jsx(P,{size:14})}),r.jsx("button",{onClick:()=>D(!p),style:{padding:"4px 6px",background:p?"rgba(166, 77, 255, 0.2)":"transparent",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:p?"#A64DFF":"var(--slate-text, #e4e7eb)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Whole Word",children:r.jsx(V,{size:14})}),r.jsx("button",{onClick:b,style:{padding:"4px 6px",background:"transparent",border:"none",color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",display:"flex",alignItems:"center"},title:"Close (Esc)",children:r.jsx(K,{size:14})})]}),m&&r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsxs("div",{style:{position:"relative",flex:1},children:[r.jsx(q,{size:16,style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:"var(--slate-text-muted, #9ba1aa)"}}),r.jsx("input",{ref:N,type:"text",placeholder:"Replace",value:i,onChange:e=>E(e.target.value),style:{width:"100%",padding:"6px 8px 6px 32px",background:"var(--slate-bg, #0f1115)",border:"1px solid var(--slate-border, #26292f)",borderRadius:4,color:"var(--slate-text, #e4e7eb)",fontSize:12,outline:"none"},onKeyDown:e=>{e.key==="Enter"&&e.ctrlKey?(e.preventDefault(),C()):e.key==="Enter"&&(e.preventDefault(),w())}})]}),r.jsx("button",{onClick:w,disabled:!n||!i,style:{padding:"6px 12px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:n&&i?"pointer":"not-allowed",opacity:n&&i?1:.5,fontSize:12},children:"Replace"}),r.jsx("button",{onClick:C,disabled:!n||!i,style:{padding:"6px 12px",background:"var(--slate-accent, #3f8cff)",border:"none",borderRadius:4,color:"#FFFFFF",cursor:n&&i?"pointer":"not-allowed",opacity:n&&i?1:.5,fontSize:12},children:"Replace All"})]}),r.jsx("div",{style:{marginTop:4},children:r.jsx("button",{onClick:()=>L(!m),style:{padding:"4px 8px",background:"transparent",border:"none",color:"var(--slate-text-muted, #9ba1aa)",cursor:"pointer",fontSize:11,textDecoration:m?"underline":"none"},children:m?"▼ Replace":"▶ Replace"})})]}):null};try{M.displayName="SearchReplace",M.__docgenInfo={description:"",displayName:"SearchReplace",props:{editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"IStandaloneCodeEditor | null"}},visible:{defaultValue:{value:"false"},description:"",name:"visible",required:!1,type:{name:"boolean | undefined"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}export{M as S};
