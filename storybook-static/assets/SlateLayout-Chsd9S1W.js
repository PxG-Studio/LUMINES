import{u as x,r as v,j as e}from"./iframe-BXkX_8oL.js";import{F as B,a as F}from"./File-BlZ5GgWr.js";import{u as z}from"./FileTreeState-DL1-4Pq4.js";import{I as W,b as L,c as P}from"./IgnitionProvider-MnQcKbU3.js";import{I as V,F as q}from"./InspectorPanel-CnP422kH.js";import{F as E}from"./index-CK8k0bZz.js";import{u as D}from"./wissilFs-D_4fnc1y.js";import{u as j}from"./editorState-BZUma5kk.js";import{I as M}from"./ignitionController-DqNioivO.js";import{I as $}from"./IgnisContainer-DHzLn3VR.js";import{S}from"./SplitView-DFJKalL5.js";function O(){const r=x(),[l,t]=v.useState("explorer"),a=[{id:"explorer",icon:e.jsx(B,{size:20}),title:"Explorer"},{id:"files",icon:e.jsx(F,{size:20}),title:"Files"}];return e.jsx("nav",{"aria-label":"Primary navigation",style:{width:52,background:r.colors.bg1,borderRight:`1px solid ${r.colors.border}`,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:16,gap:12},children:a.map(u=>{const o=l===u.id;return e.jsx("button",{type:"button",onClick:()=>t(u.id),"aria-label":u.title,"aria-pressed":o,title:u.title,style:{padding:10,cursor:"pointer",color:o?r.colors.accent:r.colors.text1,background:o?`${r.colors.accent}20`:"transparent",borderRadius:r.radii.sm,transition:"all 0.15s ease",border:"none",outline:"none",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:s=>{o||(s.currentTarget.style.color=r.colors.text0,s.currentTarget.style.background=r.colors.bg2)},onMouseLeave:s=>{o||(s.currentTarget.style.color=r.colors.text1,s.currentTarget.style.background="transparent")},onFocus:s=>{s.currentTarget.style.outline=`2px solid ${r.colors.accent}`,s.currentTarget.style.outlineOffset="2px"},onBlur:s=>{s.currentTarget.style.outline="none"},children:u.icon},u.id)})})}function T({className:r,style:l}){const t=x(),{openFiles:a,activeFile:u,setActive:o,close:s}=z(),y=v.useRef(null);a.findIndex(n=>n===u);const h=(n,d,c)=>{var g,i,p,b;if(n.key==="ArrowLeft"){n.preventDefault();const f=c>0?c-1:a.length-1;o(a[f]);const m=(g=y.current)==null?void 0:g.children[f];m==null||m.focus()}else if(n.key==="ArrowRight"){n.preventDefault();const f=c<a.length-1?c+1:0;o(a[f]);const m=(i=y.current)==null?void 0:i.children[f];m==null||m.focus()}else if(n.key==="Home"){n.preventDefault(),o(a[0]);const f=(p=y.current)==null?void 0:p.children[0];f==null||f.focus()}else if(n.key==="End"){n.preventDefault();const f=a.length-1;o(a[f]);const m=(b=y.current)==null?void 0:b.children[f];m==null||m.focus()}else n.key==="w"&&n.ctrlKey&&(n.preventDefault(),s(d))};return a.length===0?e.jsx("div",{className:r,role:"tablist","aria-label":"Open files",style:{height:40,display:"flex",alignItems:"center",borderBottom:`1px solid ${t.colors.border}`,background:t.colors.bg1,paddingLeft:t.spacing.sm,...l},children:e.jsx("button",{type:"button",role:"tab","aria-selected":"false","aria-disabled":"true",tabIndex:-1,style:{fontSize:t.typography.size.sm,color:t.colors.text2,cursor:"default",background:"transparent",border:"none",padding:0},children:"No files open"})}):e.jsx("div",{ref:y,className:r,role:"tablist","aria-label":"Open files",style:{height:40,display:"flex",alignItems:"center",background:t.colors.bg1,borderBottom:`1px solid ${t.colors.border}`,paddingLeft:t.spacing.sm,gap:t.spacing.xs,overflowX:"auto",...l},children:a.map((n,d)=>{const c=n===u,g=n.split("/").pop()||n;return e.jsxs("button",{type:"button",role:"tab","aria-selected":c,"aria-controls":"editor-panel",tabIndex:c?0:-1,onClick:()=>o(n),onKeyDown:i=>h(i,n,d),style:{padding:"6px 10px",borderRadius:t.radii.sm,border:`1px solid ${t.colors.border}`,background:c?t.colors.bg2:t.colors.bg1,cursor:"pointer",display:"flex",alignItems:"center",gap:t.spacing.xs,fontSize:t.typography.size.sm,color:c?t.colors.text0:t.colors.text1,whiteSpace:"nowrap",transition:"all 0.15s ease",outline:"none",fontFamily:t.typography.font},onMouseEnter:i=>{c||(i.currentTarget.style.background=t.colors.bg2)},onMouseLeave:i=>{c||(i.currentTarget.style.background=t.colors.bg1)},onFocus:i=>{i.currentTarget.style.outline=`2px solid ${t.colors.accent}`,i.currentTarget.style.outlineOffset="2px"},onBlur:i=>{c||(i.currentTarget.style.outline="none")},children:[e.jsx("span",{children:g}),e.jsx("button",{type:"button","aria-label":`Close ${g}`,onClick:i=>{i.stopPropagation(),s(n)},style:{cursor:"pointer",opacity:.6,fontSize:"14px",lineHeight:1,padding:"2px 4px",borderRadius:t.radii.sm,display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:"transparent",color:"inherit",outline:"none"},onMouseEnter:i=>{i.currentTarget.style.opacity="1",i.currentTarget.style.background=t.colors.error,i.currentTarget.style.color="#fff"},onMouseLeave:i=>{i.currentTarget.style.opacity="0.6",i.currentTarget.style.background="transparent",i.currentTarget.style.color=""},onFocus:i=>{i.currentTarget.style.outline=`2px solid ${t.colors.error}`,i.currentTarget.style.outlineOffset="1px"},onBlur:i=>{i.currentTarget.style.outline="none"},children:e.jsx("span",{"aria-hidden":"true",children:"âœ•"})})]},n)})})}try{T.displayName="TabBar",T.__docgenInfo={description:"",displayName:"TabBar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function I({onRun:r,onRestart:l,onStop:t}){const a=x();return e.jsx("div",{style:{height:44,borderBottom:`1px solid ${a.colors.border}`,background:a.colors.bg1,display:"flex",alignItems:"center",paddingLeft:a.spacing.md},children:e.jsx(W,{onRun:r,onRestart:l,onStop:t})})}try{I.displayName="EditorToolbar",I.__docgenInfo={description:"",displayName:"EditorToolbar",props:{onRun:{defaultValue:null,description:"",name:"onRun",required:!1,type:{name:"(() => void) | undefined"}},onRestart:{defaultValue:null,description:"",name:"onRestart",required:!1,type:{name:"(() => void) | undefined"}},onStop:{defaultValue:null,description:"",name:"onStop",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}let _=null;function A(){_&&clearTimeout(_),_=setTimeout(()=>{M.run("src/main.ts"),_=null},350)}function H(){const r=x(),l=z(d=>d.activeFile),t=D.getState(),a=j(d=>d.setCursorPosition),u=v.useRef(null),[o,s]=v.useState("");v.useEffect(()=>{if(!l){s("");return}const d=t.readFile(l)??"";s(d)},[l,t]);const y=(d,c)=>{u.current=d,d.onDidChangeCursorPosition(g=>{a(g.position.lineNumber,g.position.column)}),c.editor.defineTheme("nocturna-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#161923","editor.foreground":"#d4d7e0","editor.lineHighlightBackground":"#1e2230","editorCursor.foreground":"#6d8cff","editor.selectionBackground":"#2a3441","editor.inactiveSelectionBackground":"#1e2230","editorLineNumber.foreground":"#4a5568","editorLineNumber.activeForeground":"#6d8cff"}}),c.editor.setTheme("nocturna-dark")},h=d=>{d.languages.typescript.typescriptDefaults.setCompilerOptions({target:d.languages.typescript.ScriptTarget.ES2020,allowNonTsExtensions:!0,moduleResolution:d.languages.typescript.ModuleResolutionKind.NodeJs,module:d.languages.typescript.ModuleKind.ESNext,noEmit:!0,esModuleInterop:!0,jsx:d.languages.typescript.JsxEmit.React,reactNamespace:"React",allowJs:!0,typeRoots:["node_modules/@types"]}),d.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})},n=d=>{!l||d==null||(t.writeFile(l,d),s(d),A())};return l?e.jsx(E,{height:"100%",theme:"nocturna-dark",path:l,defaultLanguage:K(l),value:o,onChange:n,onMount:y,beforeMount:h,options:{fontSize:14,fontFamily:"'Fira Code', 'Consolas', 'Monaco', monospace",minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,wordWrap:"on",lineNumbers:"on",renderLineHighlight:"all",cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",smoothScrolling:!0,formatOnPaste:!0,formatOnType:!0}}):e.jsxs("div",{role:"status","aria-live":"polite",style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:r.spacing.xl,background:r.colors.bg0},children:[e.jsx("div",{style:{fontSize:48,marginBottom:r.spacing.md,opacity:.3,color:r.colors.text2},children:"ðŸ“"}),e.jsx("div",{style:{fontSize:r.typography.size.lg,color:r.colors.text1,fontWeight:r.typography.weight.medium,marginBottom:r.spacing.xs},children:"No file open"}),e.jsx("div",{style:{fontSize:r.typography.size.sm,color:r.colors.text1,textAlign:"center",maxWidth:"400px"},children:"Select a file from the explorer to start editing"})]})}function K(r){return r.endsWith(".ts")||r.endsWith(".tsx")?"typescript":r.endsWith(".js")||r.endsWith(".jsx")?"javascript":r.endsWith(".css")?"css":r.endsWith(".html")?"html":r.endsWith(".json")?"json":r.endsWith(".md")||r.endsWith(".mdx")?"markdown":"plaintext"}function k({className:r,style:l}){return e.jsx($,{className:r,style:l})}try{k.displayName="PreviewPanel",k.__docgenInfo={description:"",displayName:"PreviewPanel",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function w({logs:r,className:l,style:t}){return e.jsx(L,{className:l,style:t})}try{w.displayName="ConsolePanel",w.__docgenInfo={description:"",displayName:"ConsolePanel",props:{logs:{defaultValue:null,description:"",name:"logs",required:!1,type:{name:"string[] | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function C({initialTab:r="console",height:l,className:t,style:a,onTabChange:u}){const o=x(),[s,y]=v.useState(r),h=c=>{y(c),u==null||u(c)},n=["console","logs","errors"],d=l!==void 0?`${l}px`:"100%";return e.jsxs("div",{className:t,style:{display:"flex",flexDirection:"column",height:d,width:"100%",background:o.colors.bg1,borderTop:`1px solid ${o.colors.border}`,...a},children:[e.jsx("div",{role:"tablist","aria-label":"Output panel tabs",style:{height:34,display:"flex",alignItems:"center",borderBottom:`1px solid ${o.colors.border}`,paddingLeft:o.spacing.md,gap:o.spacing.lg,background:o.colors.bg2},children:n.map((c,g)=>{const i=s===c;return e.jsx("button",{type:"button",role:"tab",id:`${c}-tab`,"aria-selected":i,"aria-controls":`${c}-panel`,tabIndex:i?0:-1,onClick:()=>h(c),onKeyDown:p=>{if(p.key==="ArrowLeft"){p.preventDefault();const b=g>0?g-1:n.length-1;h(n[b])}else if(p.key==="ArrowRight"){p.preventDefault();const b=g<n.length-1?g+1:0;h(n[b])}},style:{padding:"6px 8px",cursor:"pointer",fontSize:o.typography.size.sm,color:i?o.colors.text0:o.colors.text2,borderBottom:i?`2px solid ${o.colors.accent}`:"none",transition:"color 0.15s ease",textTransform:"uppercase",fontWeight:i?o.typography.weight.medium:o.typography.weight.regular,background:"transparent",borderTop:"none",borderLeft:"none",borderRight:"none",outline:"none",fontFamily:o.typography.font},onMouseEnter:p=>{i||(p.currentTarget.style.color=o.colors.text1)},onMouseLeave:p=>{i||(p.currentTarget.style.color=o.colors.text2)},onFocus:p=>{p.currentTarget.style.outline=`2px solid ${o.colors.accent}`,p.currentTarget.style.outlineOffset="2px"},onBlur:p=>{i||(p.currentTarget.style.outline="none")},children:c},c)})}),e.jsxs("div",{style:{flex:1,overflow:"hidden"},children:[s==="console"&&e.jsx("div",{role:"tabpanel",id:"console-panel","aria-labelledby":"console-tab",children:e.jsx(w,{})}),s==="logs"&&e.jsxs("div",{role:"tabpanel",id:"logs-panel","aria-labelledby":"logs-tab",style:{padding:o.spacing.xl,height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:o.spacing.md,opacity:.3,color:o.colors.text2},children:"ðŸ“‹"}),e.jsx("div",{style:{fontSize:o.typography.size.md,color:o.colors.text1,fontWeight:o.typography.weight.medium,marginBottom:o.spacing.xs},children:"No logs yet"}),e.jsx("div",{style:{fontSize:o.typography.size.sm,color:o.colors.text2,opacity:.8},children:"Runtime logs will appear here when you run a program"})]}),s==="errors"&&e.jsxs("div",{role:"tabpanel",id:"errors-panel","aria-labelledby":"errors-tab",style:{padding:o.spacing.xl,height:"100%",overflowY:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:o.spacing.md,opacity:.3,color:o.colors.error},children:"âš ï¸"}),e.jsx("div",{style:{fontSize:o.typography.size.md,color:o.colors.error,fontWeight:o.typography.weight.medium,marginBottom:o.spacing.xs},children:"No errors"}),e.jsx("div",{style:{fontSize:o.typography.size.sm,color:o.colors.text2,opacity:.8},children:"Build and runtime errors will appear here"})]})]})]})}try{C.displayName="BottomPanel",C.__docgenInfo={description:"",displayName:"BottomPanel",props:{initialTab:{defaultValue:{value:"console"},description:"",name:"initialTab",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"console"'},{value:'"logs"'},{value:'"errors"'}]}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab: BottomPanelTab) => void) | undefined"}}}}}catch{}function N({className:r,style:l}){const t=x(),a=j(n=>n.selectedFile),u=j(n=>n.buildStatus),o=j(n=>n.cursorLine),s=j(n=>n.cursorCol),y=u==="running"?t.colors.accent:u==="error"?t.colors.error:t.colors.text2,h=n=>n?n.endsWith(".ts")||n.endsWith(".tsx")?"TypeScript":n.endsWith(".js")||n.endsWith(".jsx")?"JavaScript":n.endsWith(".css")?"CSS":n.endsWith(".html")||n.endsWith(".htm")?"HTML":n.endsWith(".json")?"JSON":n.endsWith(".md")?"Markdown":n.endsWith(".py")?"Python":n.endsWith(".rs")?"Rust":n.endsWith(".go")?"Go":"Plain Text":"Plain Text";return e.jsxs("div",{className:r,style:{height:28,width:"100%",background:t.colors.bg1,borderTop:`1px solid ${t.colors.border}`,display:"flex",alignItems:"center",fontSize:t.typography.size.sm,color:t.colors.text2,paddingLeft:t.spacing.md,paddingRight:t.spacing.md,fontFamily:t.typography.font,...l},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:t.spacing.lg,color:y,fontWeight:t.typography.weight.medium},children:[e.jsx("span",{style:{marginRight:t.spacing.xs},children:"â—"}),u.toUpperCase()]}),e.jsx("div",{style:{marginRight:"auto",color:t.colors.text1,fontFamily:"monospace",fontSize:t.typography.size.sm,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"40%"},children:a||"No file selected"}),e.jsxs("div",{style:{marginRight:t.spacing.lg,color:t.colors.text2},children:["Ln ",o,", Col ",s]}),e.jsx("div",{style:{color:t.colors.text2},children:h(a)})]})}try{N.displayName="StatusBar",N.__docgenInfo={description:"",displayName:"StatusBar",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}}}}}catch{}function R({onFileSelect:r,onTabSelect:l,onTabClose:t,onRun:a,onRestart:u,onStop:o}){const s=x();return e.jsx(P,{children:e.jsxs("div",{style:{width:"100vw",height:"100vh",background:s.colors.bg0,display:"flex",overflow:"hidden"},children:[e.jsx(O,{}),e.jsxs("div",{role:"main",style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsx(I,{onRun:a,onRestart:u,onStop:o}),e.jsx(T,{}),e.jsx("div",{style:{flex:1},children:e.jsxs(S,{direction:"vertical",initial:340,min:200,max:600,children:[e.jsxs(S,{direction:"horizontal",initial:220,min:150,max:400,children:[e.jsx(V,{}),e.jsx("div",{role:"region","aria-label":"File explorer",tabIndex:0,style:{overflowY:"auto",height:"100%",background:s.colors.bg1},children:e.jsx(q,{onFileSelect:r})})]}),e.jsxs(S,{direction:"vertical",initial:350,min:250,max:800,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(H,{}),e.jsx(N,{})]}),e.jsxs(S,{direction:"horizontal",initial:200,min:150,max:400,children:[e.jsx(k,{}),e.jsx(C,{height:void 0})]})]})]})})]}),e.jsx("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"sr-announcements"})]})})}try{R.displayName="SlateLayout",R.__docgenInfo={description:"",displayName:"SlateLayout",props:{onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((path: string) => void) | undefined"}},onTabSelect:{defaultValue:null,description:"",name:"onTabSelect",required:!1,type:{name:"((tab: string) => void) | undefined"}},onTabClose:{defaultValue:null,description:"",name:"onTabClose",required:!1,type:{name:"((tab: string) => void) | undefined"}},onRun:{defaultValue:null,description:"",name:"onRun",required:!1,type:{name:"(() => void) | undefined"}},onRestart:{defaultValue:null,description:"",name:"onRestart",required:!1,type:{name:"(() => void) | undefined"}},onStop:{defaultValue:null,description:"",name:"onStop",required:!1,type:{name:"(() => void) | undefined"}}}}}catch{}export{R as S};
